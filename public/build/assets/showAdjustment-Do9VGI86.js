import{A as N}from"./AppLayout-CdKr8ESd.js";import{r as p,D as u,T as C,q as L,B as M,s as _,c as S,w,N as h,o as r,a as e,k as g,A as v,d,g as k,F as j,f as O,x as T,e as c,t as n,b as U}from"./app-BlA7PXUo.js";import{M as A}from"./vue3-multiselect.umd.min-BmnbD0fr.js";import{P as D}from"./Pagination-BbMbld6b.js";import{B as V}from"./BillingSearch-DmSHlX0D.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as E}from"./switch-m7taiCy5.js";import"./DropdownLink-Zok9paaL.js";import"./main-DLK7fOAX.js";import"./render-CMGK6C1I.js";const I={name:"BillList",components:{AppLayout:N,Pagination:D,BillingSearch:V,Multiselect:A,Switch:E},props:{lists:Object,billings:Object,packages:Object,projects:Object,townships:Object,status:Object,errors:Object,user:Object,users:Object,roles:Object,max_receipt:Object,receivable:Object,paid:Object,current_bill:Object,smsgateway:Object,prepaid_customers:Object},setup(a){p({date:"YYYY-MM-DD",month:"MMM"}),u("packages",a.packages),u("projects",a.projects),u("townships",a.townships),u("status",a.status);let t=p(!1);p(!1);let i=p("");const l=C({id:null,bill_id:a.current_bill?a.current_bill.id:null,general:null,adjustment_type:0}),b=s=>{let o="/showAdjustment";l.bill_id!=null&&(s.bill_id=l.bill_id),h.get(o,l,{preserveState:!0})},f=()=>{t.value=!t.value,console.log(a.route)};function m(){let s=Object.create({});s.bill_id=l.bill_id,i.value=s,l._method="GET",h.get("/showAdjustment",l,{preserveState:!0,resetOnSuccess:!0,onSuccess:o=>{cal_percent()},onError:o=>{console.log("error ..".errors)}})}function x(){axios.post("/exportBillingExcel",i.value).then(s=>{console.log(s);var o=document.createElement("a");document.body.appendChild(o),o.style="display: none";let B=new Blob([s.data],{type:"text/csv"}),y=window.URL.createObjectURL(B);o.href=y,o.download="billings.csv",o.click(),window.URL.revokeObjectURL(y)})}return L(()=>{let s=a.current_bill?a.current_bill.id:null;if(s){let o=Object.create({});o.bill_id=s,i.value=o}}),M(()=>{let s=a.current_bill?a.current_bill.id:null;if(s){let o=Object.create({});o.bill_id=s,i.value=o}}),{view:m,show_search:t,form:l,toggleAdv:f,filter:b,doExcel:x}}},R={class:"py-2"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 flex"},q=["value"],F={class:"mt-4 mx-auto sm:px-6 lg:px-8 grid grid-cols-1 md:grid-cols-4 gap-6 w-full"},z={class:"col-span-1 sm:col-span-1"},G={class:"mt-1 flex rounded-md shadow-sm"},H={class:"col-span-1 sm:col-span-1"},J={class:"mt-1 flex rounded-md shadow-sm"},K={class:"col-span-1 sm:col-span-1 flex items-end"},Q={key:0,class:"max-w-full mx-auto sm:px-6 lg:px-8 mt-4"},W={key:0,class:"bg-white overflow-auto shadow-xl sm:rounded-lg"},X={class:"min-w-full divide-y divide-gray-200"},Z={class:"bg-white divide-y divide-gray-200"},$={class:"pl-4 px-2 py-3 text-xs whitespace-nowrap"},ee={class:"px-2 py-3 text-xs whitespace-nowrap"},te={class:"px-2 py-3 text-xs whitespace-nowrap"},se={class:"px-2 py-3 text-xs whitespace-nowrap"},le={class:"px-2 py-3 text-xs whitespace-nowrap"},oe={class:"px-2 py-3 text-xs whitespace-nowrap"},ie={class:"px-2 py-3 text-xs whitespace-nowrap"},ae={class:"px-2 py-3 text-xs whitespace-nowrap"},ne={key:1,class:"w-full block mt-4"},re={class:"text-xs text-gray-600"},de={key:2},ce={key:3,"wire:loading":"",class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function pe(a,t,i,l,b,f){const m=_("pagination"),x=_("app-layout");return r(),S(x,null,{header:w(()=>t[5]||(t[5]=[e("h2",{class:"font-semibold text-xl text-white leading-tight"},"Bill Adjustment List",-1)])),default:w(()=>[e("div",R,[e("div",Y,[t[8]||(t[8]=e("label",{for:"name",class:"block text-sm font-bold text-gray-700 w-24 mt-3"},"Billing List :",-1)),g(e("select",{id:"id","onUpdate:modelValue":t[0]||(t[0]=s=>l.form.bill_id=s),name:"bill_id",class:"ml-2 py-2.5 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",tabindex:"1",required:""},[t[6]||(t[6]=e("option",{value:"0"},"-Choose Package-",-1)),(r(!0),d(j,null,k(i.lists,s=>(r(),d("option",{key:s.id,value:s.id},n(s.name),9,q))),128))],512),[[v,l.form.bill_id]]),e("a",{onClick:t[1]||(t[1]=(...s)=>l.view&&l.view(...s)),class:"ml-2 cursor-pointer inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},t[7]||(t[7]=[O("View "),e("i",{class:"ml-1 fa fa-search text-white",tabindex:"2"},null,-1)]))]),e("div",F,[e("div",z,[t[10]||(t[10]=e("label",{for:"sh_general",class:"block text-sm font-medium text-gray-700"},"General ",-1)),e("div",G,[t[9]||(t[9]=e("span",{class:"z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[e("i",{class:"fas fa-user"})],-1)),g(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=s=>l.form.general=s),name:"sh_general",id:"sh_general",class:"pl-10 py-2.5 focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Customer/Company Name etc.",tabindex:"3"},null,512),[[T,l.form.general]])])]),e("div",H,[t[12]||(t[12]=e("label",{for:"sh_package",class:"block text-sm font-medium text-gray-700"},"Payment Type ",-1)),e("div",J,[g(e("select",{id:"sh_package","onUpdate:modelValue":t[3]||(t[3]=s=>l.form.adjustment_type=s),name:"sh_package",class:"py-2.5 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",tabindex:"4"},t[11]||(t[11]=[e("option",{value:"0"},"-Both-",-1),e("option",{value:"Debit Note"},"Debit Note",-1),e("option",{value:"Credit Note"},"Credit Note",-1)]),512),[[v,l.form.adjustment_type]])])]),e("div",K,[e("a",{onClick:t[4]||(t[4]=(...s)=>l.filter&&l.filter(...s)),class:"ml-2 cursor-pointer inline-flex items-center px-4 py-3 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},t[13]||(t[13]=[O("Filter "),e("i",{class:"ml-1 fa fa-search text-white",tabindex:"5"},null,-1)]))])]),i.billings?(r(),d("div",Q,[i.billings.data?(r(),d("div",W,[e("table",X,[t[14]||(t[14]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"pl-3 px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," No."),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Bill Number"),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Customer ID"),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Package"),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Speed "),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Usage "),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Payable"),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type ")])],-1)),e("tbody",Z,[(r(!0),d(j,null,k(i.billings.data,(s,o)=>(r(),d("tr",{key:s.id},[e("td",$,n(o+=i.billings.from),1),e("td",ee,n(s.bill_number),1),e("td",te,n(s.ftth_id),1),e("td",se,n(s.service_description),1),e("td",le,n(s.qty),1),e("td",oe,n(s.usage_days),1),e("td",ie,n(s.total_payable),1),e("td",ae,n(s.adjustment_type),1)]))),128))])])])):c("",!0),i.billings.total?(r(),d("span",ne,[e("label",re,n(i.billings.data.length)+" Invoices in Current Page. Total Number of Invoices : "+n(i.billings.total),1)])):c("",!0),i.billings.links?(r(),d("span",de,[U(m,{class:"mt-6",links:i.billings.links},null,8,["links"])])):c("",!0),a.loading?(r(),d("div",ce,t[15]||(t[15]=[e("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),e("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),e("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):c("",!0)])):c("",!0)])]),_:1})}const ve=P(I,[["render",pe],["__scopeId","data-v-e8e1046a"]]);export{ve as default};
