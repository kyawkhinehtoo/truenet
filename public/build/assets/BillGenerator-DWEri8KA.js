import{A as Be}from"./AppLayout-BByj_v5h.js";import{M as Se}from"./vue3-multiselect.umd.min-3nLnfQle.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as g,d as h,a as s,t as p,n as E,C as H,D as I,E as ae,r as v,G as de,j as N,q as k,H as ue,I as U,y as ke,T as Ce,s as R,c as Me,w as L,b as Y,f as O,k as A,x as P,e as _}from"./app-CwXgj7O2.js";import{V as je}from"./main-CDr1BHpQ.js";import{N as De,i as Fe,A as me,T as Le,S as T,u as Q,o as re}from"./render-CS8vBTqT.js";import"./DropdownLink-Dsobse8H.js";const Oe={props:["steps","step"]},Ae={class:"mt-2"},Pe={class:"mb-4 text-center font-black text-gray-700"},Ve={class:"flex"},Ie={class:"w-1/3 text-center px-6"},Ne={class:"w-1/3 text-center px-6"},Ue={class:"w-1/3 text-center px-6"};function He(t,e,r,n,a,o){return g(),h("div",Ae,[s("div",null,[s("h1",Pe,"STEPS "+p(r.step),1),s("div",Ve,[s("div",Ie,[s("div",{class:E(["bg-gray-300 rounded-lg flex items-center justify-center border border-gray-200",{"transition-colors duration-600 ease-in-out bg-yellow-300 border-yellow-200":r.step>=1}])},[e[1]||(e[1]=s("div",{class:"w-1/3 bg-transparent h-20 flex items-center justify-center icon-step"},[s("i",{class:"fas fa-cogs fa-2x flex"})],-1)),s("div",{class:E(["w-2/3 bg-gray-200 h-24 flex flex-col items-center justify-center px-1 rounded-r-lg body-step",{"transition-colors duration-600 ease-in-out bg-yellow-200 transform":r.step>=1}])},e[0]||(e[0]=[s("h2",{class:"font-bold text-sm"},"Billing Info",-1),s("p",{class:"text-xs text-gray-600"}," Pleae Enter Billing Metadata ",-1)]),2)],2)]),e[6]||(e[6]=s("div",{class:"flex-1 flex items-center justify-center"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[s("path",{d:"M14 2h-7.229l7.014 7h-13.785v6h13.785l-7.014 7h7.229l10-10z"})])],-1)),s("div",Ne,[s("div",{class:E(["bg-gray-300 rounded-lg flex items-center justify-center border border-gray-200",{"transition-colors duration-600 ease-in-out bg-green-300 border-green-200":r.step>=2}])},[e[3]||(e[3]=s("div",{class:"w-1/3 bg-transparent h-20 flex items-center justify-center icon-step"},[s("i",{class:"fas fa-cogs fa-2x flex"})],-1)),s("div",{class:E(["w-2/3 bg-gray-200 h-24 flex flex-col items-center justify-center px-1 rounded-r-lg body-step",{"transition-colors duration-600 ease-in-out bg-green-200 transform":r.step>=2}])},e[2]||(e[2]=[s("h2",{class:"font-bold text-sm"},"Preview the Data",-1),s("p",{class:"text-xs text-gray-600"}," Data confirmation ! ",-1)]),2)],2)]),e[7]||(e[7]=s("div",{class:"flex-1 flex items-center justify-center"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[s("path",{d:"M14 2h-7.229l7.014 7h-13.785v6h13.785l-7.014 7h7.229l10-10z"})])],-1)),s("div",Ue,[s("div",{class:E(["bg-gray-300 rounded-lg flex items-center justify-center border border-gray-200",{"transition-colors duration-600 ease-in-out bg-blue-300 border-blue-200":r.step>=3}])},[e[5]||(e[5]=s("div",{class:"w-1/3 bg-transparent h-20 flex items-center justify-center icon-step"},[s("i",{class:"fas fa-cogs fa-2x flex"})],-1)),s("div",{class:E(["w-2/3 bg-gray-200 h-24 flex flex-col items-center justify-center px-1 rounded-r-lg body-step",{"transition-colors duration-600 ease-in-out bg-blue-200 transform":r.step>=3}])},e[4]||(e[4]=[s("h2",{class:"font-bold text-sm"},"Success",-1),s("p",{class:"text-xs text-gray-600"}," Bill Generation Complete ! ",-1)]),2)],2)])])])])}const qe=ie(Oe,[["render",He]]);function Ge(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function X(){let t=[],e={addEventListener(r,n,a,o){return r.addEventListener(n,a,o),e.add(()=>r.removeEventListener(n,a,o))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);e.add(()=>cancelAnimationFrame(n))},nextFrame(...r){e.requestAnimationFrame(()=>{e.requestAnimationFrame(...r)})},setTimeout(...r){let n=setTimeout(...r);e.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return Ge(()=>{n.current&&r[0]()}),e.add(()=>{n.current=!1})},style(r,n,a){let o=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:a}),this.add(()=>{Object.assign(r.style,{[n]:o})})},group(r){let n=X();return r(n),this.add(()=>n.dispose())},add(r){return t.push(r),()=>{let n=t.indexOf(r);if(n>=0)for(let a of t.splice(n,1))a()}},dispose(){for(let r of t.splice(0))r()}};return e}var Re=Object.defineProperty,Ye=(t,e,r)=>e in t?Re(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,le=(t,e,r)=>(Ye(t,typeof e!="symbol"?e+"":e,r),r);let ze=class{constructor(){le(this,"current",this.detect()),le(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},Qe=new ze,fe=Symbol("Context");var b=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(b||{});function We(){return ce()!==null}function ce(){return H(fe,null)}function Xe(t){I(fe,t)}function Ze(t){let e={called:!1};return(...r)=>{if(!e.called)return e.called=!0,t(...r)}}function z(t,...e){t&&e.length>0&&t.classList.add(...e)}function V(t,...e){t&&e.length>0&&t.classList.remove(...e)}var W=(t=>(t.Finished="finished",t.Cancelled="cancelled",t))(W||{});function Je(t,e){let r=X();if(!t)return r.dispose;let{transitionDuration:n,transitionDelay:a}=getComputedStyle(t),[o,i]=[n,a].map(d=>{let[u=0]=d.split(",").filter(Boolean).map(l=>l.includes("ms")?parseFloat(l):parseFloat(l)*1e3).sort((l,m)=>m-l);return u});return o!==0?r.setTimeout(()=>e("finished"),o+i):e("finished"),r.add(()=>e("cancelled")),r.dispose}function oe(t,e,r,n,a,o){let i=X(),d=o!==void 0?Ze(o):()=>{};return V(t,...a),z(t,...e,...r),i.nextFrame(()=>{V(t,...r),z(t,...n),i.add(Je(t,u=>(V(t,...n,...e),z(t,...a),d(u))))}),i.add(()=>V(t,...e,...r,...n,...a)),i.add(()=>d("cancelled")),i.dispose}function w(t=""){return t.split(/\s+/).filter(e=>e.length>1)}let Z=Symbol("TransitionContext");var Ke=(t=>(t.Visible="visible",t.Hidden="hidden",t))(Ke||{});function $e(){return H(Z,null)!==null}function et(){let t=H(Z,null);if(t===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return t}function tt(){let t=H(J,null);if(t===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return t}let J=Symbol("NestingContext");function q(t){return"children"in t?q(t.children):t.value.filter(({state:e})=>e==="visible").length>0}function ge(t){let e=v([]),r=v(!1);k(()=>r.value=!0),ue(()=>r.value=!1);function n(o,i=T.Hidden){let d=e.value.findIndex(({id:u})=>u===o);d!==-1&&(Q(i,{[T.Unmount](){e.value.splice(d,1)},[T.Hidden](){e.value[d].state="hidden"}}),!q(e)&&r.value&&(t==null||t()))}function a(o){let i=e.value.find(({id:d})=>d===o);return i?i.state!=="visible"&&(i.state="visible"):e.value.push({id:o,state:"visible"}),()=>n(o,T.Unmount)}return{children:e,register:a,unregister:n}}let pe=De.RenderStrategy,be=ae({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(t,{emit:e,attrs:r,slots:n,expose:a}){let o=v(0);function i(){o.value|=b.Opening,e("beforeEnter")}function d(){o.value&=~b.Opening,e("afterEnter")}function u(){o.value|=b.Closing,e("beforeLeave")}function l(){o.value&=~b.Closing,e("afterLeave")}if(!$e()&&We())return()=>de(ve,{...t,onBeforeEnter:i,onAfterEnter:d,onBeforeLeave:u,onAfterLeave:l},n);let m=v(null),B=N(()=>t.unmount?T.Unmount:T.Hidden);a({el:m,$el:m});let{show:f,appear:M}=et(),{register:j,unregister:C}=tt(),c=v(f.value?"visible":"hidden"),K={value:!0},S=Fe(),D={value:!1},$=ge(()=>{!D.value&&c.value!=="hidden"&&(c.value="hidden",C(S),l())});k(()=>{let x=j(S);ue(x)}),U(()=>{if(B.value===T.Hidden&&S){if(f.value&&c.value!=="visible"){c.value="visible";return}Q(c.value,{hidden:()=>C(S),visible:()=>j(S)})}});let ee=w(t.enter),te=w(t.enterFrom),xe=w(t.enterTo),ne=w(t.entered),he=w(t.leave),ye=w(t.leaveFrom),_e=w(t.leaveTo);k(()=>{U(()=>{if(c.value==="visible"){let x=re(m);if(x instanceof Comment&&x.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function we(x){let G=K.value&&!M.value,y=re(m);!y||!(y instanceof HTMLElement)||G||(D.value=!0,f.value&&i(),f.value||u(),x(f.value?oe(y,ee,te,xe,ne,F=>{D.value=!1,F===W.Finished&&d()}):oe(y,he,ye,_e,ne,F=>{D.value=!1,F===W.Finished&&(q($)||(c.value="hidden",C(S),l()))})))}return k(()=>{ke([f],(x,G,y)=>{we(y),K.value=!1},{immediate:!0})}),I(J,$),Xe(N(()=>Q(c.value,{visible:b.Open,hidden:b.Closed})|o.value)),()=>{let{appear:x,show:G,enter:y,enterFrom:F,enterTo:jt,entered:Dt,leave:Ft,leaveFrom:Lt,leaveTo:Ot,...se}=t,Ee={ref:m},Te={...se,...M.value&&f.value&&Qe.isServer?{class:E([r.class,se.class,...ee,...te])}:{}};return me({theirProps:Te,ourProps:Ee,slot:{},slots:n,attrs:r,features:pe,visible:c.value==="visible",name:"TransitionChild"})}}}),nt=be,ve=ae({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(t,{emit:e,attrs:r,slots:n}){let a=ce(),o=N(()=>t.show===null&&a!==null?(a.value&b.Open)===b.Open:t.show);U(()=>{if(![!0,!1].includes(o.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let i=v(o.value?"visible":"hidden"),d=ge(()=>{i.value="hidden"}),u=v(!0),l={show:o,appear:N(()=>t.appear||!u.value)};return k(()=>{U(()=>{u.value=!1,o.value?i.value="visible":q(d)||(i.value="hidden")})}),I(J,d),I(Z,l),()=>{let m=Le(t,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),B={unmount:t.unmount};return me({ourProps:{...B,as:"template"},theirProps:{},slot:{},slots:{...n,default:()=>[de(nt,{onBeforeEnter:()=>e("beforeEnter"),onAfterEnter:()=>e("afterEnter"),onBeforeLeave:()=>e("beforeLeave"),onAfterLeave:()=>e("afterLeave"),...r,...B,...m},n.default)]},attrs:{},features:pe,visible:i.value==="visible",name:"Transition"})}}});const st={name:"BillGenerator",components:{AppLayout:Be,Steps:qe,Multiselect:Se,TransitionRoot:ve,TransitionChild:be,VueDatePicker:je},props:{packages:Object,townships:Object,bill:Object,projects:Object,errors:Object},setup(t){const e=v(1),r=v({date:"YYYY-MM-DD",month:"MMM"}),n=Ce({month:null,bill_id:null,period_covered_name:null,bill_number:null,issue_date:null,due_date:null,month_name:null,bill_month:null,bill_year:null});function a(){n.month=null,n.bill_id=null,n.period_covered=null,n.period_covered_name=null,n.bill_number=null,n.usd_exchange_rate=null,n.baht_exchange_rate=null,n.issue_date=null,n.due_date=null,n.expire_date=null,n.package=null,n.township=null,n.month_name=null,n.bill_month=null,n.bill_year=null,n.is_mmk=null}function o(){let l=n.month,m=new Date(l);n.bill_month=m.getMonth(),n.bill_month=n.bill_month+1,n.bill_year=m.getFullYear();let B=n.bill_month,f=n.bill_year.toString();var M={bill_month:"long"},j=f.substring(2,4),C=("0"+B).slice(-2);n.month_name=new Intl.DateTimeFormat("en-US",M).format(m),n.bill_number=j+C}function i(){n.month!=null?t.errors.month=null:t.errors.month="Please Enter Bill Month",n.bill_number!=null?t.errors.bill_number=null:t.errors.bill_number="Please Enter Bill Number",n.issue_date!=null?t.errors.issue_date=null:t.errors.issue_date="Please Enter Bill Issue Date",n.due_date!=null?t.errors.due_date=null:t.errors.due_date="Please Enter Bill Due Date",Object.values(t.errors).every(l=>l===null||l==="")&&e.value<=3&&e.value++}function d(){e.value>=1&&e.value--}function u(){n.post("/doGenerate",{onSuccess:l=>{Toast.fire({icon:"success",title:l.props.flash.message}),a()},onError:l=>{console.log(l)}})}return k(()=>{t.packages.map(function(l){return l.item_data=`${l.speed} Mbps ${l.name} - ${l.contract_period} Months`})}),{form:n,step:e,formatter:r,selectMonth:o,next:i,back:d,submit:u}}},rt={class:"py-2"},lt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ot={class:"bg-white shadow sm:rounded-lg mt-4"},it={class:"px-4 py-2"},at={class:"flex rounded-md shadow-sm"},dt={key:0,class:"mt-2 text-sm text-red-500"},ut={class:"px-4 py-2"},mt={class:"flex rounded-md shadow-sm"},ft={key:0,class:"mt-2 text-sm text-red-500"},ct={class:"px-4 py-2"},gt={class:"flex rounded-md shadow-sm"},pt={key:0,class:"mt-2 text-sm text-red-500"},bt={class:"px-4 py-2"},vt={class:"flex rounded-md shadow-sm"},xt={key:0,class:"mt-2 text-sm text-red-500"},ht={class:"bg-white shadow sm:rounded-lg mt-4"},yt={class:"border-t border-gray-200"},_t={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},wt={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},Et={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Tt={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},Bt={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},St={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},kt={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Ct={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"};function Mt(t,e,r,n,a,o){const i=R("steps"),d=R("TransitionRoot"),u=R("app-layout");return g(),Me(u,null,{header:L(()=>e[8]||(e[8]=[s("h2",{class:"font-semibold text-xl text-white leading-tight"},"Bill Generator",-1)])),default:L(()=>[s("div",rt,[s("div",lt,[Y(i,{steps:3,step:n.step},null,8,["step"]),Y(d,{show:n.step==1,enter:"transition ease-out duration-300 transform","enter-from":"translate-x-4","enter-to":"translate-x-0"},{default:L(()=>[s("div",ot,[s("div",it,[e[9]||(e[9]=s("label",{for:"month",class:"block text-gray-700 text-sm font-bold"},[s("span",{class:"text-red-500"},"*"),O(" Billing Month:")],-1)),s("div",at,[A(s("input",{type:"month","onUpdate:modelValue":e[0]||(e[0]=l=>n.form.month=l),name:"month",id:"month",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",onChange:e[1]||(e[1]=(...l)=>n.selectMonth&&n.selectMonth(...l))},null,544),[[P,n.form.month]])]),r.errors.month?(g(),h("p",dt,p(r.errors.month),1)):_("",!0)]),s("div",ut,[e[10]||(e[10]=s("label",{for:"bill_number",class:"block text-gray-700 text-sm font-bold"},[s("span",{class:"text-red-500"},"*"),O(" Bill Number:")],-1)),s("div",mt,[A(s("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=l=>n.form.bill_number=l),name:"bill_number",id:"bill_number",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[P,n.form.bill_number]])]),r.errors.bill_number?(g(),h("p",ft,p(r.errors.bill_number),1)):_("",!0)]),s("div",ct,[e[11]||(e[11]=s("label",{for:"issue_date",class:"block text-gray-700 text-sm font-bold"},[s("span",{class:"text-red-500"},"*"),O(" Issue Date:")],-1)),s("div",gt,[A(s("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=l=>n.form.issue_date=l),name:"issue_date",id:"issue_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[P,n.form.issue_date]])]),r.errors.issue_date?(g(),h("p",pt,p(r.errors.issue_date),1)):_("",!0)]),s("div",bt,[e[12]||(e[12]=s("label",{for:"due_date",class:"block text-gray-700 text-sm font-bold"},[s("span",{class:"text-red-500"},"*"),O(" Due Date:")],-1)),s("div",vt,[A(s("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=l=>n.form.due_date=l),name:"due_date",id:"due_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[P,n.form.due_date]])]),r.errors.due_date?(g(),h("p",xt,p(r.errors.due_date),1)):_("",!0)])])]),_:1},8,["show"]),Y(d,{show:n.step==2,enter:"transition ease-out duration-300 transform","enter-from":"translate-x-4","enter-to":"translate-x-0"},{default:L(()=>[s("div",ht,[e[17]||(e[17]=s("div",{class:"px-4 py-5 sm:px-6"},[s("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Billing Information"),s("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"},"Preview the information.")],-1)),s("div",yt,[s("dl",null,[s("div",_t,[e[13]||(e[13]=s("dt",{class:"text-sm font-medium text-gray-500"},"Billing Month",-1)),s("dd",wt,p(n.form.month_name),1)]),s("div",Et,[e[14]||(e[14]=s("dt",{class:"text-sm font-medium text-gray-500"},"Bill Number",-1)),s("dd",Tt,p(n.form.bill_number),1)]),s("div",Bt,[e[15]||(e[15]=s("dt",{class:"text-sm font-medium text-gray-500"},"Issue Date",-1)),s("dd",St,p(n.form.issue_date),1)]),s("div",kt,[e[16]||(e[16]=s("dt",{class:"text-sm font-medium text-gray-500"},"Due Date",-1)),s("dd",Ct,p(n.form.due_date),1)])])])])]),_:1},8,["show"]),n.step>1?(g(),h("button",{key:0,class:"mt-2 mr-2 bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded",onClick:e[5]||(e[5]=l=>n.back())},"Back")):_("",!0),n.step<2?(g(),h("button",{key:1,class:"mt-2 bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded",onClick:e[6]||(e[6]=l=>n.next())},"Next")):_("",!0),n.step==2?(g(),h("button",{key:2,class:"mt-2 bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",onClick:e[7]||(e[7]=l=>n.submit())},"Generate")):_("",!0)])])]),_:1})}const Gt=ie(st,[["render",Mt]]);export{Gt as default};
