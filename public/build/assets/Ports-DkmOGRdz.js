import{A as U}from"./AppLayout-CdKr8ESd.js";import{P as M}from"./Pagination-BbMbld6b.js";import{_ as A}from"./PrimaryButton-BEIxgWRN.js";import{_ as B}from"./DialogModal-C5TAOXFy.js";import{_ as J}from"./SecondaryButton-Qmgu-F69.js";import{_ as F}from"./DangerButton-C6J6TvKY.js";import{_ as I,a as K}from"./TextInput-N961zbMb.js";import{_ as z}from"./ConfirmationModal-BaL1oS__.js";import{T as E,r as P,s as _,d,b as f,w as u,F as T,N as H,o as p,a as o,e as c,k as y,x,K as q,f as g,g as G,t as m}from"./app-BlA7PXUo.js";import{M as Q}from"./vue3-multiselect.umd.min-BmnbD0fr.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-Zok9paaL.js";const W={name:"ports",components:{AppLayout:U,Pagination:M,JetButton:A,JetDialogModal:B,JetSecondaryButton:J,JetDangerButton:F,JetConfirmationModal:z,JetInput:I,JetInputError:K,useForm:E,Multiselect:Q},props:{dns_all:Object,sns:Object,overall:Object,pops:Object,errors:Object},setup(n){let e=P(null),a=P(!1),t=P(""),h=P(!1);const k=E({general:null,pop:null}),s=E({id:null,dn_id:null,dn:null,name:null,description:null,location:null,input_dbm:null,pop:null,pop_device_id:null,gpon_frame:null,gpon_slot:null,gpon_port:null,tab:1});function D(l){e.value=l}function v(){s.id=null,s.name=null,s.dn=null,s.description=null,s.location=null,s.input_dbm=null,s.pop=null,s.pop_device_id=null,s.gpon_frame=null,s.gpon_slot=null,s.gpon_port=null}function w(l){let i=n.pops.filter(b=>b.id==l)[0];if(i)return i.site_name}const N=async l=>{try{const i=await S(l.id);return i&&!O(i)?(t.value=i,s.pop_device_id=null,s.gpon_frame=null,s.gpon_slot=null,s.gpon_port=null):(t.value=null,s.pop_device_id=null,s.gpon_frame=null,s.gpon_slot=null,s.gpon_port=null),!0}catch(i){return console.error("Error in POPSelect:",i),!1}},S=async l=>{const i="/getOLTByPOP/"+l;try{const b=await fetch(i);if(!b.ok)throw new Error(`HTTP error! Status: ${b.status}`);return await b.json()}catch(b){return console.error("Error fetching OLT:",b),null}};function O(l){return Array.isArray(l)?(console.log("array"),l.length===0?(console.log("empty array"),!0):l.every(i=>typeof i=="object"&&Object.keys(i).length===0)):l&&typeof l=="object"?Object.keys(l).length===0:!1}async function j(l){s.id=l.id,s.name=l.name,s.description=l.description,s.location=l.location,s.input_dbm=l.input_dbm,s.pop=l.pop?n.pops.filter(i=>i.id==l.pop)[0]:null,s.pop&&await N(s.pop)&&(console.log("POP Devices Value:",t.value),s.pop_device_id=l.pop_device_id?t.value.find(b=>b.id===l.pop_device_id):null),s.gpon_frame=l.gpon_frame,s.gpon_slot=l.gpon_slot,s.gpon_port=l.gpon_port,a.value=!0,h.value=!0}function r(){h.value?(s._method="PUT",s.put("/port/"+s.id,{preserveState:!0,onSuccess:l=>{a.value=!1,v(),Toast.fire({icon:"success",title:l.props.flash.message})},onError:l=>{console.log("error ..".errors)}})):(s._method="POST",s.post(route("port.store"),{preserveState:!0,onSuccess:l=>{a.value=!1,v(),Toast.fire({icon:"success",title:l.props.flash.message})},onError:l=>{console.log("error ..".errors)}}))}function C(){a.value=!1,v()}function V(){k._method="POST",k.post(route("port.search"),{onSuccess:l=>{},onError:l=>{console.log(l)}})}function L(){let l=Object({});l.id=e.value,l._method="DELETE",H.post("/port/"+l.id,l,{preserveScroll:!0,preserveState:!0,onSuccess:i=>{e.value=!1,Toast.fire({icon:"success",title:i.props.flash.message})},onError:i=>{showSN.value=!1,console.log("error ..".errors)}})}return{dn_id:e,saveDN:r,editDN:j,cancelDN:C,showDN:a,form:s,editMode:h,deleteNode:L,confirmDelete:D,searchPort:V,search:k,getPOPName:w,pop_devices:t,POPSelect:N}}},X={class:"py-2"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Z={class:"flex justify-between space-x-2 items-end mb-2 px-1 md:px-0"},$={class:"relative flex flex-wrap z-0"},ee={key:0},oe={class:"ml-4"},te={class:"ml-4"},se={class:"col-1"},le={key:0,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},re={class:"min-w-full divide-y divide-gray-200 table-auto"},ne={class:"bg-white divide-y divide-gray-200"},ie={class:"px-6 py-3 font-medium"},ae={class:"px-6 py-3 font-medium"},de={class:"px-6 py-3 font-medium"},pe={class:"px-6 py-3 font-medium"},me={class:"px-6 py-3 font-medium"},ce={class:"px-6 py-3 font-medium"},ue={class:"px-6 py-3 font-medium"},fe={class:"px-6 py-3 font-medium text-right"},ge=["onClick"],be=["onClick"],_e={key:1,class:"w-full block mt-4"},ye={class:"text-xs text-gray-600"},xe={key:2},ve={key:0,class:"text-red-500"},he={class:"mt-4 text-sm"},ke={class:"mb-4 md:col-span-1"},we={key:0,class:"text-red-500"},Ne={key:0,class:"mb-4 md:col-span-1"},Pe={key:1,class:"mb-4 md:col-span-1"},De={class:"mb-4 md:col-span-1"},Se={class:"grid grid-cols-3 gap-2"},Oe={class:"col-span-1"},je={key:0,class:"text-red-500"},Ce={class:"col-span-1"},Ve={key:0,class:"text-red-500"},Ee={class:"col-span-1"},Te={key:0,class:"text-red-500"},Le={class:"mb-4 md:col-span-1"},Ue={key:0,class:"text-red-500"},Me={class:"mb-4 md:col-span-1"},Ae={key:0,class:"text-red-500"},Be={class:"mb-4 md:col-span-1"},Je={key:0,class:"text-red-500"};function Fe(n,e,a,t,h,k){const s=_("multiselect"),D=_("pagination"),v=_("app-layout"),w=_("jet-secondary-button"),N=_("jet-danger-button"),S=_("jet-confirmation-modal"),O=_("jet-button"),j=_("jet-dialog-modal");return p(),d(T,null,[f(v,null,{header:u(()=>e[17]||(e[17]=[o("h2",{class:"font-semibold text-xl text-white leading-tight"},"DN Setup",-1)])),default:u(()=>[o("div",X,[o("div",Y,[o("div",Z,[o("div",$,[a.pops.length!==0?(p(),d("div",ee,[f(s,{"deselect-label":"Selected already",options:a.pops,"track-by":"id",label:"site_name",modelValue:t.search.pop,"onUpdate:modelValue":e[0]||(e[0]=r=>t.search.pop=r),"allow-empty":!0,multiple:!0,placeholder:"Select Multiple POP site",class:"multi rounded-md shadow-sm text-sm border-0 placeholder-gray-300 text-gray-600"},null,8,["options","modelValue"])])):c("",!0),o("div",oe,[e[18]||(e[18]=o("span",{class:"z-10 h-full leading-snug font-normal ÃŸ text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[o("i",{class:"fas fa-search"})],-1)),y(o("input",{type:"text",placeholder:"Search here...",class:"border-0 p-3 placeholder-gray-300 text-gray-600 relative bg-white rounded text-sm shadow outline-none focus:outline-none focus:ring-0 w-full pl-10",id:"search","onUpdate:modelValue":e[1]||(e[1]=r=>t.search.general=r),onKeyup:e[2]||(e[2]=q((...r)=>t.searchPort&&t.searchPort(...r),["enter"]))},null,544),[[x,t.search.general]])]),o("div",te,[o("button",{onClick:e[3]||(e[3]=(...r)=>t.searchPort&&t.searchPort(...r)),class:"inline-flex items-center px-4 py-3 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},e[19]||(e[19]=[g("Search "),o("i",{class:"fa fas fa-search text-white ml-2"},null,-1)]))])]),o("button",{onClick:e[4]||(e[4]=()=>{t.showDN=!0,t.editMode=!1}),class:"inline-flex items-center px-4 py-3 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},e[20]||(e[20]=[g("Create "),o("i",{class:"fa fa-solid fa-circle-plus ml-2"},null,-1)]))]),o("div",se,[a.overall.data?(p(),d("div",le,[o("table",re,[e[22]||(e[22]=o("thead",{class:"bg-gray-50"},[o("tr",{class:"text-left"},[o("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"No."),o("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"DN Name"),o("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"POP Name"),o("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"Total SN"),o("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"Description"),o("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"Location"),o("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"Input dbm"),o("th",{scope:"col",class:"relative px-6 py-3"},[o("span",{class:"sr-only"},"Action")])])],-1)),o("tbody",ne,[(p(!0),d(T,null,G(a.overall.data,(r,C)=>(p(),d("tr",{key:r.id},[o("td",ie,m(a.overall.from+C),1),o("td",ae,m(r.name),1),o("td",de,m(t.getPOPName(r.pop)),1),o("td",pe,m(r.ports),1),o("td",me,m(r.description),1),o("td",ce,m(r.location),1),o("td",ue,m(r.input_dbm),1),o("td",fe,[o("a",{href:"#",onClick:V=>t.editDN(r),class:"text-indigo-600 hover:text-indigo-900"},"Edit",8,ge),e[21]||(e[21]=g(" | ")),o("a",{href:"#",onClick:V=>t.confirmDelete(r.id),class:"text-red-600 hover:text-red-900"},"Delete",8,be)])]))),128))])])])):c("",!0),a.overall.total?(p(),d("span",_e,[o("label",ye,m(a.overall.data.length)+" DN List in Current Page. Total Number of DNs : "+m(a.overall.total),1)])):c("",!0),a.overall.links?(p(),d("span",xe,[f(D,{class:"mt-6",links:a.overall.links},null,8,["links"])])):c("",!0)])])])]),_:1}),f(S,{show:t.dn_id,onClose:e[6]||(e[6]=r=>t.dn_id=null)},{title:u(()=>e[23]||(e[23]=[g(" Delete Node")])),content:u(()=>e[24]||(e[24]=[g(" Are you sure you would like to delete this DN ? It might effect to Customer Data ! ")])),footer:u(()=>[f(w,{onClick:e[5]||(e[5]=r=>t.dn_id=null)},{default:u(()=>e[25]||(e[25]=[g(" Cancel ")])),_:1}),f(N,{class:"ml-2",onClick:t.deleteNode},{default:u(()=>e[26]||(e[26]=[g(" Delete ")])),_:1},8,["onClick"])]),_:1},8,["show"]),f(j,{show:t.showDN,onClose:e[16]||(e[16]=r=>t.showDN=!1)},{title:u(()=>e[27]||(e[27]=[g(" Add New Port ")])),content:u(()=>[o("div",null,[n.$page.props.errors[0]?(p(),d("div",ve,m(n.$page.props.errors[0]),1)):c("",!0),o("div",he,[o("div",ke,[e[28]||(e[28]=o("label",{for:"name",class:"block text-gray-700 text-sm font-bold mb-2"},"DN Name :",-1)),y(o("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"name",placeholder:"Enter DN Name","onUpdate:modelValue":e[7]||(e[7]=r=>t.form.name=r)},null,512),[[x,t.form.name]]),n.$page.props.errors.name?(p(),d("div",we,m(n.$page.props.errors.name),1)):c("",!0)]),a.pops.length!==0?(p(),d("div",Ne,[e[29]||(e[29]=o("label",{for:"pop",class:"block text-gray-700 text-sm font-bold mb-2"},"POP Site :",-1)),f(s,{"deselect-label":"Selected already",options:a.pops,"track-by":"id",label:"site_name",modelValue:t.form.pop,"onUpdate:modelValue":e[8]||(e[8]=r=>t.form.pop=r),"allow-empty":!0,multiple:!1,searchable:!0,"prevent-autofocus":!0,"max-height":200,placeholder:"Select POP site",onSelect:t.POPSelect},null,8,["options","modelValue","onSelect"])])):c("",!0),t.pop_devices.length!==0?(p(),d("div",Pe,[e[30]||(e[30]=o("label",{for:"pop",class:"block text-gray-700 text-sm font-bold mb-2"},"OLT :",-1)),f(s,{"deselect-label":"Selected already",options:t.pop_devices,"track-by":"id",label:"device_name",modelValue:t.form.pop_device_id,"onUpdate:modelValue":e[9]||(e[9]=r=>t.form.pop_device_id=r),"allow-empty":!0},null,8,["options","modelValue"])])):c("",!0),o("div",De,[e[34]||(e[34]=o("label",{for:"location",class:"block text-gray-700 text-sm font-bold mb-2"},"OLT Port No. ",-1)),o("div",Se,[o("div",Oe,[e[31]||(e[31]=o("label",{for:"gpon_frame",class:"block text-gray-700 text-sm font-bold mb-2"},"Frame :",-1)),y(o("input",{type:"number",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"location",placeholder:"Enter Frame No.","onUpdate:modelValue":e[10]||(e[10]=r=>t.form.gpon_frame=r)},null,512),[[x,t.form.gpon_frame]]),n.$page.props.errors.gpon_frame?(p(),d("div",je,m(n.$page.props.errors.gpon_frame),1)):c("",!0)]),o("div",Ce,[e[32]||(e[32]=o("label",{for:"gpon_slot",class:"block text-gray-700 text-sm font-bold mb-2"},"Slot :",-1)),y(o("input",{type:"number",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"location",placeholder:"Enter Slot No.","onUpdate:modelValue":e[11]||(e[11]=r=>t.form.gpon_slot=r)},null,512),[[x,t.form.gpon_slot]]),n.$page.props.errors.gpon_slot?(p(),d("div",Ve,m(n.$page.props.errors.gpon_slot),1)):c("",!0)]),o("div",Ee,[e[33]||(e[33]=o("label",{for:"gpon_port",class:"block text-gray-700 text-sm font-bold mb-2"},"Port :",-1)),y(o("input",{type:"number",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"location",placeholder:"Enter Port No.","onUpdate:modelValue":e[12]||(e[12]=r=>t.form.gpon_port=r)},null,512),[[x,t.form.gpon_port]]),n.$page.props.errors.gpon_port?(p(),d("div",Te,m(n.$page.props.errors.gpon_port),1)):c("",!0)])])]),o("div",Le,[e[35]||(e[35]=o("label",{for:"description",class:"block text-gray-700 text-sm font-bold mb-2"},"Description :",-1)),y(o("textarea",{class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"description",placeholder:"Enter Description","onUpdate:modelValue":e[13]||(e[13]=r=>t.form.description=r)},null,512),[[x,t.form.description]]),n.$page.props.errors.description?(p(),d("div",Ue,m(n.$page.props.errors.description),1)):c("",!0)]),o("div",Me,[e[36]||(e[36]=o("label",{for:"location",class:"block text-gray-700 text-sm font-bold mb-2"},"DN Location :",-1)),y(o("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"location",placeholder:"Enter Location (Lat,Long)","onUpdate:modelValue":e[14]||(e[14]=r=>t.form.location=r)},null,512),[[x,t.form.location]]),n.$page.props.errors.location?(p(),d("div",Ae,m(n.$page.props.errors.location),1)):c("",!0)]),o("div",Be,[e[37]||(e[37]=o("label",{for:"input_dbm",class:"block text-gray-700 text-sm font-bold mb-2"},"DN Input dbm :",-1)),y(o("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"input_dbm",placeholder:"Enter Input Dbm","onUpdate:modelValue":e[15]||(e[15]=r=>t.form.input_dbm=r)},null,512),[[x,t.form.input_dbm]]),n.$page.props.errors.input_dbm?(p(),d("div",Je,m(n.$page.props.errors.input_dbm),1)):c("",!0)])])])]),footer:u(()=>[f(w,{onClick:t.cancelDN},{default:u(()=>e[38]||(e[38]=[g(" Close ")])),_:1},8,["onClick"]),f(O,{class:"ml-2",onClick:t.saveDN},{default:u(()=>e[39]||(e[39]=[g(" Save ")])),_:1},8,["onClick"])]),_:1},8,["show"])],64)}const eo=R(W,[["render",Fe]]);export{eo as default};
