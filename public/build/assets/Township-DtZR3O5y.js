import{A as E}from"./AppLayout-06ovi2Jk.js";import{P as V}from"./Pagination-LBr2dpyI.js";import{J as j,r as w,s as _,c as N,w as T,N as h,o as l,a as t,k as u,x as v,K as O,d as a,F as U,g as P,f as S,h as z,b as C,t as c,e as p,z as M}from"./app-uevufprU.js";import{M as A}from"./vue3-multiselect.umd.min-ChMt84xL.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-C_GraEJX.js";const D={name:"Township",components:{AppLayout:E,Multiselect:A,Pagination:V},props:{townships:Object,cities:Object,errors:Object},setup(d){const e=j({id:null,name:null,city_id:null,short_code:null}),i=w("");let s=w(!1),f=w(!1);function m(){e.name=null,e.city_id=null,e.short_code=null}function x(){s.value?(e._method="PUT",e._method="PUT",h.post("/township/"+e.id,e,{onSuccess:r=>{n(),m(),Toast.fire({icon:"success",title:r.props.flash.message})},onError:r=>{n(),console.log("error ..".errors)}})):(e._method="POST",h.post("/township",e,{preserveState:!0,onSuccess:r=>{n(),m(),Toast.fire({icon:"success",title:r.props.flash.message})},onError:r=>{n(),console.log("error ..".errors)}}))}function y(r){e.id=r.id,e.name=r.name,e.city_id=d.cities.filter(g=>g.id==r.city_id)[0],e.short_code=r.short_code,s.value=!0,o()}function b(r){confirm("Are you sure want to remove?")&&(r._method="DELETE",h.post("/township/"+r.id,r,{preserveState:!0,onSuccess:g=>{n(),m(),Toast.fire({icon:"success",title:g.props.flash.message})},onError:g=>{n(),console.log("error ..".errors)}}),n(),m())}function o(){f.value=!0}const n=()=>{f.value=!1,m(),s.value=!1};return{form:e,submit:x,editMode:s,isOpen:f,openModal:o,closeModal:n,edit:y,deleteRow:b,searchTsp:()=>{console.log("search value is"+i.value),h.get("/township/",{township:i.value},{preserveState:!0})},search:i}}},F={class:"py-2"},K={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},L={class:"flex justify-between space-x-2 items-end mb-2 px-1 md:px-0"},R={class:"relative flex flex-wrap z-0"},J={key:0,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},q={class:"min-w-full divide-y divide-gray-200"},G={class:"bg-white divide-y divide-gray-200"},H={class:"px-6 py-3 whitespace-nowrap"},I={class:"px-6 py-3 whitespace-nowrap"},Q={class:"px-6 py-3 whitespace-nowrap"},W={class:"px-6 py-3 whitespace-nowrap"},X={class:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium"},Y=["onClick"],Z=["onClick"],$={key:0,ref:"isOpen",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},ee={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},te={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},se={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},oe={class:""},re={key:0,class:"mb-4"},ie={key:0,class:"text-red-500"},ne={class:"mb-4"},le={key:0,class:"text-red-500"},ae={class:"mb-4"},de={key:0,class:"text-red-500"},ce={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},pe={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},me={"wire:click.prevent":"submit",type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},ue={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},fe={"wire:click.prevent":"submit",type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},ge={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},he={key:1};function xe(d,e,i,s,f,m){const x=_("multiselect"),y=_("pagination"),b=_("app-layout");return l(),N(b,null,{header:T(()=>e[8]||(e[8]=[t("h2",{class:"font-semibold text-xl text-white leading-tight"}," Township Setup ",-1)])),default:T(()=>[t("div",F,[t("div",K,[t("div",L,[t("div",R,[e[9]||(e[9]=t("span",{class:"z-10 h-full leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[t("i",{class:"fas fa-search"})],-1)),u(t("input",{type:"text",placeholder:"Search here...",class:"border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded text-sm shadow outline-none focus:outline-none focus:ring w-full pl-10",id:"search","onUpdate:modelValue":e[0]||(e[0]=o=>s.search=o),onKeyup:e[1]||(e[1]=O((...o)=>s.searchTsp&&s.searchTsp(...o),["enter"]))},null,544),[[v,s.search]])]),t("button",{onClick:e[2]||(e[2]=(...o)=>s.openModal&&s.openModal(...o)),class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"}," Create")]),i.townships.data?(l(),a("div",J,[t("table",q,[e[11]||(e[11]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," No. "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," City "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Township"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Short Code"),t("th",{scope:"col",class:"relative px-6 py-3"},[t("span",{class:"sr-only"},"Action")])])],-1)),t("tbody",G,[(l(!0),a(U,null,P(i.townships.data,(o,n)=>(l(),a("tr",{key:o.id},[t("td",H,c(i.townships.from+n),1),t("td",I,c(o.city_name),1),t("td",Q,c(o.name),1),t("td",W,c(o.short_code),1),t("td",X,[t("a",{href:"#",onClick:k=>s.edit(o),class:"text-indigo-600 hover:text-indigo-900"},"Edit",8,Y),e[10]||(e[10]=S(" | ")),t("a",{href:"#",onClick:k=>s.deleteRow(o),class:"text-red-600 hover:text-red-900"},"Delete",8,Z)])]))),128))])]),s.isOpen?(l(),a("div",$,[t("div",ee,[e[15]||(e[15]=t("div",{class:"fixed inset-0 transition-opacity"},[t("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),e[16]||(e[16]=t("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1)),e[17]||(e[17]=S("â€‹ ")),t("div",te,[t("form",{onSubmit:e[7]||(e[7]=z((...o)=>s.submit&&s.submit(...o),["prevent"]))},[t("div",se,[t("div",oe,[i.cities.length!==0?(l(),a("div",re,[e[12]||(e[12]=t("label",{for:"city",class:"block text-gray-700 text-sm font-bold mb-2"},"City:",-1)),C(x,{"deselect-label":"Selected already",options:i.cities,"track-by":"id",label:"name",modelValue:s.form.city_id,"onUpdate:modelValue":e[3]||(e[3]=o=>s.form.city_id=o),"allow-empty":!0},null,8,["options","modelValue"]),d.$page.props.errors.city_id?(l(),a("div",ie,c(d.$page.props.errors.city_id[0]),1)):p("",!0)])):p("",!0),t("div",ne,[e[13]||(e[13]=t("label",{for:"township",class:"block text-gray-700 text-sm font-bold mb-2"},"Township:",-1)),u(t("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"township",placeholder:"Enter Township","onUpdate:modelValue":e[4]||(e[4]=o=>s.form.name=o)},null,512),[[v,s.form.name]]),d.$page.props.errors.name?(l(),a("div",le,c(d.$page.props.errors.name[0]),1)):p("",!0)]),t("div",ae,[e[14]||(e[14]=t("label",{for:"short_code",class:"block text-gray-700 text-sm font-bold mb-2"},"Short Code:",-1)),u(t("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"short_code",placeholder:"Enter Short Code","onUpdate:modelValue":e[5]||(e[5]=o=>s.form.short_code=o)},null,512),[[v,s.form.short_code]]),d.$page.props.errors.short_code?(l(),a("div",de,c(d.$page.props.errors.short_code[0]),1)):p("",!0)])])]),t("div",ce,[t("span",pe,[u(t("button",me," Save ",512),[[M,!s.editMode]])]),t("span",ue,[u(t("button",fe," Update ",512),[[M,s.editMode]])]),t("span",ge,[t("button",{onClick:e[6]||(e[6]=(...o)=>s.closeModal&&s.closeModal(...o)),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"}," Cancel ")])])],32)])])],512)):p("",!0)])):p("",!0),i.townships.links?(l(),a("span",he,[C(y,{class:"mt-6",links:i.townships.links},null,8,["links"])])):p("",!0)])])]),_:1})}const Te=B(D,[["render",xe]]);export{Te as default};
