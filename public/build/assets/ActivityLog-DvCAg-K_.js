import{A as C}from"./AppLayout-BMX6eFWw.js";import{P as D}from"./Pagination-LrObDB0A.js";import{r as u,T as F,s as x,c as M,w as v,N as P,o as a,a as e,k as N,x as A,b as y,f as k,d as l,F as f,g as w,e as c,t as i}from"./app-DWo2jdOY.js";import{M as S}from"./vue3-multiselect.umd.min-DFBmObM0.js";import{V as j}from"./main-BqtCXqcd.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-DnPzcQCc.js";const T={name:"ActivityLog",components:{AppLayout:C,Multiselect:S,VueDatePicker:j,Pagination:D},props:{activities:Object,errors:Object},setup(R){let t=u(!1),n=u(["Customer Created","Customer updated","Bill Receipt","Invoice updated","Receipt Reset"]);const o=u({date:"YYYY-MM-DD",month:"MMM"});function h(m){t.value=t.value===m?null:m}const d=F({general:null,option:null,dateRange:""});function p(){P.post("/activity-log",d,{preserveState:!0})}return{expandedRow:t,toggleDetails:h,searchForm:d,options:n,searchPort:p,resetSearch:()=>{d.reset(),p()},formatter:o}}},L={class:"py-2"},O={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Y={class:"grid grid-cols-1 md:grid-cols-5 gap-2 w-full"},z={class:"col-span-1 sm:col-span-1"},G={class:"mt-1 flex rounded-md"},U={class:"col-span-1 sm:col-span-1"},E={class:"mt-1 z-10"},I={class:"col-span-1 sm:col-span-2"},q={class:"mt-1 text-xs"},H={class:"col-span-1 sm:col-span-1 flex self-end mb-1"},J={key:0,class:"bg-white overflow-auto shadow-xl sm:rounded-lg"},K={class:"min-w-full divide-y divide-gray-200"},Q={class:"bg-white divide-y divide-gray-200"},W={class:"px-6 py-2 text-sm whitespace-nowrap"},X={class:"px-6 py-2 text-sm whitespace-nowrap"},Z={class:"px-6 py-2 text-sm whitespace-nowrap"},$={class:"px-6 py-2 text-sm whitespace-nowrap"},ee={class:"px-6 py-2 text-sm whitespace-nowrap"},te=["onClick"],se={key:0},oe={key:0},ae={key:1},le={key:0,class:"bg-indigo-100 text-gray-800"},ne={class:"px-6 text-sm capitalize"},ie={class:"px-6 text-sm"},re={class:"px-6 text-sm",colspan:"3"},ce={key:1};function de(R,t,n,o,h,d){const p=x("multiselect"),b=x("VueDatePicker"),m=x("pagination"),V=x("app-layout");return a(),M(V,null,{header:v(()=>t[5]||(t[5]=[e("h2",{class:"font-semibold text-xl text-white leading-tight"}," Activity Log ",-1)])),default:v(()=>[e("div",L,[e("div",O,[e("div",Y,[e("div",z,[t[7]||(t[7]=e("label",{for:"sh_general",class:"block text-sm font-medium text-gray-700"},"General ",-1)),e("div",G,[t[6]||(t[6]=e("span",{class:"z-0 leading-snug font-normal text-center text-blueGray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-2"},[e("i",{class:"fas fa-user"})],-1)),N(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>o.searchForm.general=s),name:"sh_general",id:"sh_general",class:"pl-10 py-2 focus:ring-0 flex-1 block w-full rounded-md sm:text-sm border-gray-200 text-gray-600",placeholder:"General",tabindex:"1"},null,512),[[A,o.searchForm.general]])])]),e("div",U,[t[8]||(t[8]=e("label",{for:"sh_dn",class:"block text-sm font-medium text-gray-700"},"Type ",-1)),e("div",E,[y(p,{"deselect-label":"Selected already",options:o.options,modelValue:o.searchForm.option,"onUpdate:modelValue":t[1]||(t[1]=s=>o.searchForm.option=s),"allow-empty":!0,placeholder:"Please Choose Type"},null,8,["options","modelValue"])])]),e("div",I,[t[9]||(t[9]=e("label",{for:"dateRange",class:"block text-sm font-medium text-gray-700"},"Date Range ",-1)),e("div",q,[y(b,{modelValue:o.searchForm.dateRange,"onUpdate:modelValue":t[2]||(t[2]=s=>o.searchForm.dateRange=s),range:{partialRange:!1},placeholder:"Please choose Date Range","enable-time-picker":!1,"model-type":"yyyy-MM-dd",id:"dateRange",class:"text-gray-400 text-sm focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none"},null,8,["modelValue"])])]),e("div",H,[e("a",{onClick:t[3]||(t[3]=(...s)=>o.searchPort&&o.searchPort(...s)),class:"cursor-pointer inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},t[10]||(t[10]=[k("Search "),e("i",{class:"ml-1 fa fa-search text-white",tabindex:"6"},null,-1)])),e("a",{onClick:t[4]||(t[4]=(...s)=>o.resetSearch&&o.resetSearch(...s)),class:"ml-2 cursor-pointer inline-flex items-center px-4 py-2 bg-yellow-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-700 active:bg-yellow-900 focus:outline-none focus:border-yellow-900 focus:ring focus:ring-yellow-300 disabled:opacity-25 transition"},t[11]||(t[11]=[k("Reset "),e("i",{class:"ml-1 fa fa-eraser text-white",tabindex:"7"},null,-1)]))])]),n.activities.data?(a(),l("div",J,[e("table",K,[t[15]||(t[15]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," No. "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Activity"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Change By"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," #")])],-1)),e("tbody",Q,[(a(!0),l(f,null,w(n.activities.data,(s,r)=>(a(),l(f,{key:s.id},[e("tr",null,[e("td",W,i(n.activities.from+r),1),e("td",X,i(s.description),1),e("td",Z,i(s.causer),1),e("td",$,i(s.date),1),e("td",ee,[e("a",{href:"#",onClick:g=>o.toggleDetails(r),class:"ml-2"},[Object.keys(s.changes).length>0?(a(),l("span",se,[o.expandedRow===r?(a(),l("span",oe,t[12]||(t[12]=[e("i",{class:"fa fa-circle-chevron-down text-indigo-400"},null,-1)]))):(a(),l("span",ae,t[13]||(t[13]=[e("i",{class:"fa fa-circle-chevron-right text-gray-400"},null,-1)])))])):c("",!0)],8,te)])]),Object.keys(s.changes).length>0&&o.expandedRow===r?(a(),l("tr",le,t[14]||(t[14]=[e("th",{class:"px-6 text-sm text-left",scope:"col"},"Field",-1),e("th",{class:"px-6 text-sm text-left",scope:"col"},"From",-1),e("th",{class:"px-6 text-sm text-left",scope:"col",colspan:"3"},"To",-1)]))):c("",!0),Object.keys(s.changes).length>0&&o.expandedRow===r?(a(!0),l(f,{key:1},w(s.changes,(g,_)=>(a(),l("tr",{key:_,class:"bg-indigo-50 text-gray-600"},[e("td",ne,i(_.replace("_"," ")),1),e("td",ie,i(g.from??"N/A"),1),e("td",re,i(g.to??"N/A"),1)]))),128)):c("",!0)],64))),128))])])])):c("",!0),n.activities.links?(a(),l("span",ce,[y(m,{class:"mt-6",links:n.activities.links},null,8,["links"])])):c("",!0)])])]),_:1})}const he=B(T,[["render",de]]);export{he as default};
