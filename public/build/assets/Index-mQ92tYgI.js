import{o as l,d as a,a as t,t as m,p as K,i as Q,r as x,T as j,q as W,s as _,c as A,w as U,N as y,e as f,b as S,f as g,k as p,x as h,v as V,F as X,g as Z}from"./app-CwXgj7O2.js";import{A as $}from"./AppLayout-BByj_v5h.js";import{P as ee}from"./Pagination-CHg2DJW_.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as te}from"./main-CDr1BHpQ.js";import"./DropdownLink-Dsobse8H.js";const se={name:"SmsGenerationProgress",emits:["dismiss"],props:{progress:Number},setup(i,e){function n(){e.emit("dismiss",!0)}return{dismiss:n}}},oe={id:"toast-simple",class:"fixed top-5 right-5 flex items-center w-full max-w-xs p-4 space-x-4 rtl:space-x-reverse text-gray-500 bg-white divide-x rtl:divide-x-reverse divide-gray-100 rounded-lg shadow dark:text-gray-400 dark:divide-gray-700 space-x dark:bg-gray-800 z-20",role:"alert"},re={class:"relative w-full p-2"},ne={key:0,class:"text-xs"},ie={key:1,class:"text-xs"},le={class:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-lightBlue-200"};function de(i,e,n,s,b,B){return l(),a("div",oe,[e[3]||(e[3]=t("i",{class:"fa fas fa-3x fa-location-arrow text-lightBlue-400","aria-hidden":"true"},null,-1)),t("div",re,[e[2]||(e[2]=t("h4",{class:"text-xs font-extrabold"},"Bill Reminder",-1)),n.progress!=100?(l(),a("label",ne,"Sending SMS in "+m(n.progress)+"% ",1)):(l(),a("label",ie,"Sending SMS Completed ! ")),t("div",le,[t("div",{style:K(`width: ${n.progress}%`),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-lightBlue-500"},null,4)]),t("button",{type:"button",class:"absolute top-0 right-3 ms-auto -mx-1.5 -my-1.5 bg-white justify-center items-center flex-shrink-0 text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700","data-dismiss-target":"#toast-message-cta","aria-label":"Close",onClick:e[0]||(e[0]=w=>s.dismiss())},e[1]||(e[1]=[t("span",{class:"sr-only"},"Close",-1),t("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)]))])])}const ae=M(se,[["render",de]]),me={name:"Bill Reminder",components:{AppLayout:$,BillReminderProgress:ae,VueDatePicker:te,Link:Q,Pagination:ee},props:{customers:Array,smsgateway:Object,daysBeforeExpiry:Number,today:String,endDate:String},setup(i){const e=x([]),n=x(!1),s=x(!1),b=x(i.daysBeforeExpiry<1?i.daysBeforeExpiry:1),B=x(""),w=x(0),v=x(!1),u=j({id:null,ftth_id:null,customer_id:null,name:null,phone_1:null,service_off_date:null,reset_sms:!1}),c=x({id:"",name:"",phone:"",expiry_date:"",no_phone:!1}),E=()=>{y.get(route("bill-reminders.index"),{filter_id:c.value.id,filter_name:c.value.name,filter_phone:c.value.phone,filter_expiry:c.value.expiry_date,filter_no_phone:c.value.no_phone,days:b.value},{preserveState:!0,replace:!0})},N=()=>{c.value={id:"",name:"",phone:"",expiry_date:"",no_phone:!1},y.get(route("bill-reminders.index"),{days:b.value},{preserveState:!0,replace:!0})},D=r=>{u.id=r.id,u.ftth_id=r.ftth_id,u.customer_id=r.customer_id,u.name=r.name,u.phone_1=r.phone_1,u.service_off_date=r.service_off_date,u.reset_sms=!1,s.value=!0},T=()=>{u.put(route("bill-reminders.update",u.id),{onSuccess:r=>{Toast.fire({icon:"success",title:r.props.flash.message}),s.value=!1,u.reset()}})},o=()=>{s.value=!1,u.reset()},k=r=>{Toast.fire({title:"Delete Customer?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",position:"center",timer:1e4,toast:!1}).then(d=>{d.isConfirmed&&y.delete(route("bill-reminders.destroy",r.id),{onSuccess:P=>{Toast.fire({icon:"success",title:P.props.flash.message})}})})},C=j({customer_ids:[]}),L=()=>{n.value?e.value=i.customers.data.map(r=>r.id):e.value=[]},I=()=>{Toast.fire({title:"Generate List?",text:`Generate reminder list for customers expiring in ${b.value} days? This action will empty current list.`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, generate it!",position:"center",timer:1e4,toast:!1}).then(r=>{r.isConfirmed&&y.post(route("bill-reminders.create-reminder"),{expiration:B.value},{onSuccess:d=>{Toast.fire({icon:"success",title:d.props.flash.message})}})})},F=()=>{Toast.fire({title:"Empty List?",text:"This will remove all customers from the reminder list. Continue?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, empty it!",position:"center",timer:1e4,toast:!1}).then(r=>{r.isConfirmed&&y.post(route("bill-reminders.empty-reminder"),{},{onSuccess:d=>{Toast.fire({icon:"success",title:d.props.flash.message})}})})},Y=()=>{Toast.fire({title:"Are you sure you want to delete them?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete them!",cancelButtonText:"No, cancel!",position:"center",timer:1e4,toast:!1}).then(r=>{r.isConfirmed&&(C.customer_ids=e.value,C.post(route("bill-reminders.delete-selected"),{onSuccess:d=>{Toast.fire({icon:"success",title:d.props.flash.message}),n.value=!1,e.value=[]}}))})},z=()=>{Toast.fire({title:"Send Reminders?",text:"Send SMS reminders to selected customers?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, send reminders!",position:"center",timer:1e4,toast:!1}).then(r=>{r.isConfirmed&&(C.customer_ids=e.value,C.post(route("bill-reminders.send"),{preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:d=>{Toast.fire({icon:"success",title:d.props.flash.message,timer:200})}}))})},q=()=>{Toast.fire({title:"Send to All?",text:"Send SMS reminders to all customers?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, send to all!",position:"center",timer:1e4,toast:!1}).then(r=>{r.isConfirmed&&y.post(route("bill-reminders.send-all"),{},{replace:!0,preserveState:!0,preserveScroll:!0,onSuccess:d=>{Toast.fire({icon:"success",title:d.props.flash.message})}})})},G=()=>{y.visit(route("bill-reminders.upload-view"))},O=()=>{confirm("Are you sure you want to remove all customers without phone numbers from the reminder list?")&&y.post(route("bill-reminders.clear-no-phone"),{},{onSuccess:r=>{Toast.fire({icon:"success",title:r.props.flash.message})}})},H=()=>{axios.post(route("bill-reminders.download-excel"),{filter_id:c.value.id,filter_name:c.value.name,filter_phone:c.value.phone,filter_expiry:c.value.expiry_date,filter_no_phone:c.value.no_phone,days:b.value},{responseType:"blob"}).then(r=>{var d=document.createElement("a");document.body.appendChild(d),d.style="display: none";var P=new Blob([r.data],{type:r.headers["content-type"]});const R=document.createElement("a");R.href=window.URL.createObjectURL(P),R.download=`billreminder_${new Date().getTime()}.xlsx`,R.click()})},J=r=>{r&&(v.value=!r)};return W(()=>{window.Echo.channel("reminderprogressbar").listen(".remindersms",r=>{w.value=r.progress,typeof i.customers=="object"&&i.customers.data.map(function(d){if(d.id==r.id)return d.sms_status="sent"}),w.value>0&&(v.value=!0)})}),{days:b,editing:s,closeData:o,updateData:T,edit:D,deleteIt:k,deleteSelected:Y,selectedCustomers:e,selectAll:n,form:u,reminderForm:C,toggleSelectAll:L,createList:I,emptyList:F,sendAllReminder:q,sendReminders:z,downloadExcel:H,openUploadView:G,filters:c,applyFilters:E,resetFilters:N,clearNoPhoneCustomers:O,showSmsProgress:v,smsprogress:w,dismiss:J,expiration:B}}},ue={class:"py-12"},ce={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},fe={class:"bg-white shadow sm:rounded-lg py-4 px-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-7 gap-4 items-end"},pe={class:"col-span-1 sm:col-span-3"},ge={class:"flex items-center space-x-2"},xe={class:"flex-grow"},ye=["href"],be={class:"mt-2 bg-white shadow-sm sm:rounded-lg p-4 z-20"},he={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},we={class:"col-span-2"},ve={class:"flex items-center mt-6"},_e={class:"mt-4 flex justify-end"},ke={class:"mt-2 bg-white overflow-hidden shadow-sm sm:rounded-lg p-4"},Ce={key:0,class:"bg-green-50 border-l-4 border-green-400 p-4 mb-6"},Se={class:"flex"},Be={class:"flex-shrink-0"},De={class:"ml-3"},Te={class:"text-sm text-green-700"},Ve={key:1},Ee={class:"overflow-x-auto"},Ne={class:"min-w-full divide-y divide-gray-200"},Pe={class:"bg-gray-50"},Re={scope:"col",class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},je={class:"bg-white divide-y divide-gray-200 text-sm"},Ae={class:"px-2 py-2 whitespace-nowrap"},Ue=["value"],Me={class:"px-2 py-2 whitespace-nowrap"},Le={class:"px-2 py-2 whitespace-nowrap"},Ie={class:"px-2 py-2 whitespace-nowrap"},Fe={class:"px-2 py-2 whitespace-nowrap"},Ye={class:"px-2 py-2 whitespace-nowrap"},ze={class:"px-2 py-2 whitespace-nowrap"},qe={class:"px-2 py-2 whitespace-nowrap"},Ge={class:"px-2 py-2 whitespace-nowrap"},Oe=["onClick"],He=["onClick"],Je={class:"mt-6 flex gap-2"},Ke=["disabled"],Qe=["disabled"],We={class:"mt-2p-4"},Xe={key:0,class:"w-full block mt-4"},Ze={class:"text-xs text-gray-600"},$e={key:1},et={key:2,class:"bg-yellow-50 border-l-4 border-yellow-400 p-4"},tt={class:"flex"},st={class:"flex-shrink-0"},ot={class:"ml-3"},rt={class:"text-sm text-yellow-700"},nt={key:0,ref:"editing",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},it={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},lt={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-7xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},dt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 shadow sm:rounded-lg"},at={class:"md:grid"},mt={class:"mb-4 md:col-span-1"},ut={key:0,class:"text-red-500"},ct={key:1,class:"text-red-500"},ft={key:2,class:"text-red-500"},pt={key:3,class:"text-red-500"},gt={class:"mt-4 block text-gray-700 text-sm font-bold mb-2"},xt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},yt={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},bt={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"};function ht(i,e,n,s,b,B){const w=_("BillReminderProgress"),v=_("VueDatePicker"),u=_("CheckCircleIcon"),c=_("pagination"),E=_("ExclamationIcon"),N=_("app-layout");return l(),A(N,null,{header:U(()=>e[25]||(e[25]=[t("h2",{class:"font-semibold text-xl text-white leading-tight"},"Bill Reminder",-1)])),default:U(()=>{var D,T;return[t("div",ue,[s.showSmsProgress?(l(),A(w,{key:0,progress:s.smsprogress,onDismiss:s.dismiss},null,8,["progress","onDismiss"])):f("",!0),t("div",ce,[t("div",fe,[t("div",pe,[e[27]||(e[27]=t("label",{for:"days",class:"block text-sm font-medium text-gray-700"},"Days Before Service Expiry:",-1)),t("div",ge,[t("div",xe,[S(v,{modelValue:s.expiration,"onUpdate:modelValue":e[0]||(e[0]=o=>s.expiration=o),range:{partialRange:!1},placeholder:"Please choose Expiry Date","enable-time-picker":!1,"model-type":"yyyy-MM-dd",id:"order_date",class:"w-full text-gray-700 text-sm focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none"},null,8,["modelValue"])]),t("button",{onClick:e[1]||(e[1]=(...o)=>s.createList&&s.createList(...o)),class:"inline-flex cursor-pointer justify-center py-2.5 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 items-center"},e[26]||(e[26]=[g(" Generate "),t("i",{class:"ml-1 fa fa-list text-white"},null,-1)]))])]),t("button",{onClick:e[2]||(e[2]=(...o)=>s.emptyList&&s.emptyList(...o)),class:"col-span-1 inline-flex cursor-pointer justify-center py-2.5 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 items-center"},e[28]||(e[28]=[g(" Empty List"),t("i",{class:"ml-1 fa fa-trash text-white"},null,-1)])),t("button",{onClick:e[3]||(e[3]=(...o)=>s.downloadExcel&&s.downloadExcel(...o)),class:"col-span-1 inline-flex cursor-pointer justify-center py-2.5 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 items-center"},e[29]||(e[29]=[g(" Export "),t("i",{class:"ml-1 fa fa-download text-white"},null,-1)])),t("a",{href:i.route("bill-reminders.upload-view"),target:"_blank",class:"col-span-1 inline-flex cursor-pointer justify-center py-2.5 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 items-center"},e[30]||(e[30]=[g(" Import "),t("i",{class:"ml-1 fa fa-upload text-white"},null,-1)]),8,ye),n.smsgateway&&((D=n.smsgateway)==null?void 0:D.status)=="1"?(l(),a("button",{key:0,onClick:e[4]||(e[4]=(...o)=>s.sendAllReminder&&s.sendAllReminder(...o)),class:"col-span-1 inline-flex cursor-pointer justify-center py-2.5 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 items-center"},e[31]||(e[31]=[g(" Send All "),t("i",{class:"ml-2 fa fa-sms fa-xl text-white"},null,-1)]))):f("",!0)]),t("div",be,[e[37]||(e[37]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Filter Customers",-1)),t("div",he,[t("div",null,[e[32]||(e[32]=t("label",{for:"filter_id",class:"block text-sm font-medium text-gray-700"},"Customer ID",-1)),p(t("input",{type:"text",id:"filter_id","onUpdate:modelValue":e[5]||(e[5]=o=>s.filters.id=o),class:"mt-1 py-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Search by ID"},null,512),[[h,s.filters.id]])]),t("div",null,[e[33]||(e[33]=t("label",{for:"filter_name",class:"block text-sm font-medium text-gray-700"},"Customer Name",-1)),p(t("input",{type:"text",id:"filter_name","onUpdate:modelValue":e[6]||(e[6]=o=>s.filters.name=o),class:"mt-1 py-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Search by name"},null,512),[[h,s.filters.name]])]),t("div",null,[e[34]||(e[34]=t("label",{for:"filter_phone",class:"block text-sm font-medium text-gray-700"},"Phone Number",-1)),p(t("input",{type:"text",id:"filter_phone","onUpdate:modelValue":e[7]||(e[7]=o=>s.filters.phone=o),class:"mt-1 py-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Search by phone"},null,512),[[h,s.filters.phone]])]),t("div",we,[e[35]||(e[35]=t("label",{for:"filter_expiry",class:"block text-sm font-medium text-gray-700"},"Expiry Date",-1)),S(v,{modelValue:s.filters.expiry_date,"onUpdate:modelValue":e[8]||(e[8]=o=>s.filters.expiry_date=o),range:{partialRange:!1},placeholder:"Please choose Expiry Date","enable-time-picker":!1,"model-type":"yyyy-MM-dd",id:"filter_expiry",class:"mt-1 w-full z-100 text-gray-700 text-sm focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none"},null,8,["modelValue"])]),t("div",ve,[p(t("input",{type:"checkbox",id:"filter_no_phone","onUpdate:modelValue":e[9]||(e[9]=o=>s.filters.no_phone=o),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[V,s.filters.no_phone]]),e[36]||(e[36]=t("label",{for:"filter_no_phone",class:"ml-2 block text-sm text-gray-700"},"Show only customers without phone",-1))])]),t("div",_e,[t("button",{onClick:e[10]||(e[10]=(...o)=>s.clearNoPhoneCustomers&&s.clearNoPhoneCustomers(...o)),class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Clear No Phone Customer "),t("button",{onClick:e[11]||(e[11]=(...o)=>s.applyFilters&&s.applyFilters(...o)),class:"ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Apply Filters "),t("button",{onClick:e[12]||(e[12]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"ml-3 inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Reset ")])]),t("div",ke,[i.$page.props.flash.success?(l(),a("div",Ce,[t("div",Se,[t("div",Be,[S(u,{class:"h-5 w-5 text-green-400"})]),t("div",De,[t("p",Te,m(i.$page.props.flash.success),1)])])])):f("",!0),n.customers.data.length>0?(l(),a("div",Ve,[t("div",Ee,[t("table",Ne,[t("thead",Pe,[t("tr",null,[t("th",Re,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=o=>s.selectAll=o),onChange:e[14]||(e[14]=(...o)=>s.toggleSelectAll&&s.toggleSelectAll(...o)),class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,544),[[V,s.selectAll]])]),e[38]||(e[38]=t("th",{scope:"col",class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," No.",-1)),e[39]||(e[39]=t("th",{scope:"col",class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ID",-1)),e[40]||(e[40]=t("th",{scope:"col",class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name",-1)),e[41]||(e[41]=t("th",{scope:"col",class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Phone",-1)),e[42]||(e[42]=t("th",{scope:"col",class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Expiry",-1)),e[43]||(e[43]=t("th",{scope:"col",class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Days Remaining",-1)),e[44]||(e[44]=t("th",{scope:"col",class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," SMS Status",-1)),e[45]||(e[45]=t("th",{scope:"col",class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Action",-1))])]),t("tbody",je,[(l(!0),a(X,null,Z(n.customers.data,o=>(l(),a("tr",{key:o.id},[t("td",Ae,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=k=>s.selectedCustomers=k),value:o.id,class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,8,Ue),[[V,s.selectedCustomers]])]),t("td",Me,m(o.id),1),t("td",Le,m(o.ftth_id),1),t("td",Ie,m(o.name),1),t("td",Fe,m(o.phone_1),1),t("td",Ye,m(o.service_off_date),1),t("td",ze,m(o.days_remaining),1),t("td",qe,m(o.sms_status),1),t("td",Ge,[t("a",{href:"#",onClick:k=>s.edit(o),class:"text-yellow-600 hover:text-yellow-900"},e[46]||(e[46]=[t("i",{class:"fas fa-pen"},null,-1)]),8,Oe),e[48]||(e[48]=g(" | ")),t("a",{href:"#",onClick:k=>s.deleteIt(o),class:"text-red-600 hover:text-red-900"},e[47]||(e[47]=[t("i",{class:"fas fa-trash"},null,-1)]),8,He)])]))),128))])])]),t("div",Je,[t("a",{type:"button",onClick:e[16]||(e[16]=(...o)=>s.deleteSelected&&s.deleteSelected(...o)),class:"inline-flex cursor-pointer justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 items-center",disabled:s.selectedCustomers.length===0},e[49]||(e[49]=[g(" Delete Selected Customers "),t("i",{class:"ml-1 fa fa-trash"},null,-1)]),8,Ke),n.smsgateway&&((T=n.smsgateway)==null?void 0:T.status)=="1"?(l(),a("a",{key:0,type:"button",onClick:e[17]||(e[17]=(...o)=>s.sendReminders&&s.sendReminders(...o)),class:"inline-flex cursor-pointer justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 items-center",disabled:s.selectedCustomers.length===0},e[50]||(e[50]=[g(" Send Reminders to Selected Customers "),t("i",{class:"ml-2 fa fa-sms fa-xl"},null,-1)]),8,Qe)):f("",!0)])])):f("",!0)]),t("div",We,[n.customers.total?(l(),a("span",Xe,[t("label",Ze,m(n.customers.data.length)+" Customers in Current Page. Total Number of Customers : "+m(n.customers.total),1)])):f("",!0),n.customers.links?(l(),a("span",$e,[S(c,{class:"mt-4",links:n.customers.links},null,8,["links"])])):(l(),a("div",et,[t("div",tt,[t("div",st,[S(E,{class:"h-5 w-5 text-yellow-400"})]),t("div",ot,[t("p",rt," No customers found with service expiry within the next "+m(n.daysBeforeExpiry)+" days. ",1)])])]))]),s.editing?(l(),a("div",nt,[t("div",it,[e[58]||(e[58]=t("div",{class:"fixed inset-0 transition-opacity"},[t("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),e[59]||(e[59]=t("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},null,-1)),e[60]||(e[60]=g("​ ")),t("div",lt,[t("div",dt,[e[56]||(e[56]=t("h6",{class:"md:min-w-full text-indigo-700 text-sm uppercase font-bold block pt-1 no-underline"},"Edit Data ",-1)),e[57]||(e[57]=t("div",{class:"hidden sm:block","aria-hidden":"true"},[t("div",{class:"py-5"},[t("div",{class:"border-t border-gray-200"})])],-1)),t("div",at,[t("div",mt,[e[52]||(e[52]=t("label",{for:"ftth_id",class:"block text-gray-700 text-sm font-bold mb-2"},"Customer ID :",-1)),p(t("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"ftth_id",placeholder:"Enter Customer ID","onUpdate:modelValue":e[18]||(e[18]=o=>s.form.ftth_id=o)},null,512),[[h,s.form.ftth_id]]),i.$page.props.errors.name?(l(),a("div",ut,m(i.$page.props.errors.name),1)):f("",!0),e[53]||(e[53]=t("label",{for:"name",class:"mt-4 block text-gray-700 text-sm font-bold mb-2"},"Customer Name :",-1)),p(t("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"name",placeholder:"Enter Customer Name","onUpdate:modelValue":e[19]||(e[19]=o=>s.form.name=o)},null,512),[[h,s.form.name]]),i.$page.props.errors.name?(l(),a("div",ct,m(i.$page.props.errors.name),1)):f("",!0),e[54]||(e[54]=t("label",{for:"phone",class:"mt-4 block text-gray-700 text-sm font-bold mb-2"},"Contact No. :",-1)),p(t("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"phone",placeholder:"Enter Phone No.","onUpdate:modelValue":e[20]||(e[20]=o=>s.form.phone_1=o)},null,512),[[h,s.form.phone_1]]),i.$page.props.errors.phone_1?(l(),a("div",ft,m(i.$page.props.errors.phone_1),1)):f("",!0),e[55]||(e[55]=t("label",{for:"service_off_date",class:"mt-4 block text-gray-700 text-sm font-bold mb-2"},"Expiry Date. :",-1)),p(t("input",{type:"date",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"service_off_date","onUpdate:modelValue":e[21]||(e[21]=o=>s.form.service_off_date=o)},null,512),[[h,s.form.service_off_date]]),i.$page.props.errors.service_off_date?(l(),a("div",pt,m(i.$page.props.errors.service_off_date),1)):f("",!0),t("label",gt,[p(t("input",{class:"text-green-500 w-6 h-6 mr-2 focus:ring-green-400 focus:ring-opacity-25 border border-gray-300 rounded",type:"checkbox","onUpdate:modelValue":e[22]||(e[22]=o=>s.form.reset_sms=o)},null,512),[[V,s.form.reset_sms]]),e[51]||(e[51]=g(" Reset SMS "))])])])]),t("div",xt,[t("span",yt,[t("button",{onClick:e[23]||(e[23]=(...o)=>s.updateData&&s.updateData(...o)),type:"button",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},"Update")]),t("span",bt,[t("button",{onClick:e[24]||(e[24]=(...o)=>s.closeData&&s.closeData(...o)),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"},"Close")])])])])],512)):f("",!0)])])]}),_:1})}const Bt=M(me,[["render",ht]]);export{Bt as default};
