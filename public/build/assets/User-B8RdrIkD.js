import{A as j}from"./AppLayout-BByj_v5h.js";import{P as L}from"./Pagination-CHg2DJW_.js";import{J as O,r as x,s as U,c as A,w as C,N as h,o as n,a as s,k as p,x as f,K as D,d as i,F as E,g as M,f as P,h as R,t as a,e as d,n as z,A as B,v as K,z as T,b as q}from"./app-CwXgj7O2.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-Dsobse8H.js";const I={name:"Project",components:{AppLayout:j,Pagination:L},props:{users:Object,roles:Object,errors:Object},setup(l){const e=O({id:null,name:null,password:null,confirm_password:null,email:null,phone:null,role:null,disabled:!1}),m=x("");let o=x(!1),y=x(!1),w=x(""),g=x("indigo-500");function c(){e.name=null,e.password=null,e.confirm_password=null,e.email=null,e.phone=null,e.role=null,e.disabled=!1}function t(){e.password!=e.confirm_password?(console.log("incorrect psw"),w.value="Password does not match !",g.value="red-500"):(console.log("correct !"),w.value="",g.value="indigo-500")}function v(){o.value?(e._method="PUT",h.post("/user/"+e.id,e,{onSuccess:r=>{u(),c(),Toast.fire({icon:"success",title:r.props.flash.message})},onError:r=>{console.log("error ..".errors)}})):(e._method="POST",h.post("/user",e,{preserveState:!0,onSuccess:r=>{u(),c(),Toast.fire({icon:"success",title:r.props.flash.message})},onError:r=>{u(),console.log("error ..".errors)}}))}function _(r){e.id=r.id,e.name=r.name,e.email=r.email,e.phone=r.phone,e.role=r.role,e.disabled=r.disabled==1,o.value=!0,S()}function V(r){let b=l.roles.filter(k=>k.id==r).map(k=>k.name)[0];return console.log(b),b}function N(r){confirm("Are you sure want to remove?")&&(r._method="DELETE",h.post("/user/"+r.id,r,{preserveState:!0,onSuccess:b=>{u(),c(),Toast.fire({icon:"success",title:b.props.flash.message})},onError:b=>{u(),console.log("error ..".errors)}}),u(),c())}function S(){y.value=!0}const u=()=>{y.value=!1,c(),o.value=!1};return{form:e,psw_err:w,border:g,getRole:V,submit:v,checkPsw:t,editMode:o,isOpen:y,openModal:S,closeModal:u,edit:_,deleteRow:N,searchTsp:()=>{console.log("search value is"+m.value),h.get("/user/",{user:m.value},{preserveState:!0})},search:m}}},J={class:"py-2"},G={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},H={class:"flex justify-between space-x-2 items-end mb-2 px-1 md:px-0"},Q={class:"relative flex flex-wrap z-0"},W={key:0,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},X={class:"min-w-full divide-y divide-gray-200"},Y={class:"bg-white divide-y divide-gray-200"},Z={class:"px-6 py-3 whitespace-nowrap"},$={class:"px-6 py-3 whitespace-nowrap"},ee={class:"px-6 py-3 whitespace-nowrap"},se={class:"px-6 py-3 whitespace-nowrap"},oe={class:"px-6 py-3 whitespace-nowrap"},te={class:"px-6 py-3 whitespace-nowrap"},re={class:"px-6 py-3 whitespace-nowrap"},le={class:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium"},ne=["onClick"],ae=["onClick"],ie={key:0,ref:"isOpen",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},de={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},me={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},pe={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ce={class:""},ue={class:"mb-4"},fe={key:0,class:"mt-2 text-sm text-red-500"},ge={class:"mb-4"},be={key:0,class:"mt-2 text-sm text-red-500"},xe={class:"mb-4"},ye={key:0,class:"mt-2 text-sm text-red-500"},we={class:"mb-4"},he={key:0,class:"mt-2 text-sm text-red-500"},ve={class:"mb-4"},_e={key:0,class:"text-red-500"},ke={key:1,class:"mt-2 text-sm text-red-500"},Pe={class:"mb-4"},Se=["value"],Ue={key:0,class:"text-red-500"},Ce={class:"mb-4"},Ee={class:"inline-flex ml-2"},Me={key:0,class:"text-red-500"},Te={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ve={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},Ne={"wire:click.prevent":"submit",type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},je={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},Le={"wire:click.prevent":"submit",type:"submit",class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},Oe={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},Ae={key:1};function De(l,e,m,o,y,w){const g=U("pagination"),c=U("app-layout");return n(),A(c,null,{header:C(()=>e[13]||(e[13]=[s("h2",{class:"font-semibold text-xl text-white leading-tight"},"User Setup",-1)])),default:C(()=>[s("div",J,[s("div",G,[s("div",H,[s("div",Q,[e[14]||(e[14]=s("span",{class:"z-10 h-full leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[s("i",{class:"fas fa-search"})],-1)),p(s("input",{type:"text",placeholder:"Search here...",class:"border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded text-sm shadow outline-none focus:outline-none focus:ring w-full pl-10",id:"search","onUpdate:modelValue":e[0]||(e[0]=t=>o.search=t),onKeyup:e[1]||(e[1]=D((...t)=>o.searchTsp&&o.searchTsp(...t),["enter"]))},null,544),[[f,o.search]])]),s("button",{onClick:e[2]||(e[2]=(...t)=>o.openModal&&o.openModal(...t)),class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},"Create")]),m.users.data?(n(),i("div",W,[s("table",X,[e[16]||(e[16]=s("thead",{class:"bg-gray-50"},[s("tr",null,[s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," No. "),s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name "),s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Phone "),s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Role "),s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status"),s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Last Login IP"),s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Last Login Time"),s("th",{scope:"col",class:"relative px-6 py-3"},[s("span",{class:"sr-only"},"Action")])])],-1)),s("tbody",Y,[(n(!0),i(E,null,M(m.users.data,(t,v)=>(n(),i("tr",{key:t.id},[s("td",Z,a(v+m.users.from),1),s("td",$,a(t.name),1),s("td",ee,a(t.phone),1),s("td",se,a(o.getRole(t.role)),1),s("td",oe,a(t.disabled?"Disabled":"Enabled"),1),s("td",te,a(t.last_login_ip),1),s("td",re,a(t.last_login_time),1),s("td",le,[s("a",{href:"#",onClick:_=>o.edit(t),class:"text-indigo-600 hover:text-indigo-900"},"Edit",8,ne),e[15]||(e[15]=P(" | ")),s("a",{href:"#",onClick:_=>o.deleteRow(t),class:"text-red-600 hover:text-red-900"},"Delete",8,ae)])]))),128))])]),o.isOpen?(n(),i("div",ie,[s("div",de,[e[25]||(e[25]=s("div",{class:"fixed inset-0 transition-opacity"},[s("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),e[26]||(e[26]=P(" â€‹ ")),s("div",me,[s("form",{onSubmit:e[12]||(e[12]=R((...t)=>o.submit&&o.submit(...t),["prevent"]))},[s("div",pe,[s("div",ce,[s("div",ue,[e[17]||(e[17]=s("label",{for:"name",class:"block text-gray-700 text-sm font-bold mb-2"},"User Name:",-1)),p(s("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"name",placeholder:"Enter User Name","onUpdate:modelValue":e[3]||(e[3]=t=>o.form.name=t),required:""},null,512),[[f,o.form.name]]),l.$page.props.errors.name?(n(),i("p",fe,a(l.$page.props.errors.name),1)):d("",!0)]),s("div",ge,[e[18]||(e[18]=s("label",{for:"email",class:"block text-gray-700 text-sm font-bold mb-2"},"Email:",-1)),p(s("input",{type:"email",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"email",placeholder:"Enter Email Address","onUpdate:modelValue":e[4]||(e[4]=t=>o.form.email=t),required:""},null,512),[[f,o.form.email]]),l.$page.props.errors.email?(n(),i("p",be,a(l.$page.props.errors.email),1)):d("",!0)]),s("div",xe,[e[19]||(e[19]=s("label",{for:"phone",class:"block text-gray-700 text-sm font-bold mb-2"},"Phone Number:",-1)),p(s("input",{type:"tel",pattern:"^[0-9]{0,11}$",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"phone",placeholder:"09123456789","onUpdate:modelValue":e[5]||(e[5]=t=>o.form.phone=t),required:""},null,512),[[f,o.form.phone]]),l.$page.props.errors.phone?(n(),i("p",ye,a(l.$page.props.errors.phone),1)):d("",!0)]),s("div",we,[e[20]||(e[20]=s("label",{for:"password",class:"block text-gray-700 text-sm font-bold mb-2"},"Enter Password:",-1)),p(s("input",{type:"password",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"password",placeholder:"Enter Password","onUpdate:modelValue":e[6]||(e[6]=t=>o.form.password=t)},null,512),[[f,o.form.password]]),l.$page.props.errors.password?(n(),i("p",he,a(l.$page.props.errors.password),1)):d("",!0)]),s("div",ve,[e[21]||(e[21]=s("label",{for:"confirm_password",class:"block text-gray-700 text-sm font-bold mb-2"},"Confirm Password:",-1)),p(s("input",{type:"password",class:z("mt-1 focus:ring-"+o.border+" focus:border-"+o.border+" block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"),id:"confirm_password",placeholder:"Confirm the Password","onUpdate:modelValue":e[7]||(e[7]=t=>o.form.confirm_password=t),onKeyup:e[8]||(e[8]=(...t)=>o.checkPsw&&o.checkPsw(...t))},null,34),[[f,o.form.confirm_password]]),l.$page.props.errors.confirm_password?(n(),i("div",_e,a(l.$page.props.errors.confirm_password[0]),1)):d("",!0),o.psw_err?(n(),i("p",ke,a(o.psw_err),1)):d("",!0)]),s("div",Pe,[e[22]||(e[22]=s("label",{for:"role",class:"block text-gray-700 text-sm font-bold mb-2"},"User Role:",-1)),p(s("select",{name:"role",id:"role","onUpdate:modelValue":e[9]||(e[9]=t=>o.form.role=t),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[(n(!0),i(E,null,M(m.roles,t=>(n(),i("option",{key:t.id,value:t.id},a(t.name),9,Se))),128))],512),[[B,o.form.role]]),l.$page.props.errors.name?(n(),i("div",Ue,a(l.$page.props.errors.name[0]),1)):d("",!0)])]),s("div",Ce,[e[24]||(e[24]=s("label",{for:"disabled",class:"block text-gray-700 text-sm font-bold mb-2"},"User Status:",-1)),s("label",Ee,[p(s("input",{class:"text-indigo-500 w-6 h-6 mr-2 focus:ring-indigo-400 focus:ring-opacity-25 border border-gray-300 rounded",type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=t=>o.form.disabled=t)},null,512),[[K,o.form.disabled]]),e[23]||(e[23]=P(" Disabled "))]),l.$page.props.errors.disabled?(n(),i("div",Me,a(l.$page.props.errors.disabled[0]),1)):d("",!0)])]),s("div",Te,[s("span",Ve,[p(s("button",Ne,"Save",512),[[T,!o.editMode]])]),s("span",je,[p(s("button",Le,"Update",512),[[T,o.editMode]])]),s("span",Oe,[s("button",{onClick:e[11]||(e[11]=(...t)=>o.closeModal&&o.closeModal(...t)),type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"},"Cancel")])])],32)])])],512)):d("",!0)])):d("",!0),m.users.links?(n(),i("span",Ae,[q(g,{class:"mt-6",links:m.users.links},null,8,["links"])])):d("",!0)])])]),_:1})}const Ie=F(I,[["render",De],["__scopeId","data-v-192900e3"]]);export{Ie as default};
