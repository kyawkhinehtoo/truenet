import{A as pe,N as ue}from"./NoData-Mby_JjbX.js";import{_ as fe}from"./InputLabel-DNrYQTpr.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as k,q as J,o,d as l,a as e,O as se,F as A,g as G,e as r,t as c,C as R,T as ie,B as ne,s as I,k as y,x as _,b as N,A as z,N as L,J as ge,f as D,D as K,P as ye,c as B,w as xe,K as re,L as te,n as P,M as Q,z as be}from"./app-BIx_XIkX.js";import{M as oe}from"./vue3-multiselect.umd.min-CLVhFqDA.js";import{U as ve}from"./Upload--E8iv-fR.js";import{P as _e}from"./Pagination--TBkXYON.js";import{V as we}from"./main-DHw6S639.js";import"./DropdownLink-UTLE7GZo.js";const ke={components:{Label:fe},name:"IncidentAlert",emits:["show_edit"],setup(i,t){let f=k("Loading .."),s=k("Loading ..");const w=async()=>{let v="/incidentOverdue";console.log(v);try{return await(await fetch(v)).json()}catch(S){console.error(S)}},x=async()=>{let v="/incidentRemain";console.log(v);try{return await(await fetch(v)).json()}catch(S){console.error(S)}};function u(v){let S=v%3600/60,U=v%(24*3600)/3600,b=v/(24*3600),a=null;if(v>=86400){let C=b-Math.floor(b);b=b-C,C=C*24;let E=C-Math.floor(C);C=C-E,C!=0?a=b+" d, "+C+" hr":a=b+" d"}else if(v>1440){let C=U-Math.floor(U),E=U-C;C=Math.round(C*60),E!=0?a=E+" hr,"+C+" m":a=C+" m"}else a=Math.round(S)+" m";return a}function n(v){let S=2592e3;return S-v/100*S}function V(v){t.emit("show_edit",v)}function j(){w().then(v=>{f.value=v}),x().then(v=>{s.value=v})}return J(()=>{j()}),{bundle:f,remain:s,getList:j,getDay:u,percenttosecond:n,doEdit:V}}},he={class:"w-full flex justify-between text-sm px-2"},Ce={key:0},Te={class:"min-w-full divide-y divide-gray-200 mt-1 shadow-xl"},Se={class:"bg-white rounded-b-lg divide-y divide-gray-200 text-sm text-center max-h-80 overflow-auto block scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white w-full"},Ve=["onClick"],Ue={class:"px-2 py-2 whitespace-nowrap col-span-1"},je={class:"px-2 py-2 whitespace-nowrap col-span-1"},De={class:"px-2 py-2 whitespace-nowrap col-span-1"};function Me(i,t,f,s,w,x){return o(),l(A,null,[e("div",he,[t[2]||(t[2]=e("label",{class:"mt-5 uppercase text-md"}," Ticket Overdue Hours Chart",-1)),e("button",{onClick:t[0]||(t[0]=u=>s.getList()),class:"my-2 ml-2 align-right text-center items-center px-3 py-2 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[1]||(t[1]=[e("i",{class:"fas fa-sync opacity-75 text-sm"},null,-1)]))]),s.bundle?(o(),l("div",Ce,[t[4]||(t[4]=e("h2",{class:"m-2 uppercase text-md"},null,-1)),e("div",Te,[t[3]||(t[3]=se('<div class="bg-gray-50 text-center inline-grid grid-cols-4 gap-2rounded-t-lg w-full" data-v-11ba7e6d><div class="px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1" data-v-11ba7e6d>Ticket ID</div><div class="px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1" data-v-11ba7e6d>SLA Overdue</div><div class="px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1" data-v-11ba7e6d>Actual Hrs</div><div class="px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1" data-v-11ba7e6d>Based SLA</div></div>',1)),e("div",Se,[(o(!0),l(A,null,G(s.bundle,u=>(o(),l("div",{key:u.id,class:"cursor-pointer inline-grid grid-cols-4 gap-2 w-full"},[e("div",{class:"px-2 py-2 whitespace-nowrap col-span-1",onClick:n=>s.doEdit(u)},c(u.code),9,Ve),e("div",Ue,c(s.getDay(u.over)),1),e("div",je,c(s.getDay(u.diff)),1),e("div",De,c(u.percentage),1)]))),128))])])])):r("",!0)],64)}const Oe=W(ke,[["render",Me],["__scopeId","data-v-11ba7e6d"]]),Pe={name:"IncidentDetail",emits:["loading"],emits:["selected_id"],components:{Multiselect:oe},props:{errors:Object,data:Object,parentform:Object},setup(i,t){const f=R("noc"),s=R("team"),w=R("user"),x=R("incidents"),u=R("customers"),n=R("townships"),V=R("packages"),j=R("parent_form");let v=k(),S=k(!1),U=k(!1),b=k(null);const a=ie({id:null,code:null,priority:"normal",customer_id:null,incharge_id:s.filter(p=>p.id==w.id)[0],type:"default",topic:null,status:1,start_date:null,end_date:null,new_address:null,new_township:null,latitude:null,longitude:null,package_id:null,description:null,date:null,time:null,close_date:null,close_time:null,resolved_date:null,resolved_time:null});function C(){b.value=null,S.value=!1,a.id="",a.code="",a.priority="normal",a.customer_id="",a.incharge_id=s.filter(p=>p.id==w.id)[0],a.type="default",a.topic="",a.status=1,a.start_date="",a.end_date="",a.new_address="",a.new_township="",a.latitude="",a.longitude="",a.package_id="",a.description="",a.date="",a.time="",a.close_date="",a.close_time="",a.resolved_date="",a.resolved_time=""}function E(){S.value!=!0?(a._method="POST",L.post("/incident",a,{preserveState:!0,onSuccess:p=>{b.value=p.props.response.id;let T=x.data.filter(M=>M.id==b.value)[0];S.value=!0,t.emit("selected_id",b.value),t.emit("loading",!1),T!==void 0&&(console.log("response is : "+T),d(T)),Toast.fire({icon:"success",title:p.props.flash.message})},onError:p=>{t.emit("loading",!1),console.log("error ..")},onStart:p=>{t.emit("loading",!0)}})):(a._method="PUT",L.post("/incident/"+a.id,a,{onSuccess:p=>{Toast.fire({icon:"success",title:p.props.flash.message}),t.emit("loading",!1)},onError:p=>{t.emit("loading",!1),console.log("error .."+p)},onStart:p=>{t.emit("loading",!0)}}))}function d(p){let T=null;b.value=p.id,S.value=!0,p.location!=null&&(T=p.location.split(",",2),a.latitude=T[0],a.longitude=T[1]),a.id=p.id,a.code=p.code,a.priority=p.priority,a.customer_id=u.filter(M=>M.id==p.customer_id)[0],a.incharge_id=f.filter(M=>M.id==p.incharge_id)[0],a.type=p.type,a.topic=p.topic,a.status=p.status,a.start_date=p.start_date,a.end_date=p.end_date,a.new_address=p.new_address,a.new_township=n.filter(M=>M.id==p.new_township)[0],a.package_id=V.filter(M=>M.id==p.package_id)[0],a.description=p.description,a.date=p.date,a.time=p.time,a.close_date=p.close_date,a.close_time=p.close_time,a.resolved_date=p.resolved_date,a.resolved_time=p.resolved_time}function Y(p){S.value=!0,a.priority=p.priority}function $(p){let T="Open";return p==1?T="Open":p==2?T="Escalated":p==3?T="Closed":p==4?T="Deleted":p==5&&(T="Resolved"),T}function F(p){confirm("Are you sure want to remove?")&&(a._method="PUT",a.status=4,L.post("/incident/"+a.id,a,{onSuccess:T=>{Toast.fire({icon:"success",title:T.props.flash.message})},onError:T=>{console.log("error .."+T)}}))}const H=async()=>{let p="/getIncident/"+i.data;console.log(p);try{return t.emit("loading",!0),await(await fetch(p)).json()}catch(T){t.emit("loading",!1),console.error(T)}},g=()=>{H().then(p=>{v.value=p})};return J(()=>{console.log("Incident Detail - onMounted"),i.data&&(b.value=i.data,H().then(p=>{t.emit("loading",!1),p!==void 0?(console.log("appending response"),d(p),console.log("show parent form"),console.log(j),j&&Y(j)):console.log("not appending response")})),V.map(function(p){return p.item_data=`${p.speed} Mbps - ${p.name} - ${p.contract_period} Months`})}),ne(()=>{console.log("Incident Detail - onUpdated"),V.map(function(p){return p.item_data=`${p.speed} Mbps - ${p.name} - ${p.contract_period} Months`})}),{loading:U,getIncident:H,calculate:g,deleteIncident:F,doSubmit:E,getStatus:$,form:a,clearform:C,customers:u,team:s,townships:n,packages:V,openForm:Y,editMode:S,edit:d}}},Ie={class:"grid grid-cols-5 gap-2"},Ne={class:"py-2 col-span-2 sm:col-span-2"},Le={class:"mt-1 flex rounded-md shadow-sm"},Ae={key:0,class:"mt-2 text-sm text-red-500"},Ee={class:"py-2 col-span-2 sm:col-span-2"},ze={class:"mt-1 flex rounded-md shadow-sm"},Be={key:0,class:"mt-2 text-sm text-red-500"},Re={class:"py-2 col-span-4 sm:col-span-4"},Fe={key:0,class:"mt-1 flex rounded-md shadow-sm"},He={key:1,class:"mt-2 text-sm text-red-500"},Ye={class:"py-2 col-span-4 sm:col-span-4"},$e={key:0,class:"mt-1 flex rounded-md shadow-sm"},We={key:1,class:"mt-2 text-sm text-red-500"},Je={class:"py-2 col-span-4 sm:col-span-4"},Ke={class:"mt-1 flex"},Ge={key:0,class:"mt-2 text-sm text-red-500"},qe={key:0,class:"py-2 col-span-1 sm:col-span-1"},Qe={key:1,class:"py-2 col-span-4 sm:col-span-4"},Xe={class:"mt-1 flex"},Ze={key:0,class:"mt-2 text-sm text-red-500"},et={class:"py-2 col-span-4 sm:col-span-4"},tt={class:"mt-1 flex"},st={key:0,class:"mt-2 text-sm text-red-500"},ot={key:2,class:"py-2 col-span-1 sm:col-span-1"},lt={key:3,class:"py-2 col-span-2 sm:col-span-2"},rt={class:"mt-1 flex rounded-md shadow-sm"},it={key:0,class:"mt-2 text-sm text-red-500"},nt={key:4,class:"py-2 col-span-2 sm:col-span-2"},at={class:"mt-1 flex rounded-md shadow-sm"},dt={key:0,class:"mt-2 text-sm text-red-500"},ct={key:5,class:"py-2 col-span-1 sm:col-span-1"},mt={key:6,class:"py-2 col-span-2 sm:col-span-2"},pt={class:"mt-1 flex rounded-md shadow-sm"},ut={key:0,class:"mt-2 text-sm text-red-500"},ft={key:7,class:"py-2 col-span-2 sm:col-span-2"},gt={class:"mt-1 flex rounded-md shadow-sm"},yt={key:0,class:"mt-2 text-sm text-red-500"},xt={key:8,class:"py-2 col-span-1 sm:col-span-1"},bt={key:9,class:"py-2 col-span-4 sm:col-span-4"},vt={class:"grid grid-cols-2 gap-2"},_t={class:"col-span-1 sm:col-span-1"},wt={class:"mt-1 flex rounded-md shadow-sm"},kt={key:0,class:"mt-2 text-sm text-red-500"},ht={class:"col-span-1 sm:col-span-1"},Ct={class:"mt-1 flex rounded-md shadow-sm"},Tt={key:0,class:"mt-2 text-sm text-red-500"},St={key:10,class:"py-2 col-span-1 sm:col-span-1"},Vt={key:11,class:"py-2 col-span-4 sm:col-span-4"},Ut={class:"mt-1 flex rounded-md shadow-sm"},jt={key:0,class:"mt-2 text-sm text-red-500"},Dt={key:12,class:"py-2 col-span-1 sm:col-span-1"},Mt={key:13,class:"py-2 col-span-4 sm:col-span-4"},Ot={class:"mt-1 flex rounded-md shadow-sm"},Pt={key:0,class:"mt-2 text-sm text-red-500"},It={key:14,class:"py-2 col-span-1 sm:col-span-1"},Nt={key:15,class:"py-2 col-span-4 sm:col-span-4"},Lt={class:"mt-1 flex"},At={key:0,class:"mt-2 text-sm text-red-500"},Et={key:16,class:"py-2 col-span-1 sm:col-span-1"},zt={key:17,class:"py-2 col-span-4 sm:col-span-4"},Bt={key:0,class:"mt-1 flex rounded-md shadow-sm"},Rt={key:1,class:"mt-2 text-sm text-red-500"},Ft={key:18,class:"py-2 col-span-1 sm:col-span-1"},Ht={key:19,class:"py-2 col-span-4 sm:col-span-4"},Yt={class:"grid grid-cols-2 gap-2"},$t={class:"col-span-1 sm:col-span-1"},Wt={class:"mt-1 flex rounded-md shadow-sm"},Jt={key:0,class:"mt-2 text-sm text-red-500"},Kt={class:"col-span-1 sm:col-span-1"},Gt={class:"mt-1 flex rounded-md shadow-sm"},qt={key:0,class:"mt-2 text-sm text-red-500"},Qt={key:20,class:"py-2 col-span-1 sm:col-span-1"},Xt={key:21,class:"py-2 col-span-4 sm:col-span-4"},Zt={class:"mt-1 flex rounded-md shadow-sm"},es={key:0,class:"mt-2 text-sm text-red-500"},ts={key:22,class:"py-2 col-span-1 sm:col-span-1"},ss={key:23,class:"py-2 col-span-4 sm:col-span-4"},os={key:0,class:"mt-1 flex rounded-md shadow-sm"},ls={key:1,class:"mt-2 text-sm text-red-500"},rs={key:24,class:"py-2 col-span-1 sm:col-span-1"},is={key:25,class:"py-2 col-span-4 sm:col-span-4"},ns={class:"mt-1 flex rounded-md shadow-sm"},as={key:0,class:"mt-2 text-sm text-red-500"},ds={class:"py-2 col-span-4 sm:col-span-4"},cs={class:"mt-1 flex"},ms={key:0,class:"mt-2 text-sm text-red-500"},ps={key:0,class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function us(i,t,f,s,w,x){const u=I("multiselect");return o(),l(A,null,[e("div",Ie,[t[46]||(t[46]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"},"Incident Detail : ")])],-1)),e("div",Ne,[e("div",Le,[y(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=n=>s.form.date=n),name:"date",id:"date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.date]])]),i.$page.props.errors.date?(o(),l("p",Ae,c(i.$page.props.errors.date),1)):r("",!0)]),e("div",Ee,[e("div",ze,[y(e("input",{type:"time","onUpdate:modelValue":t[1]||(t[1]=n=>s.form.time=n),name:"time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.time]])]),i.$page.props.errors.time?(o(),l("p",Be,c(i.$page.props.errors.time),1)):r("",!0)]),t[47]||(t[47]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," User ID : ")])],-1)),e("div",Re,[s.customers.length!==0?(o(),l("div",Fe,[N(u,{"deselect-label":"Selected already",options:s.customers,"track-by":"id",label:"ftth_id",modelValue:s.form.customer_id,"onUpdate:modelValue":t[2]||(t[2]=n=>s.form.customer_id=n),"allow-empty":!1},null,8,["options","modelValue"])])):r("",!0),i.$page.props.errors.customer?(o(),l("p",He,c(i.$page.props.errors.customer),1)):r("",!0)]),t[48]||(t[48]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"incharge",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Person Incharge : ")])],-1)),e("div",Ye,[s.team.length!==0?(o(),l("div",$e,[N(u,{"deselect-label":"Selected already",options:s.team,"track-by":"id",label:"name",modelValue:s.form.incharge_id,"onUpdate:modelValue":t[3]||(t[3]=n=>s.form.incharge_id=n),"allow-empty":!1,disabled:!0},null,8,["options","modelValue"])])):r("",!0),i.$page.props.errors.incharge?(o(),l("p",We,c(i.$page.props.errors.incharge),1)):r("",!0)]),t[49]||(t[49]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"type",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Type : ")])],-1)),e("div",Je,[e("div",Ke,[y(e("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>s.form.type=n),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",required:""},t[23]||(t[23]=[se('<option value="default">Please Choose Ticket Type</option><option value="service_complaint">Service Complaint</option><option value="gaming_issue">Gaming Issue</option><option value="relocation">Relocation</option><option value="plan_change">Plan Change</option><option value="information_update">Information Update</option><option value="suspension">Suspension</option><option value="resume">Resume</option><option value="termination">Termination</option>',9)]),512),[[z,s.form.type]])]),i.$page.props.errors.type?(o(),l("p",Ge,c(i.$page.props.errors.type),1)):r("",!0)]),s.form.type=="service_complaint"?(o(),l("div",qe,t[24]||(t[24]=[e("div",{class:"mt-1 flex"},[e("label",{for:"topic",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Topic : ")],-1)]))):r("",!0),s.form.type=="service_complaint"?(o(),l("div",Qe,[e("div",Xe,[y(e("select",{"onUpdate:modelValue":t[5]||(t[5]=n=>s.form.topic=n),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[25]||(t[25]=[se('<option value="no_internet">No Internet</option><option value="los_redlight">LOS Redlight</option><option value="slow_performance">Slow Performance</option><option value="wifi_issue">Wifi Issue</option><option value="onu_issue">ONU Issue</option><option value="password_change">Password Changed</option><option value="other">Other</option>',7)]),512),[[z,s.form.topic]])]),i.$page.props.errors.topic?(o(),l("p",Ze,c(i.$page.props.errors.topic),1)):r("",!0)])):r("",!0),t[50]||(t[50]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Status : ")])],-1)),e("div",et,[e("div",tt,[y(e("select",{"onUpdate:modelValue":t[6]||(t[6]=n=>s.form.status=n),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[26]||(t[26]=[e("option",{value:"1"},"Open",-1),e("option",{value:"2",disabled:""},"Escalated",-1),e("option",{value:"5",disabled:""},"Resolved",-1),e("option",{value:"3"},"Closed",-1)]),512),[[z,s.form.status]])]),i.$page.props.errors.status?(o(),l("p",st,c(i.$page.props.errors.status),1)):r("",!0)]),s.form.status==3?(o(),l("div",ot,t[27]||(t[27]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Close Period : ")],-1)]))):r("",!0),s.form.status==3?(o(),l("div",lt,[e("div",rt,[y(e("input",{type:"date","onUpdate:modelValue":t[7]||(t[7]=n=>s.form.close_date=n),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.close_date]])]),i.$page.props.errors.close_date?(o(),l("p",it,c(i.$page.props.errors.close_date),1)):r("",!0)])):r("",!0),s.form.status==3?(o(),l("div",nt,[e("div",at,[y(e("input",{type:"time","onUpdate:modelValue":t[8]||(t[8]=n=>s.form.close_time=n),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.close_time]])]),i.$page.props.errors.close_time?(o(),l("p",dt,c(i.$page.props.errors.close_time),1)):r("",!0)])):r("",!0),s.form.status==5?(o(),l("div",ct,t[28]||(t[28]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Resolved Period : ")],-1)]))):r("",!0),s.form.status==5?(o(),l("div",mt,[e("div",pt,[y(e("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=n=>s.form.resolved_date=n),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.resolved_date]])]),i.$page.props.errors.resolved_date?(o(),l("p",ut,c(i.$page.props.errors.resolved_date),1)):r("",!0)])):r("",!0),s.form.status==5?(o(),l("div",ft,[e("div",gt,[y(e("input",{type:"time","onUpdate:modelValue":t[10]||(t[10]=n=>s.form.resolved_time=n),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.resolved_time]])]),i.$page.props.errors.resolved_time?(o(),l("p",yt,c(i.$page.props.errors.resolved_time),1)):r("",!0)])):r("",!0),s.form.type=="suspension"?(o(),l("div",xt,t[29]||(t[29]=[e("div",{class:"mt-1 flex"},[e("label",{for:"suspense",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Suspense Period : ")],-1)]))):r("",!0),s.form.type=="suspension"?(o(),l("div",bt,[e("div",vt,[e("div",_t,[e("div",wt,[t[30]||(t[30]=e("span",{class:"-mt-1 z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-pause"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[11]||(t[11]=n=>s.form.start_date=n),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),i.$page.props.errors.start_date?(o(),l("p",kt,c(i.$page.props.errors.start_date),1)):r("",!0)]),e("div",ht,[e("div",Ct,[t[31]||(t[31]=e("span",{class:"-mt-1 z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[12]||(t[12]=n=>s.form.end_date=n),name:"end_date",id:"end_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.end_date]])]),i.$page.props.errors.end_date?(o(),l("p",Tt,c(i.$page.props.errors.end_date),1)):r("",!0)])])])):r("",!0),s.form.type=="resume"?(o(),l("div",St,t[32]||(t[32]=[e("div",{class:"mt-1 flex"},[e("label",{for:"resume",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Resume Date : ")],-1)]))):r("",!0),s.form.type=="resume"?(o(),l("div",Vt,[e("div",Ut,[t[33]||(t[33]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[13]||(t[13]=n=>s.form.start_date=n),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),i.$page.props.errors.resume?(o(),l("p",jt,c(i.$page.props.errors.start_date),1)):r("",!0)])):r("",!0),s.form.type=="termination"?(o(),l("div",Dt,t[34]||(t[34]=[e("div",{class:"mt-1 flex"},[e("label",{for:"termination",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Termination Date : ")],-1)]))):r("",!0),s.form.type=="termination"?(o(),l("div",Mt,[e("div",Ot,[t[35]||(t[35]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-stop"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[14]||(t[14]=n=>s.form.start_date=n),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),i.$page.props.errors.start_date?(o(),l("p",Pt,c(i.$page.props.errors.start_date),1)):r("",!0)])):r("",!0),s.form.type=="relocation"?(o(),l("div",It,t[36]||(t[36]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Address : ")],-1)]))):r("",!0),s.form.type=="relocation"?(o(),l("div",Nt,[e("div",Lt,[y(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=n=>s.form.new_address=n),name:"new_address",id:"new_address",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"}," ",512),[[_,s.form.new_address]])]),i.$page.props.errors.new_address?(o(),l("p",At,c(i.$page.props.errors.new_address),1)):r("",!0)])):r("",!0),s.form.type=="relocation"?(o(),l("div",Et,t[37]||(t[37]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Township : ")],-1)]))):r("",!0),s.form.type=="relocation"?(o(),l("div",zt,[s.townships.length!==0?(o(),l("div",Bt,[N(u,{"deselect-label":"Selected already",options:s.townships,"track-by":"id",label:"name",modelValue:s.form.new_township,"onUpdate:modelValue":t[16]||(t[16]=n=>s.form.new_township=n),"allow-empty":!1},null,8,["options","modelValue"])])):r("",!0),i.$page.props.errors.new_township?(o(),l("p",Rt,c(i.$page.props.errors.new_township),1)):r("",!0)])):r("",!0),s.form.type=="relocation"?(o(),l("div",Ft,t[38]||(t[38]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_latlong",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Location : ")],-1)]))):r("",!0),s.form.type=="relocation"?(o(),l("div",Ht,[e("div",Yt,[e("div",$t,[e("div",Wt,[t[39]||(t[39]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=n=>s.form.latitude=n),name:"latitude",id:"latitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Latitude"},null,512),[[_,s.form.latitude]])]),i.$page.props.errors.latitude?(o(),l("p",Jt,c(i.$page.props.errors.latitude),1)):r("",!0)]),e("div",Kt,[e("div",Gt,[t[40]||(t[40]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=n=>s.form.longitude=n),name:"longitude",id:"longitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Longitude"},null,512),[[_,s.form.longitude]])]),i.$page.props.errors.longitude?(o(),l("p",qt,c(i.$page.props.errors.longitude),1)):r("",!0)])])])):r("",!0),s.form.type=="relocation"?(o(),l("div",Qt,t[41]||(t[41]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):r("",!0),s.form.type=="relocation"?(o(),l("div",Xt,[e("div",Zt,[t[42]||(t[42]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-truck"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[19]||(t[19]=n=>s.form.start_date=n),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),i.$page.props.errors.start_date?(o(),l("p",es,c(i.$page.props.errors.start_date),1)):r("",!0)])):r("",!0),s.form.type=="plan_change"?(o(),l("div",ts,t[43]||(t[43]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_package",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Package: ")],-1)]))):r("",!0),s.form.type=="plan_change"?(o(),l("div",ss,[s.packages.length!==0?(o(),l("div",os,[N(u,{"deselect-label":"Selected already",options:s.packages,"track-by":"id",label:"item_data",modelValue:s.form.package_id,"onUpdate:modelValue":t[20]||(t[20]=n=>s.form.package_id=n),"allow-empty":!1},null,8,["options","modelValue"])])):r("",!0),i.$page.props.errors.package?(o(),l("p",ls,c(i.$page.props.errors.package),1)):r("",!0)])):r("",!0),s.form.type=="plan_change"?(o(),l("div",rs,t[44]||(t[44]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):r("",!0),s.form.type=="plan_change"?(o(),l("div",is,[e("div",ns,[t[45]||(t[45]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-random"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[21]||(t[21]=n=>s.form.start_date=n),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),i.$page.props.errors.start_date?(o(),l("p",as,c(i.$page.props.errors.start_date),1)):r("",!0)])):r("",!0),t[51]||(t[51]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"detail",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Detail : ")])],-1)),e("div",ds,[e("div",cs,[y(e("textarea",{"onUpdate:modelValue":t[22]||(t[22]=n=>s.form.description=n),name:"detail",id:"detail",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"}," ",512),[[_,s.form.description]])]),i.$page.props.errors.description?(o(),l("p",ms,c(i.$page.props.errors.description),1)):r("",!0)])]),s.loading?(o(),l("div",ps,t[52]||(t[52]=[e("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),e("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),e("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):r("",!0)],64)}const fs=W(Pe,[["render",us]]),gs={name:"Task",components:{Multiselect:oe},props:["data"],setup(i){const t=R("noc"),f=R("permission");let s=k(),w=k(!1),x=k(!1),u=k(!1);const n=ge({id:null,assigned:null,target:null,status:1,description:null,incident_id:null});function V(){x.value=!0,n.incident_id=i.data}function j(){n.id=null,n.assigned=null,n.target=null,n.status=1,n.description=null,n.incident_id=i.data}function v(g){n.id=g.id,n.assigned=F(g.assigned)?JSON.parse(g.assigned):t.filter(p=>p.id==g.assigned)[0],n.description=g.description,n.incident_id=g.incident_id,n.status=g.status,n.target=g.target,u.value=!0,x.value=!0}function S(g){Toast.fire({title:"Are you sure?",text:"Once deleted, you will not be able to recover this data !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(p=>{p.isConfirmed?U(g):Toast.fire("Your data is safe!")})}function U(g){n.id=g.id,n.assigned=F(g.assigned)?JSON.parse(g.assigned):t.filter(p=>p.id==g.assigned)[0],n.description=g.description,n.incident_id=g.incident_id,n.status=0,n.target=g.target,u.value=!0,x.value=!1,C()}function b(g){g.status!=2?Toast.fire({title:"Are you sure?",text:"Do you want to mark as completed !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(p=>{p.isConfirmed&&a(g,2)}):Toast.fire({title:"Are you sure?",text:"Do you want to mark as WIP !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(p=>{p.isConfirmed&&a(g,1)})}function a(g,p){n.id=g.id,n.assigned=g.assigned,n.description=g.description,n.incident_id=g.incident_id,n.status=p,n.target=g.target,u.value=!0,x.value=!1,C()}function C(){u.value!=!0?(n._method="POST",L.post("/addTask",n,{preserveState:!0,onSuccess:g=>{x.value=!1,j(),H(),Toast.fire({icon:"success",title:g.props.flash.message})},onError:g=>{console.log("error ..".errors)}})):(n._method="PUT",L.post("/editTask/"+n.id,n,{onSuccess:g=>{x.value=!1,u.value=!1,j(),H(),Toast.fire({icon:"success",title:g.props.flash.message}),closeModal()},onError:g=>{console.log("error ..".errors)}}))}function E(){x.value=!1,preserveState=!0}const d=async()=>{let g="/getTask/"+i.data;console.log(g);try{return await(await fetch(g)).json()}catch(p){console.error(p)}},Y=g=>{var p,T;if(F(g)){let M=JSON.parse(g);if(console.log(M),!Array.isArray(M)&&M instanceof Object)return(T=M.name)==null?void 0:T.match(/\b\w/g).join("");{let q=""+M.map(X=>{var Z;return console.log(X.name),(Z=X.name)==null?void 0:Z.match(/\b\w/g).join("")});return console.log(q),q}}else return(p=Object(t.filter(q=>q.id==g)[0]).name)==null?void 0:p.match(/\b\w/g).join("")};function $(g){let p="WIP";return g==0?p="Deleted":g==1?p="WIP":p="Completed",p}function F(g){console.log(g);try{const p=JSON.parse(g);return typeof p=="object"&&p!==null}catch{return console.log("not json"),!1}}const H=()=>{d().then(g=>{s.value=g})};return J(()=>{console.log(s.value),H()}),{loading:w,task_list:s,edit:x,editMode:u,newTask:V,saveTask:C,cancelTask:E,getName:Y,getStatus:$,editTask:v,deleteTask:S,completeTask:b,form:n,noc:t,permission:f}}},ys={class:"flex w-full justify-end"},xs={key:0},bs={key:1},vs={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},_s={key:1},ws={class:"min-w-full divide-y divide-gray-200 table-auto"},ks={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto block scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white flex flex-col justify-between text-left"},hs={class:"px-6 py-3 whitespace-nowrap w-1/12"},Cs=["checked","onClick","disabled"],Ts={class:"px-6 py-3 whitespace-nowrap w-3/5"},Ss={class:"px-6 py-3 whitespace-nowrap w-1/4"},Vs={class:"px-6 py-3 whitespace-nowrap w-1/6"},Us={class:"px-6 py-3 whitespace-nowrap w-1/12"},js={key:0,class:"px-6 py-3 whitespace-nowrap w-1/12"},Ds=["onClick"],Ms=["onClick"],Os={key:1,class:"px-6 py-3 whitespace-nowrap w-1/12"},Ps=["onClick"],Is={key:2},Ns={class:"grid grid-cols-1 md:grid-cols-4 gap-2 w-full"},Ls={class:"py-2 col-span-3 sm:col-span-3"},As={class:"flex rounded-md shadow-sm"},Es={key:0,class:"flex rounded-md shadow-sm w-full"},zs={key:1,class:"mt-2 text-sm text-red-500"},Bs={class:"py-2 col-span-3 sm:col-span-3"},Rs={class:"flex rounded-md shadow-sm"},Fs={key:0,class:"mt-2 text-sm text-red-500"},Hs={class:"py-2 col-span-3 sm:col-span-3"},Ys={class:"flex rounded-md shadow-sm"},$s={key:0,class:"mt-2 text-sm text-red-500"},Ws={class:"py-2 col-span-3 sm:col-span-3"},Js={class:"flex rounded-md shadow-sm"},Ks={key:0,class:"mt-2 text-sm text-red-500"};function Gs(i,t,f,s,w,x){const u=I("multiselect");return o(),l(A,null,[e("div",ys,[!s.edit&&s.permission[0].write_incident==1?(o(),l("a",{key:0,href:"#",onClick:t[0]||(t[0]=n=>s.newTask()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[7]||(t[7]=[D("Add Task"),e("i",{class:"fas fa-plus-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):r("",!0),s.edit&&s.permission[0].write_incident==1?(o(),l("a",{key:1,href:"#",onClick:t[1]||(t[1]=n=>s.saveTask()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-green-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-400 active:bg-green-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},[s.editMode?r("",!0):(o(),l("span",xs,"Save Task")),s.editMode?(o(),l("span",bs,"Update Task")):r("",!0),t[8]||(t[8]=e("i",{class:"fas fa-save opacity-75 lg:ml-1 text-sm"},null,-1))])):r("",!0),s.edit?(o(),l("a",{key:2,href:"#",onClick:t[2]||(t[2]=n=>s.cancelTask()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-gray-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-400 active:bg-gray-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[9]||(t[9]=[D("Cancel"),e("i",{class:"fas fa-save opacity-75 lg:ml-1 text-sm"},null,-1)]))):r("",!0)]),s.task_list?r("",!0):(o(),l("div",vs,t[10]||(t[10]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.task_list&&!s.edit?(o(),l("div",_s,[e("table",ws,[t[15]||(t[15]=e("thead",{class:"bg-gray-50 w-full flex flex-col"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"}),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-3/5"}," Description"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4"}," Assigned"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/6"}," Target"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"}," Status"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"}," Action")])],-1)),e("tbody",ks,[(o(!0),l(A,null,G(s.task_list,n=>(o(),l("tr",{key:n.id,class:"flex"},[e("td",hs,[e("input",{type:"checkbox",name:"status",checked:n.status==2,onClick:V=>s.completeTask(n),disabled:!s.permission[0].write_incident},null,8,Cs)]),e("td",Ts,c(n.description.length>50?n.description.substring(0,50)+" ...":n.description),1),e("td",Ss,c(s.getName(n.assigned)),1),e("td",Vs,c(n.target),1),e("td",Us,c(s.getStatus(n.status)),1),s.permission[0].write_incident==1?(o(),l("td",js,[e("a",{href:"#",onClick:V=>s.editTask(n),class:"text-blue-600"},t[11]||(t[11]=[e("i",{class:"fa fa-edit"},null,-1)]),8,Ds),t[13]||(t[13]=D(" | ")),e("a",{href:"#",onClick:V=>s.deleteTask(n),class:"text-red-600"},t[12]||(t[12]=[e("i",{class:"fa fa-trash"},null,-1)]),8,Ms)])):(o(),l("td",Os,[e("a",{href:"#",onClick:V=>s.editTask(n),class:"text-blue-600"},t[14]||(t[14]=[e("i",{class:"fa fa-eye"},null,-1)]),8,Ps)]))]))),128))])])])):r("",!0),s.edit?(o(),l("div",Is,[e("div",Ns,[t[17]||(t[17]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Assigned : ")])],-1)),e("div",Ls,[e("div",As,[s.noc.length!==0?(o(),l("div",Es,[N(u,{"deselect-label":"Selected already",options:s.noc,"track-by":"id",label:"name",modelValue:s.form.assigned,"onUpdate:modelValue":t[3]||(t[3]=n=>s.form.assigned=n),"allow-empty":!1,multiple:!0},null,8,["options","modelValue"])])):r("",!0),i.$page.props.errors.assigned?(o(),l("p",zs,c(i.$page.props.errors.assigned),1)):r("",!0)])]),t[18]||(t[18]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"target",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Target : ")])],-1)),e("div",Bs,[e("div",Rs,[y(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=n=>s.form.target=n),name:"target",id:"target",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.target]])]),i.$page.props.errors.target?(o(),l("p",Fs,c(i.$page.props.errors.target),1)):r("",!0)]),t[19]||(t[19]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Description : ")])],-1)),e("div",Hs,[e("div",Ys,[y(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=n=>s.form.description=n),name:"description",id:"description",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.description]])]),i.$page.props.errors.description?(o(),l("p",$s,c(i.$page.props.errors.description),1)):r("",!0)]),t[20]||(t[20]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Status : ")])],-1)),e("div",Ws,[e("div",Js,[y(e("select",{"onUpdate:modelValue":t[6]||(t[6]=n=>s.form.status=n),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[16]||(t[16]=[e("option",{value:"1"},"WIP",-1),e("option",{value:"2"},"Completed",-1),e("option",{value:"0"},"Deleted",-1)]),512),[[z,s.form.status]])]),i.$page.props.errors.status?(o(),l("p",Ks,c(i.$page.props.errors.status),1)):r("",!0)])])])):r("",!0)],64)}const qs=W(gs,[["render",Gs]]),Qs={name:"Log",props:["data"],setup(i){const t=k(""),f=async()=>{let w="/getLog/"+i.data;try{return await(await fetch(w)).json()}catch(x){console.error(x)}},s=()=>{f().then(w=>{t.value=w})};return J(()=>{s()}),{logs:t}}},Xs={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},Zs={key:1},eo={class:"min-w-full divide-y divide-gray-200 table-auto"},to={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white block text-left"},so={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-1/12 flex"},oo={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-1/4 flex-1"},lo={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-1/3 flex-1"},ro={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-full flex-1"};function io(i,t,f,s,w,x){return o(),l(A,null,[s.logs?r("",!0):(o(),l("div",Xs,t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.logs?(o(),l("div",Zs,[e("table",eo,[t[1]||(t[1]=e("thead",{class:"bg-gray-50 w-full flex block table text-left"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12 flex"},"No."),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4 flex-1"},"Date"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/3 flex-1"},"Actor"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-full flex-1"},"Action")])],-1)),e("tbody",to,[(o(!0),l(A,null,G(s.logs,(u,n)=>(o(),l("tr",{key:u.id,class:"flex"},[e("td",so,c(n+1),1),e("td",oo,c(u.created_at),1),e("td",lo,c(u.name),1),e("td",ro,c(u.action),1)]))),128))])])])):r("",!0)],64)}const no=W(Qs,[["render",io]]),ao={name:"History",props:["data"],setup(i){const t=k(),f=async()=>{let w="/getHistory/"+i.data;try{return await(await fetch(w)).json()}catch(x){console.error(x)}},s=()=>{f().then(w=>{t.value=w})};return J(()=>{s()}),{logs:t}}},co={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},mo={key:1},po={class:"min-w-full divide-y divide-gray-200 table-auto"},uo={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white block text-left"},fo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex"},go={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},yo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},xo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},bo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},vo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},_o={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"};function wo(i,t,f,s,w,x){return o(),l(A,null,[s.logs?r("",!0):(o(),l("div",co,t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.logs?(o(),l("div",mo,[e("table",po,[t[1]||(t[1]=e("thead",{class:"bg-gray-50 w-full flex block table text-left"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex"},"No."),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Date"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Ticket ID"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Customer ID"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Ticket Type"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Ticket Topic (if exists)"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Opened By")])],-1)),e("tbody",uo,[(o(!0),l(A,null,G(s.logs,(u,n)=>(o(),l("tr",{key:u.id,class:"flex"},[e("td",fo,c(n+1),1),e("td",go,c(u.date+" "+u.time),1),e("td",yo,c(u.code),1),e("td",xo,c(u.ftth_id),1),e("td",bo,c(u.type),1),e("td",vo,c(u.topic?u.topic:"N/A"),1),e("td",_o,c(u.name),1)]))),128))])])])):r("",!0)],64)}const ko=W(ao,[["render",wo]]),ho={name:"File",components:{Upload:ve},props:["data"],setup(i){let t=k(!1),f=k();const s=R("permission");let w=k(!1),x=k("");function u(){w.value=!0,x.value={incident_id:i.data}}function n(){w.value=!1,U()}function V(b){Toast.fire({title:"Are you sure?",text:"Once deleted, you will not be able to recover this data !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(a=>{a.isConfirmed?j(b):Toast.fire("Your data is safe!")})}function j(b){b._method="DELETE",L.post("/deleteFile/"+b.id,b,{onSuccess(a){Toast.fire({icon:"success",title:"Your File has been Deleted !"}),U()}})}const v=async()=>{let b="/getFile/"+i.data;console.log(b);try{return await(await fetch(b)).json()}catch(a){console.error(a)}},S=b=>{b&&(w.value=!1,U(),Toast.fire({icon:"success",title:"Successfully Uploaded the File"}))},U=()=>{v().then(b=>{f.value=b})};return J(()=>{U()}),{file_list:f,add:w,deleteFile:V,addFile:u,closeFile:n,checkUpload:S,incident_id:x,permission:s,loading:t}}},Co={class:"flex w-full justify-end"},To={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},So={key:1},Vo={class:"min-w-full divide-y divide-gray-200 table-auto"},Uo={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white block text-left"},jo={class:"px-6 py-3 whitespace-nowrap tracking-wider w-1/12"},Do={class:"px-6 py-3 whitespace-nowrap tracking-wider w-full"},Mo={key:0,class:"px-6 py-3 whitespace-nowrap tracking-wider text-right w-1/12 mr-4"},Oo=["href"],Po=["onClick"],Io={key:1,class:"px-6 py-3 whitespace-nowrap tracking-wider text-right w-1/12 mr-4"},No=["href"],Lo={key:2};function Ao(i,t,f,s,w,x){const u=I("upload");return o(),l(A,null,[e("div",Co,[!s.add&&s.permission[0].write_incident==1?(o(),l("a",{key:0,href:"#",onClick:t[0]||(t[0]=n=>s.addFile()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[2]||(t[2]=[D("Add File"),e("i",{class:"fas fa-plus-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):r("",!0),s.add?(o(),l("a",{key:1,href:"#",onClick:t[1]||(t[1]=n=>s.closeFile()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[3]||(t[3]=[D("Close"),e("i",{class:"fas fa-times-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):r("",!0)]),s.file_list?r("",!0):(o(),l("div",To,t[4]||(t[4]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.file_list&&!s.add?(o(),l("div",So,[e("table",Vo,[t[9]||(t[9]=e("thead",{class:"bg-gray-50 w-full flex block table text-left"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"},"ID"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-full"},"File"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"}," Action ")])],-1)),e("tbody",Uo,[(o(!0),l(A,null,G(s.file_list,(n,V)=>(o(),l("tr",{key:n.id,class:"flex"},[e("td",jo,c(V+1),1),e("td",Do,c(n.name),1),s.permission[0].write_incident==1?(o(),l("td",Mo,[e("a",{href:n.path,target:"_blank"},t[5]||(t[5]=[e("i",{class:"fas fa-eye text-indigo-600"},null,-1)]),8,Oo),t[7]||(t[7]=D(" | ")),e("a",{href:"#",onClick:j=>s.deleteFile(n),class:"text-red-600"},t[6]||(t[6]=[e("i",{class:"fa fa-trash"},null,-1)]),8,Po)])):(o(),l("td",Io,[e("a",{href:n.path,target:"_blank"},t[8]||(t[8]=[e("i",{class:"fas fa-eye text-indigo-600"},null,-1)]),8,No)]))]))),128))])])])):r("",!0),s.add?(o(),l("div",Lo,[N(u,{data:s.incident_id,onStatus:s.checkUpload},null,8,["data","onStatus"])])):r("",!0)],64)}const Eo=W(ho,[["render",Ao]]),zo={name:"CustomerDetail",props:["data"],setup(i){const t=k(""),f=async()=>{let w="/getCustomer/"+i.data;try{return await(await fetch(w)).json()}catch(x){console.error(x)}},s=()=>{f().then(w=>{t.value=w})};return J(()=>{s()}),{customer_detail:t}}},Bo={key:0,class:"w-full flex flex-col items-center justify-center"},Ro={key:1},Fo={class:"bg-white shadow overflow-hidden sm:rounded-lg text-left"},Ho={class:"border-t border-gray-200"},Yo={class:"bg-gray-50 px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},$o={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},Wo={key:0,class:"bg-white px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},Jo={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},Ko={class:"bg-gray-50 px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},Go={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},qo={class:"bg-white px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},Qo={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},Xo={key:1,class:"bg-gray-50 px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},Zo={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},el={class:"bg-white px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},tl={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},sl={key:2,class:"bg-gray-50 px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},ol={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},ll={key:3,class:"bg-white px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},rl={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},il={key:4,class:"bg-gray-50 px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},nl={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},al={key:5,class:"bg-white px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},dl={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},cl={class:"bg-gray-50 px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},ml={key:0,class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},pl={class:"uppercase"},ul={key:1,class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},fl={class:"uppercase"};function gl(i,t,f,s,w,x){return o(),l(A,null,[s.customer_detail[0]?r("",!0):(o(),l("div",Bo,t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.customer_detail[0]?(o(),l("div",Ro,[e("div",Fo,[e("div",Ho,[e("dl",null,[e("div",Yo,[t[1]||(t[1]=e("dt",{class:"text-sm font-medium text-gray-500"},"Customer ID",-1)),e("dd",$o,c(s.customer_detail[0].ftth_id),1)]),s.customer_detail[0].sale_channel?(o(),l("div",Wo,[t[2]||(t[2]=e("dt",{class:"text-sm font-medium text-gray-500"},"Sales Source",-1)),e("dd",Jo,c(s.customer_detail[0].sale_channel),1)])):r("",!0),e("div",Ko,[t[3]||(t[3]=e("dt",{class:"text-sm font-medium text-gray-500"},"Customer Name",-1)),e("dd",Go,c(s.customer_detail[0].name),1)]),e("div",qo,[t[4]||(t[4]=e("dt",{class:"text-sm font-medium text-gray-500"},"Contact Number",-1)),e("dd",Qo,c(s.customer_detail[0].phone_1)+" "+c(s.customer_detail[0].phone_2),1)]),s.customer_detail[0].email?(o(),l("div",Xo,[t[5]||(t[5]=e("dt",{class:"text-sm font-medium text-gray-500"},"Contact E Mail",-1)),e("dd",Zo,c(s.customer_detail[0].email),1)])):r("",!0),e("div",el,[t[6]||(t[6]=e("dt",{class:"text-sm font-medium text-gray-500"},"Full Address",-1)),e("dd",tl,c(s.customer_detail[0].address),1)]),s.customer_detail[0].latitude?(o(),l("div",sl,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500"},"Location",-1)),e("dd",ol,c(s.customer_detail[0].latitude)+","+c(s.customer_detail[0].longitude),1)])):r("",!0),s.customer_detail[0].billing_attention?(o(),l("div",ll,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500"},"Contact Person Name",-1)),e("dd",rl,c(s.customer_detail[0].billing_attention),1)])):r("",!0),s.customer_detail[0].nrc?(o(),l("div",il,[t[9]||(t[9]=e("dt",{class:"text-sm font-medium text-gray-500"},"NRC Number",-1)),e("dd",nl,c(s.customer_detail[0].nrc),1)])):r("",!0),s.customer_detail[0].dob?(o(),l("div",al,[t[10]||(t[10]=e("dt",{class:"text-sm font-medium text-gray-500"},"Date of Birth",-1)),e("dd",dl,c(s.customer_detail[0].dob),1)])):r("",!0),e("div",cl,[t[11]||(t[11]=e("dt",{class:"text-sm font-medium text-gray-500"},"Applied Mbps",-1)),s.customer_detail[0].payment_type==1?(o(),l("dd",ml,[D(c(s.customer_detail[0].package_name)+" ("+c(s.customer_detail[0].package_speed)+" Mbps),MRC "+c(s.customer_detail[0].package_price)+" ",1),e("span",pl,c(s.customer_detail[0].package_currency),1),D(", "+c(s.customer_detail[0].package_contract_period)+" Months Contract, "+c(s.customer_detail[0].prepaid_period)+" Months Prepaid ",1)])):(o(),l("dd",ul,[D(c(s.customer_detail[0].package_name)+" ("+c(s.customer_detail[0].package_speed)+" Mbps), MRC "+c(s.customer_detail[0].package_price)+" ",1),e("span",fl,c(s.customer_detail[0].package_currency),1),D(", "+c(s.customer_detail[0].package_contract_period)+" Months Contract, Monthly Postpaid ",1)]))])])])])])):r("",!0)],64)}const yl=W(zo,[["render",gl]]),xl={name:"Incident",components:{AppLayout:pe,Pagination:_e,IncidentAlert:Oe,IncidentDetail:fs,Multiselect:oe,VueDatePicker:we,Task:qs,File:Eo,Log:no,History:ko,CustomerDetail:yl,NoData:ue},props:{incidents:Object,incidents_2:Object,noc:Object,team:Object,townships:Object,customers:Object,packages:Object,critical:Object,high:Object,normal:Object,errors:Object,permission:Object,user:Object},setup(i){const t=k(""),f=k(""),s=k(1);let w=k(!1),x=k(!1),u=k(""),n=k(0),V=k("default"),j=k("default"),v=k([]);const S=k({date:"YYYY-MM-DD",month:"MMM"});let U=k(!1),b=k(!1);K("noc",i.noc),K("team",i.team),K("townships",i.townships),K("user",i.user),K("packages",i.packages),K("permission",i.permission),K("customers",i.customers);const a=ie({id:null,code:null,priority:null,customer_id:null,incharge_id:i.team.filter(m=>m.id==i.user.id)[0],type:"default",topic:null,status:1,start_date:null,end_date:null,new_address:null,new_township:null,latitude:null,longitude:null,package_id:null,description:null,date:null,time:null,close_date:null,close_time:null,resolved_date:null,resolved_time:null});let C=k(!0),E=k("");function d(m){E.value=m}function Y(m){if(u.value!=null&&(C.value=m,m==1)){let h=i.incidents.data.filter(O=>O.id==u.value)[0];p(h)}}function $(){var m=new Date,h=m.getFullYear()+"-"+(m.getMonth()+1)+"-"+m.getDate(),O=m.getHours()+":"+m.getMinutes();!a.close_date&&n.value!=3&&(a.close_date=h),!a.close_time&&n.value!=3&&(a.close_time=O),C.value=1,U.value=!0}function F(){U.value=!1,u.value=null}function H(){T(),$()}function g(m){let h=i.incidents_2.filter(O=>O.id==m.id)[0];p(h)}function p(m){let h=null;u.value=m.id,x.value=!0,m.location!=null&&(h=m.location.split(",",2),a.latitude=h[0],a.longitude=h[1]),a.id=m.id,a.code=m.code,a.priority=m.priority,a.customer_id=i.customers.filter(O=>O.id==m.customer_id)[0],a.incharge_id=i.noc.filter(O=>O.id==m.incharge_id)[0],a.type=m.type,a.topic=m.topic,a.status=m.status,a.start_date=m.start_date,a.end_date=m.end_date,a.new_address=m.new_address,a.new_township=i.townships.filter(O=>O.id==m.new_township)[0],a.package_id=i.packages.filter(O=>O.id==m.package_id)[0],a.description=m.description,a.date=m.date,a.time=m.time,a.close_date=m.close_date,a.close_time=m.close_time,a.resolved_date=m.resolved_date,a.resolved_time=m.resolved_time,$()}function T(){u.value=null,x.value=!1,a.id="",a.code="",a.priority="normal",a.customer_id="",a.incharge_id=i.team.filter(m=>m.id==i.user.id)[0],a.type="default",a.topic="",a.status=1,a.start_date="",a.end_date="",a.new_address="",a.new_township="",a.latitude="",a.longitude="",a.package_id="",a.description="",a.date="",a.time="",a.close_date="",a.close_time="",a.resolved_date="",a.resolved_time=""}function M(m){let h="Open";return m==1?h="Open":m==2?h="Escalated":m==3?h="Closed":m==4?h="Deleted":m==5?h="Resolved":m==6&&(h="Pending"),h}function q(m){confirm("Are you sure want to remove?")&&(a._method="PUT",a.status=4,L.post("/incident/"+a.id,a,{onSuccess:h=>{s.value+=1,Toast.fire({icon:"success",title:h.props.flash.message}),F()},onError:h=>{console.log("error ..".errors)}}))}const X=()=>{let m="/incident/";n.value!=null&&(m=m+"?status="+n.value),L.get(m,{keyword:t.value},{preserveState:!0})},Z=()=>{let m="/incident/";t.value!=null&&(m=m+"?keyword="+t.value),V.value!="default"&&(m=m+"&type="+V.value),j.value!="default"&&(m=m+"&member="+j.value),v.value!=""&&(m=m+"&date="+v.value),L.get(m,{status:n.value},{preserveState:!0})},ae=m=>{let h="/incident";m!="all"?L.get(h,{priority:m},{preserveState:!0}):L.get(h,{},{preserveState:!0})},de=m=>{let h="/incident/?";f.value=m,f.order=f.order!=="asc"?"asc":"desc";let O=ce();L.get(h+O,{sort:f.value,order:f.order},{preserveState:!0})},ce=()=>{let m="";return t.value!=null&&(m="&keyword="+t.value),V.value!="default"&&(m+="&type="+V.value),j.value!="default"&&(m+="&member="+j.value),n.value!=null&&(m+="&status="+n.value),v.value!=""&&(m+="&date="+v.value),m};function le(){i.incidents.data.map(function(m){m.priority=="high"?m.color=m.status!=3&&m.status!=4?"yellow-600":"gray-200":m.priority=="critical"?m.color=m.status!=3&&m.status!=4?"red-600":"gray-200":m.color=m.status!=3&&m.status!=4?"yellow-300":"gray-200"})}function me(){x.value!=!0?(a._method="POST",L.post("/incident",a,{preserveState:!0,onSuccess:m=>{u.value=m.props.response.id;let h=i.incidents.data.filter(O=>O.id==u.value)[0];x.value=!0,b.value=!1,h!==void 0&&(console.log("response is : "+h),p(h)),Toast.fire({icon:"success",title:m.props.flash.message})},onError:m=>{b.value=!1,console.log("error ..")},onStart:m=>{b.value=!0}})):(a._method="PUT",L.post("/incident/"+a.id,a,{onSuccess:m=>{Toast.fire({icon:"success",title:m.props.flash.message}),b.value=!1},onError:m=>{b.value=!1,console.log("error .."+m)},onStart:m=>{b.value=!0}}))}const ee=m=>{m.key==="Escape"&&F()};return J(()=>{window.addEventListener("keydown",ee),console.log("Incident - On Mounted"),i.packages.map(function(m){return m.item_data=`${m.name}`}),le()}),ye(()=>{window.removeEventListener("keydown",ee)}),ne(()=>{console.log("Incident - On Updated"),i.packages.map(function(m){return m.item_data=`${m.name}`}),le()}),{loading:b,form:a,openModal:$,closeModal:F,newTicket:H,isOpen:U,deleteIncident:q,searchIncident:X,edit:p,sortBy:de,getStatus:M,changeStatus:Z,sort:f,search:t,show:w,tabClick:Y,tab:C,selection:E,selected_id:u,editMode:x,typeChange:d,showPriority:ae,incidentStatus:n,page_update:s,alert_edit:g,submit:me,clearform:T,incidentType:V,incidentBy:j,incidentDate:v,formatter:S,escKey:ee}}},bl={class:"py-1"},vl={class:"mx-auto sm:px-6 lg:px-8"},_l={class:"flex w-full place-items-center align-middle"},wl={class:"flex w-full place-items-center align-middle"},kl={class:"flex w-full place-items-center align-middle"},hl=["value"],Cl={class:"flex w-full place-items-center align-middle"},Tl={class:"flex w-full place-items-center align-middle"},Sl={class:"flex w-full md:w-1/4"},Vl={class:"flex w-full md:w-1/2 md:justify-end"},Ul={key:0,class:"grid grid-cols-1 md:grid-cols-6 gap-6 w-full"},jl={class:"lg:col-span-4 md:col-span-6"},Dl={key:0,class:"bg-white overflow-auto md:overflow-hidden shadow-xl sm:rounded-lg mt-1"},Ml={class:"min-w-full divide-y divide-gray-200"},Ol={class:"bg-gray-50"},Pl={class:"bg-white divide-y divide-gray-200 text-sm"},Il=["onClick"],Nl={class:"px-2 py-3 whitespace-nowrap"},Ll={class:"px-2 py-3 whitespace-nowrap"},Al={class:"px-2 py-3 whitespace-nowrap"},El={class:"px-2 py-3 whitespace-nowrap"},zl={key:0,class:"px-2 py-3 whitespace-nowrap"},Bl={key:1,class:"px-2 py-3 whitespace-nowrap"},Rl={class:"px-2 py-3 whitespace-nowrap capitalize"},Fl={class:"px-2 py-3 whitespace-nowrap"},Hl={class:"px-2 py-3 whitespace-nowrap"},Yl={key:1,class:"w-full block mt-4"},$l={class:"text-xs text-gray-600"},Wl={key:2},Jl={key:3,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg mt-1 py-4 flex flex-col items-center"},Kl={class:"col-span-2"},Gl={class:"bg-white rounded-lg w-full mx-auto mt-1 shadow-xl divide-y divide-gray-200 py-2 px-2"},ql={class:"grid grid-cols-4 gap-2"},Ql={class:"col-span-1"},Xl={class:"col-span-1"},Zl={key:1,class:"flex justify-center"},er={key:0,ref:"isOpen",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},tr={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},sr={class:"bg-gray-50 rounded-sm pt-1 inline-block align-bottom overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},or={class:""},lr={class:""},rr={class:"py-2 divide-y divide-yellow-500"},ir={class:"mt-1 px-3 flex w-full justify-between"},nr={class:"flex"},ar={class:"flex col-span-1"},dr={class:"px-2 lg:px-3"},cr={class:"px-2 lg:px-3"},mr={class:"px-2 lg:px-3"},pr={class:"bg-white rounded-t-lg w-full mx-auto mt-1 shadow-xl divide-y divide-gray-200"},ur={class:"inline-flex w-full bg-gray-50 rounded-t-lg"},fr={id:"tabs",class:"flex"},gr={id:"tab-contents"},yr={class:"grid grid-cols-5 gap-2"},xr={class:"py-2 col-span-2 sm:col-span-2"},br={class:"mt-1 flex rounded-md shadow-sm"},vr={key:0,class:"mt-2 text-sm text-red-500"},_r={class:"py-2 col-span-2 sm:col-span-2"},wr={class:"mt-1 flex rounded-md shadow-sm"},kr={key:0,class:"mt-2 text-sm text-red-500"},hr={class:"py-2 col-span-4 sm:col-span-4"},Cr={key:0,class:"mt-1 flex rounded-md shadow-sm"},Tr={key:1,class:"mt-2 text-sm text-red-500"},Sr={class:"py-2 col-span-4 sm:col-span-4"},Vr={key:0,class:"mt-1 flex rounded-md shadow-sm"},Ur={key:1,class:"mt-2 text-sm text-red-500"},jr={class:"py-2 col-span-4 sm:col-span-4"},Dr={class:"mt-1 flex"},Mr={key:0,class:"mt-2 text-sm text-red-500"},Or={key:0,class:"py-2 col-span-1 sm:col-span-1"},Pr={key:1,class:"py-2 col-span-4 sm:col-span-4"},Ir={class:"mt-1 flex"},Nr={key:0,class:"mt-2 text-sm text-red-500"},Lr={key:2,class:"py-2 col-span-4 sm:col-span-4"},Ar={class:"mt-1 flex"},Er={key:0,class:"mt-2 text-sm text-red-500"},zr={key:3,class:"py-2 col-span-4 sm:col-span-4"},Br={class:"mt-1 flex"},Rr={key:0,class:"mt-2 text-sm text-red-500"},Fr={class:"py-2 col-span-4 sm:col-span-4"},Hr={class:"mt-1 flex"},Yr={key:0,class:"mt-2 text-sm text-red-500"},$r={key:4,class:"py-2 col-span-1 sm:col-span-1"},Wr={key:5,class:"py-2 col-span-2 sm:col-span-2"},Jr={class:"mt-1 flex rounded-md shadow-sm"},Kr={key:0,class:"mt-2 text-sm text-red-500"},Gr={key:6,class:"py-2 col-span-2 sm:col-span-2"},qr={class:"mt-1 flex rounded-md shadow-sm"},Qr={key:0,class:"mt-2 text-sm text-red-500"},Xr={key:7,class:"py-2 col-span-1 sm:col-span-1"},Zr={key:8,class:"py-2 col-span-2 sm:col-span-2"},ei={class:"mt-1 flex rounded-md shadow-sm"},ti={key:0,class:"mt-2 text-sm text-red-500"},si={key:9,class:"py-2 col-span-2 sm:col-span-2"},oi={class:"mt-1 flex rounded-md shadow-sm"},li={key:0,class:"mt-2 text-sm text-red-500"},ri={key:10,class:"py-2 col-span-1 sm:col-span-1"},ii={key:11,class:"py-2 col-span-4 sm:col-span-4"},ni={class:"grid grid-cols-2 gap-2"},ai={class:"col-span-1 sm:col-span-1"},di={class:"mt-1 flex rounded-md shadow-sm"},ci={key:0,class:"mt-2 text-sm text-red-500"},mi={class:"col-span-1 sm:col-span-1"},pi={class:"mt-1 flex rounded-md shadow-sm"},ui={key:0,class:"mt-2 text-sm text-red-500"},fi={key:12,class:"py-2 col-span-1 sm:col-span-1"},gi={key:13,class:"py-2 col-span-4 sm:col-span-4"},yi={class:"mt-1 flex rounded-md shadow-sm"},xi={key:0,class:"mt-2 text-sm text-red-500"},bi={key:14,class:"py-2 col-span-1 sm:col-span-1"},vi={key:15,class:"py-2 col-span-4 sm:col-span-4"},_i={class:"mt-1 flex rounded-md shadow-sm"},wi={key:0,class:"mt-2 text-sm text-red-500"},ki={key:16,class:"py-2 col-span-1 sm:col-span-1"},hi={key:17,class:"py-2 col-span-4 sm:col-span-4"},Ci={class:"mt-1 flex"},Ti={key:0,class:"mt-2 text-sm text-red-500"},Si={key:18,class:"py-2 col-span-1 sm:col-span-1"},Vi={key:19,class:"py-2 col-span-4 sm:col-span-4"},Ui={key:0,class:"mt-1 flex rounded-md shadow-sm"},ji={key:1,class:"mt-2 text-sm text-red-500"},Di={key:20,class:"py-2 col-span-1 sm:col-span-1"},Mi={key:21,class:"py-2 col-span-4 sm:col-span-4"},Oi={class:"grid grid-cols-2 gap-2"},Pi={class:"col-span-1 sm:col-span-1"},Ii={class:"mt-1 flex rounded-md shadow-sm"},Ni={key:0,class:"mt-2 text-sm text-red-500"},Li={class:"col-span-1 sm:col-span-1"},Ai={class:"mt-1 flex rounded-md shadow-sm"},Ei={key:0,class:"mt-2 text-sm text-red-500"},zi={key:22,class:"py-2 col-span-1 sm:col-span-1"},Bi={key:23,class:"py-2 col-span-4 sm:col-span-4"},Ri={class:"mt-1 flex rounded-md shadow-sm"},Fi={key:0,class:"mt-2 text-sm text-red-500"},Hi={key:24,class:"py-2 col-span-1 sm:col-span-1"},Yi={key:25,class:"py-2 col-span-4 sm:col-span-4"},$i={key:0,class:"mt-1 flex rounded-md shadow-sm"},Wi={key:1,class:"mt-2 text-sm text-red-500"},Ji={key:26,class:"py-2 col-span-1 sm:col-span-1"},Ki={key:27,class:"py-2 col-span-4 sm:col-span-4"},Gi={class:"mt-1 flex rounded-md shadow-sm"},qi={key:0,class:"mt-2 text-sm text-red-500"},Qi={class:"py-2 col-span-4 sm:col-span-4"},Xi={class:"mt-1 flex"},Zi={key:0,class:"mt-2 text-sm text-red-500"},en={key:0,class:"flex"},tn={key:0},sn={key:1},on={class:"flex"},ln={key:1,"wire:loading":"",class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function rn(i,t,f,s,w,x){const u=I("VueDatePicker"),n=I("pagination"),V=I("no-data"),j=I("incident-alert"),v=I("multiselect"),S=I("task"),U=I("file"),b=I("customer-detail"),a=I("log"),C=I("history"),E=I("app-layout");return o(),B(E,null,{default:xe(()=>[e("div",bl,[e("div",vl,[e("div",{class:"py-2 md:inline-flex justify-between w-full gap-4",onKeydown:t[11]||(t[11]=re((...d)=>s.closeModal&&s.closeModal(...d),["esc"]))},[e("div",_l,[t[63]||(t[63]=e("span",{class:"z-10 flex font-normal text-gray-400 absolute bg-transparent text-base justify-center w-8"},[e("i",{class:"fas fa-search"})],-1)),y(e("input",{type:"text",placeholder:"Ticket/Customer",class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",id:"search",tabindex:"1","onUpdate:modelValue":t[0]||(t[0]=d=>s.search=d),onKeyup:t[1]||(t[1]=re((...d)=>s.searchIncident&&s.searchIncident(...d),["enter"]))},null,544),[[_,s.search]])]),e("div",wl,[t[65]||(t[65]=e("span",{class:"z-10 flex font-normal text-gray-400 absolute bg-transparent text-base justify-center w-8"},[e("i",{class:"fas fa-sliders-h"})],-1)),y(e("select",{"onUpdate:modelValue":t[2]||(t[2]=d=>s.incidentType=d),class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",tabindex:"3",onChange:t[3]||(t[3]=(...d)=>s.changeStatus&&s.changeStatus(...d))},t[64]||(t[64]=[e("option",{value:"default"},"All Ticket",-1),e("option",{value:"service_complaint"},"Service Complaint",-1),e("option",{value:"port_down"},"Port Down",-1),e("option",{value:"onsite_complaint"},"Onsite Complaint",-1),e("option",{value:"technical_complaint"},"Technical Complaint",-1),e("option",{value:"plan_change"},"Plan Change",-1),e("option",{value:"suspension"},"Suspension",-1),e("option",{value:"termination"},"Termination",-1)]),544),[[z,s.incidentType]])]),e("div",kl,[t[67]||(t[67]=e("span",{class:"z-10 flex font-normal text-gray-400 absolute bg-transparent text-base justify-center w-8"},[e("i",{class:"fas fa-sliders-h"})],-1)),y(e("select",{"onUpdate:modelValue":t[4]||(t[4]=d=>s.incidentBy=d),class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",tabindex:"4",onChange:t[5]||(t[5]=(...d)=>s.changeStatus&&s.changeStatus(...d))},[t[66]||(t[66]=e("option",{value:"default"},"All Member",-1)),(o(!0),l(A,null,G(f.noc,d=>(o(),l("option",{key:d.id,value:d.id},c(d.name),9,hl))),128))],544),[[z,s.incidentBy]])]),e("div",Cl,[t[69]||(t[69]=e("span",{class:"z-10 flex font-normal text-gray-400 absolute bg-transparent text-base justify-center w-8"},[e("i",{class:"fas fa-sliders-h"})],-1)),y(e("select",{"onUpdate:modelValue":t[6]||(t[6]=d=>s.incidentStatus=d),class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",tabindex:"5",onChange:t[7]||(t[7]=(...d)=>s.changeStatus&&s.changeStatus(...d))},t[68]||(t[68]=[e("option",{value:"0"},"All Status",-1),e("option",{value:"1"},"Open",-1),e("option",{value:"2"},"Escalated",-1),e("option",{value:"6"},"Pending",-1),e("option",{value:"5"},"Resolved",-1),e("option",{value:"3"},"Closed",-1),e("option",{value:"4"},"Deleted",-1)]),544),[[z,s.incidentStatus]])]),e("div",Tl,[N(u,{modelValue:s.incidentDate,"onUpdate:modelValue":t[8]||(t[8]=d=>s.incidentDate=d),range:{partialRange:!0},placeholder:"Ticket Date","enable-time-picker":!1,"model-type":"yyyy-MM-dd",id:"order_date",class:"text-gray-400 text-sm focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none"},null,8,["modelValue"])]),e("div",Sl,[e("button",{onClick:t[9]||(t[9]=(...d)=>s.changeStatus&&s.changeStatus(...d)),class:"text-center self-center w-full mt-2 md:w-auto md:mt-0 items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:border-litepie-primary-300 focus:ring focus:ring-litepie-primary-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition mr-1"},t[70]||(t[70]=[e("i",{class:"fas fa-search opacity-75 lg:ml-1 text-sm"},null,-1)]))]),e("div",Vl,[f.permission[0].write_incident==1?(o(),l("button",{key:0,onClick:t[10]||(t[10]=d=>s.newTicket()),class:"text-center self-center w-full mt-2 md:w-auto md:mt-0 items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:border-litepie-primary-300 focus:ring focus:ring-litepie-primary-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition mr-1",tabindex:"7"},t[71]||(t[71]=[D("Ticket"),e("i",{class:"fas fa-plus-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):r("",!0)])],32),f.permission[0].read_incident==1||f.permission[0].write_incident==1?(o(),l("div",Ul,[e("div",jl,[f.incidents.data?(o(),l("div",Dl,[e("table",Ml,[e("thead",Ol,[e("tr",null,[t[78]||(t[78]=e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},null,-1)),t[79]||(t[79]=e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No.",-1)),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[12]||(t[12]=d=>s.sortBy("date"))},t[72]||(t[72]=[D("Open Date "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[13]||(t[13]=d=>s.sortBy("code"))},t[73]||(t[73]=[D("Ticket "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[14]||(t[14]=d=>s.sortBy("ftth_id"))},t[74]||(t[74]=[D("User "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[15]||(t[15]=d=>s.sortBy("township_id"))},t[75]||(t[75]=[D("TSP "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[16]||(t[16]=d=>s.sortBy("type"))},t[76]||(t[76]=[D("Type "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[17]||(t[17]=d=>s.sortBy("incharge"))},t[77]||(t[77]=[D("Created "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),t[80]||(t[80]=e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status",-1))])]),e("tbody",Pl,[(o(!0),l(A,null,G(f.incidents.data,(d,Y)=>(o(),l("tr",{key:d.id,class:P([[d.id==s.selected_id?"bg-indigo-200":""],"cursor-pointer"]),onClick:$=>s.edit(d)},[e("td",Nl,[e("i",{class:P("fa fa-circle text-"+d.color)},null,2)]),e("td",Ll,c(Y+=f.incidents.from),1),e("td",Al,c(d.date)+" "+c(d.time),1),e("td",El,c(d.code),1),d.ftth_id?(o(),l("td",zl,c(d.ftth_id),1)):r("",!0),d.township_short?(o(),l("td",Bl,c(d.township_short),1)):r("",!0),e("td",Rl,c(d.type.replace("_"," ")),1),e("td",Fl,c(d.incharge.match(/\b\w/g).join("")),1),e("td",Hl,c(s.getStatus(d.status)),1)],10,Il))),128))])])])):r("",!0),f.incidents.total?(o(),l("span",Yl,[e("label",$l,c(f.incidents.data.length)+" Tickets in Current Page. Total Number of Tickets : "+c(f.incidents.total),1)])):r("",!0),f.incidents.links?(o(),l("span",Wl,[N(n,{class:"mt-4",links:f.incidents.links},null,8,["links"])])):r("",!0),f.incidents.data?r("",!0):(o(),l("div",Jl,[N(V)]))]),e("div",Kl,[e("div",Gl,[e("div",ql,[e("div",Ql,[t[81]||(t[81]=e("label",{class:"block text-sm font-normal text-center"},"Critical",-1)),e("button",{class:"block py-2 px-2 w-full bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-400 active:bg-red-600 focus:border-red-300 focus:ring focus:ring-red-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[18]||(t[18]=d=>s.showPriority("critical"))},c(f.critical),1)]),e("div",{class:"col-span-1",onClick:t[20]||(t[20]=d=>s.showPriority("high"))},[t[82]||(t[82]=e("label",{class:"block text-sm font-normal text-center"},"High",-1)),e("button",{class:"block py-2 px-2 w-full bg-yellow-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-500 active:bg-yellow-700 focus:border-yellow-300 focus:ring focus:ring-yellow-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[19]||(t[19]=d=>s.showPriority("high"))},c(f.high),1)]),e("div",{class:"col-span-1",onClick:t[22]||(t[22]=d=>s.showPriority("normal"))},[t[83]||(t[83]=e("label",{class:"block text-sm font-normal text-center"},"Normal",-1)),e("button",{class:"block py-2 px-2 w-full bg-yellow-400 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-300 active:bg-yellow-500 focus:border-yellow-300 focus:ring focus:ring-yellow-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[21]||(t[21]=d=>s.showPriority("normal"))},c(f.normal),1)]),e("div",Xl,[t[84]||(t[84]=e("label",{class:"block text-sm font-normal text-center"},"All",-1)),e("button",{class:"block py-2 px-2 w-full bg-indigo-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:border-indigo-300 focus:ring focus:ring-indigo-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[23]||(t[23]=d=>s.showPriority("all"))},c(f.critical+f.high+f.normal),1)])])]),N(j,{onShow_edit:s.alert_edit},null,8,["onShow_edit"])])])):(o(),l("div",Zl,t[85]||(t[85]=[e("span",{class:"px-20 py-10 center bg-white inline-flex"},[e("i",{class:"fa fas fa-exclamation-triangle fa-2x text-yellow-600 mr-2"}),e("label",{class:"font-bold mt-2 text-sm"}," You Don't Have Permission To Access This Page")],-1)])))])]),s.isOpen?(o(),l("div",er,[e("div",tr,[t[125]||(t[125]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),t[126]||(t[126]=D(" ​ ")),e("div",sr,[e("div",or,[e("div",lr,[e("div",rr,[e("div",ir,[t[90]||(t[90]=e("div",{class:"flex"},[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight mt-2"},"Ticket Detail")],-1)),e("div",nr,[t[89]||(t[89]=e("span",{class:"border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded-l-md text-sm shadow outline-none focus:outline-none"}," Ticket ID ",-1)),y(e("input",{type:"text","onUpdate:modelValue":t[24]||(t[24]=d=>s.form.code=d),name:"code",id:"code",class:"mr-2 border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded-r-md text-sm shadow outline-none focus:outline-none",disabled:""},null,512),[[_,s.form.code]]),e("ul",ar,[e("li",dr,[t[86]||(t[86]=e("label",{class:"block text-sm"},"Critical",-1)),y(e("input",{"onUpdate:modelValue":t[25]||(t[25]=d=>s.form.priority=d),name:"priority",value:"critical",type:"radio",class:"form-radio h-5 w-5 text-red-600 bg-red-600",title:"(1-4hrs)"},null,512),[[te,s.form.priority]])]),e("li",cr,[t[87]||(t[87]=e("label",{class:"block text-sm"},"High",-1)),y(e("input",{"onUpdate:modelValue":t[26]||(t[26]=d=>s.form.priority=d),name:"priority",value:"high",type:"radio",class:"form-radio h-5 w-5 text-yellow-600 bg-yellow-600",title:"(1-12hrs)"},null,512),[[te,s.form.priority]])]),e("li",mr,[t[88]||(t[88]=e("label",{class:"block text-sm"},"Normal",-1)),y(e("input",{"onUpdate:modelValue":t[27]||(t[27]=d=>s.form.priority=d),name:"priority",value:"normal",type:"radio",class:"form-radio h-5 w-5 text-yellow-300 bg-yellow-300",title:"(1-48hrs)"},null,512),[[te,s.form.priority]])])])])])]),e("div",pr,[e("div",ur,[e("ul",fr,[e("li",{class:P(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==1?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[28]||(t[28]=d=>s.tabClick(1)),"preserve-state":""},"Genaral")],2),e("li",{class:P(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==2?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[29]||(t[29]=d=>s.tabClick(2)),"preserve-state":""},"Tasks")],2),e("li",{class:P(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==3?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[30]||(t[30]=d=>s.tabClick(3)),"preserve-state":""},"Files")],2),e("li",{class:P(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==4?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[31]||(t[31]=d=>s.tabClick(4)),"preserve-state":""},"Customer Info")],2),e("li",{class:P(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==5?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[32]||(t[32]=d=>s.tabClick(5)),"preserve-state":""},"LOGS")],2),e("li",{class:P(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==6?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[33]||(t[33]=d=>s.tabClick(6)),"preserve-state":""},"History")],2)])]),e("div",gr,[e("div",{class:P(["p-4",[s.tab==1?"":"hidden"]])},[e("div",yr,[t[116]||(t[116]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"},"Incident Detail : ")])],-1)),e("div",xr,[e("div",br,[y(e("input",{type:"date","onUpdate:modelValue":t[34]||(t[34]=d=>s.form.date=d),name:"date",id:"date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.date]])]),i.$page.props.errors.date?(o(),l("p",vr,c(i.$page.props.errors.date),1)):r("",!0)]),e("div",_r,[e("div",wr,[y(e("input",{type:"time","onUpdate:modelValue":t[35]||(t[35]=d=>s.form.time=d),name:"time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.time]])]),i.$page.props.errors.time?(o(),l("p",kr,c(i.$page.props.errors.time),1)):r("",!0)]),t[117]||(t[117]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," User ID : ")])],-1)),e("div",hr,[f.customers.length!==0?(o(),l("div",Cr,[N(v,{"deselect-label":"Selected already",options:f.customers,"track-by":"id",label:"ftth_id",modelValue:s.form.customer_id,"onUpdate:modelValue":t[36]||(t[36]=d=>s.form.customer_id=d),"allow-empty":!1},null,8,["options","modelValue"])])):r("",!0),i.$page.props.errors.customer?(o(),l("p",Tr,c(i.$page.props.errors.customer),1)):r("",!0)]),t[118]||(t[118]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"incharge",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Person Incharge : ")])],-1)),e("div",Sr,[f.team.length!==0?(o(),l("div",Vr,[N(v,{"deselect-label":"Selected already",options:f.team,"track-by":"id",label:"name",modelValue:s.form.incharge_id,"onUpdate:modelValue":t[37]||(t[37]=d=>s.form.incharge_id=d),"allow-empty":!1,disabled:!0},null,8,["options","modelValue"])])):r("",!0),i.$page.props.errors.incharge?(o(),l("p",Ur,c(i.$page.props.errors.incharge),1)):r("",!0)]),t[119]||(t[119]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"type",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Type : ")])],-1)),e("div",jr,[e("div",Dr,[y(e("select",{"onUpdate:modelValue":t[38]||(t[38]=d=>s.form.type=d),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",required:"",onChange:t[39]||(t[39]=d=>s.form.topic=null)},t[91]||(t[91]=[e("option",{value:"default"},"Please Choose Ticket Type",-1),e("option",{value:"service_complaint"},"Service Complaint",-1),e("option",{value:"port_down"},"Port Down",-1),e("option",{value:"onsite_complaint"},"Onsite Complaint",-1),e("option",{value:"technical_complaint"},"Technical Complaint",-1),e("option",{value:"plan_change"},"Plan Change",-1),e("option",{value:"suspension"},"Suspension",-1),e("option",{value:"termination"},"Termination",-1)]),544),[[z,s.form.type]])]),i.$page.props.errors.type?(o(),l("p",Mr,c(i.$page.props.errors.type),1)):r("",!0)]),s.form.type=="service_complaint"||s.form.type=="onsite_complaint"|s.form.type=="technical_complaint"?(o(),l("div",Or,t[92]||(t[92]=[e("div",{class:"mt-1 flex"},[e("label",{for:"topic",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Topic : ")],-1)]))):r("",!0),s.form.type=="service_complaint"?(o(),l("div",Pr,[e("div",Ir,[y(e("select",{"onUpdate:modelValue":t[40]||(t[40]=d=>s.form.topic=d),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[93]||(t[93]=[e("option",{value:"los_redlight"},"LOS Redlight",-1),e("option",{value:"pon_blinking"},"PON Blinking",-1),e("option",{value:"high_loss"},"High Loss",-1),e("option",{value:"dn_down"},"DN Down",-1),e("option",{value:"sn_down"},"SN Down",-1),e("option",{value:"relocation"},"Relocation",-1),e("option",{value:"maintenance"},"Maintenance",-1),e("option",{value:"other"},"Other",-1)]),512),[[z,s.form.topic]])]),i.$page.props.errors.topic?(o(),l("p",Nr,c(i.$page.props.errors.topic),1)):r("",!0)])):r("",!0),s.form.type=="onsite_complaint"?(o(),l("div",Lr,[e("div",Ar,[y(e("select",{"onUpdate:modelValue":t[41]||(t[41]=d=>s.form.topic=d),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[94]||(t[94]=[e("option",{value:"no_internet"},"No Internet",-1),e("option",{value:"slow_performance"},"Slow Performance",-1),e("option",{value:"wifi_issue"},"Wifi Issue",-1),e("option",{value:"coverage_issue"},"Coverage Issue",-1),e("option",{value:"onu_issue"},"ONU issue",-1),e("option",{value:"home_router_issue"},"Home Router Issue",-1),e("option",{value:"password_change"},"Password Change",-1),e("option",{value:"other"},"Other",-1)]),512),[[z,s.form.topic]])]),i.$page.props.errors.topic?(o(),l("p",Er,c(i.$page.props.errors.topic),1)):r("",!0)])):r("",!0),s.form.type=="technical_complaint"?(o(),l("div",zr,[e("div",Br,[y(e("select",{"onUpdate:modelValue":t[42]||(t[42]=d=>s.form.topic=d),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[95]||(t[95]=[e("option",{value:"website_delay_issue"},"Website Delay Issue",-1),e("option",{value:"gaming_delay_issue"},"Gaming Delay Issue",-1),e("option",{value:"application_delay_issue"},"Application Delay Issue",-1),e("option",{value:"other"},"Other",-1)]),512),[[z,s.form.topic]])]),i.$page.props.errors.topic?(o(),l("p",Rr,c(i.$page.props.errors.topic),1)):r("",!0)])):r("",!0),t[120]||(t[120]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Status : ")])],-1)),e("div",Fr,[e("div",Hr,[y(e("select",{"onUpdate:modelValue":t[43]||(t[43]=d=>s.form.status=d),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[96]||(t[96]=[e("option",{value:"1"},"Open",-1),e("option",{value:"6"},"Pending",-1),e("option",{value:"2",disabled:""},"Escalated",-1),e("option",{value:"5",disabled:""},"Resolved",-1),e("option",{value:"3"},"Closed",-1)]),512),[[z,s.form.status]])]),i.$page.props.errors.status?(o(),l("p",Yr,c(i.$page.props.errors.status),1)):r("",!0)]),s.form.status==3?(o(),l("div",$r,t[97]||(t[97]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Close Period : ")],-1)]))):r("",!0),s.form.status==3?(o(),l("div",Wr,[e("div",Jr,[y(e("input",{type:"date","onUpdate:modelValue":t[44]||(t[44]=d=>s.form.close_date=d),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.close_date]])]),i.$page.props.errors.close_date?(o(),l("p",Kr,c(i.$page.props.errors.close_date),1)):r("",!0)])):r("",!0),s.form.status==3?(o(),l("div",Gr,[e("div",qr,[y(e("input",{type:"time","onUpdate:modelValue":t[45]||(t[45]=d=>s.form.close_time=d),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.close_time]])]),i.$page.props.errors.close_time?(o(),l("p",Qr,c(i.$page.props.errors.close_time),1)):r("",!0)])):r("",!0),s.form.status==5?(o(),l("div",Xr,t[98]||(t[98]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Resolved Period : ")],-1)]))):r("",!0),s.form.status==5?(o(),l("div",Zr,[e("div",ei,[y(e("input",{type:"date","onUpdate:modelValue":t[46]||(t[46]=d=>s.form.resolved_date=d),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.resolved_date]])]),i.$page.props.errors.resolved_date?(o(),l("p",ti,c(i.$page.props.errors.resolved_date),1)):r("",!0)])):r("",!0),s.form.status==5?(o(),l("div",si,[e("div",oi,[y(e("input",{type:"time","onUpdate:modelValue":t[47]||(t[47]=d=>s.form.resolved_time=d),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.resolved_time]])]),i.$page.props.errors.resolved_time?(o(),l("p",li,c(i.$page.props.errors.resolved_time),1)):r("",!0)])):r("",!0),s.form.type=="suspension"?(o(),l("div",ri,t[99]||(t[99]=[e("div",{class:"mt-1 flex"},[e("label",{for:"suspense",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Suspense Period : ")],-1)]))):r("",!0),s.form.type=="suspension"?(o(),l("div",ii,[e("div",ni,[e("div",ai,[e("div",di,[t[100]||(t[100]=e("span",{class:"-mt-1 z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-pause"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[48]||(t[48]=d=>s.form.start_date=d),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),i.$page.props.errors.start_date?(o(),l("p",ci,c(i.$page.props.errors.start_date),1)):r("",!0)]),e("div",mi,[e("div",pi,[t[101]||(t[101]=e("span",{class:"-mt-1 z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[49]||(t[49]=d=>s.form.end_date=d),name:"end_date",id:"end_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.end_date]])]),i.$page.props.errors.end_date?(o(),l("p",ui,c(i.$page.props.errors.end_date),1)):r("",!0)])])])):r("",!0),s.form.type=="resume"?(o(),l("div",fi,t[102]||(t[102]=[e("div",{class:"mt-1 flex"},[e("label",{for:"resume",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Resume Date : ")],-1)]))):r("",!0),s.form.type=="resume"?(o(),l("div",gi,[e("div",yi,[t[103]||(t[103]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[50]||(t[50]=d=>s.form.start_date=d),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),i.$page.props.errors.resume?(o(),l("p",xi,c(i.$page.props.errors.start_date),1)):r("",!0)])):r("",!0),s.form.type=="termination"?(o(),l("div",bi,t[104]||(t[104]=[e("div",{class:"mt-1 flex"},[e("label",{for:"termination",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Termination Date : ")],-1)]))):r("",!0),s.form.type=="termination"?(o(),l("div",vi,[e("div",_i,[t[105]||(t[105]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-stop"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[51]||(t[51]=d=>s.form.start_date=d),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),i.$page.props.errors.start_date?(o(),l("p",wi,c(i.$page.props.errors.start_date),1)):r("",!0)])):r("",!0),s.form.type=="relocation"?(o(),l("div",ki,t[106]||(t[106]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Address : ")],-1)]))):r("",!0),s.form.type=="relocation"?(o(),l("div",hi,[e("div",Ci,[y(e("textarea",{"onUpdate:modelValue":t[52]||(t[52]=d=>s.form.new_address=d),name:"new_address",id:"new_address",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"}," ",512),[[_,s.form.new_address]])]),i.$page.props.errors.new_address?(o(),l("p",Ti,c(i.$page.props.errors.new_address),1)):r("",!0)])):r("",!0),s.form.type=="relocation"?(o(),l("div",Si,t[107]||(t[107]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Township : ")],-1)]))):r("",!0),s.form.type=="relocation"?(o(),l("div",Vi,[f.townships.length!==0?(o(),l("div",Ui,[N(v,{"deselect-label":"Selected already",options:f.townships,"track-by":"id",label:"name",modelValue:s.form.new_township,"onUpdate:modelValue":t[53]||(t[53]=d=>s.form.new_township=d),"allow-empty":!1},null,8,["options","modelValue"])])):r("",!0),i.$page.props.errors.new_township?(o(),l("p",ji,c(i.$page.props.errors.new_township),1)):r("",!0)])):r("",!0),s.form.type=="relocation"?(o(),l("div",Di,t[108]||(t[108]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_latlong",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Location : ")],-1)]))):r("",!0),s.form.type=="relocation"?(o(),l("div",Mi,[e("div",Oi,[e("div",Pi,[e("div",Ii,[t[109]||(t[109]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[54]||(t[54]=d=>s.form.latitude=d),name:"latitude",id:"latitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Latitude"},null,512),[[_,s.form.latitude]])]),i.$page.props.errors.latitude?(o(),l("p",Ni,c(i.$page.props.errors.latitude),1)):r("",!0)]),e("div",Li,[e("div",Ai,[t[110]||(t[110]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[55]||(t[55]=d=>s.form.longitude=d),name:"longitude",id:"longitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Longitude"},null,512),[[_,s.form.longitude]])]),i.$page.props.errors.longitude?(o(),l("p",Ei,c(i.$page.props.errors.longitude),1)):r("",!0)])])])):r("",!0),s.form.type=="relocation"?(o(),l("div",zi,t[111]||(t[111]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):r("",!0),s.form.type=="relocation"?(o(),l("div",Bi,[e("div",Ri,[t[112]||(t[112]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-truck"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[56]||(t[56]=d=>s.form.start_date=d),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),i.$page.props.errors.start_date?(o(),l("p",Fi,c(i.$page.props.errors.start_date),1)):r("",!0)])):r("",!0),s.form.type=="plan_change"?(o(),l("div",Hi,t[113]||(t[113]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_package",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Package: ")],-1)]))):r("",!0),s.form.type=="plan_change"?(o(),l("div",Yi,[f.packages.length!==0?(o(),l("div",$i,[N(v,{"deselect-label":"Selected already",options:f.packages,"track-by":"id",label:"item_data",modelValue:s.form.package_id,"onUpdate:modelValue":t[57]||(t[57]=d=>s.form.package_id=d),"allow-empty":!1},null,8,["options","modelValue"])])):r("",!0),i.$page.props.errors.package?(o(),l("p",Wi,c(i.$page.props.errors.package),1)):r("",!0)])):r("",!0),s.form.type=="plan_change"?(o(),l("div",Ji,t[114]||(t[114]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):r("",!0),s.form.type=="plan_change"?(o(),l("div",Ki,[e("div",Gi,[t[115]||(t[115]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-random"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[58]||(t[58]=d=>s.form.start_date=d),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),i.$page.props.errors.start_date?(o(),l("p",qi,c(i.$page.props.errors.start_date),1)):r("",!0)])):r("",!0),t[121]||(t[121]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"detail",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Detail : ")])],-1)),e("div",Qi,[e("div",Xi,[y(e("textarea",{"onUpdate:modelValue":t[59]||(t[59]=d=>s.form.description=d),name:"detail",id:"detail",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"}," ",512),[[_,s.form.description]])]),i.$page.props.errors.description?(o(),l("p",Zi,c(i.$page.props.errors.description),1)):r("",!0)])])],2),e("div",{class:P(["p-4",[s.tab==2?"":"hidden"]])},[(o(),B(Q,null,[s.tab==2?(o(),B(S,{data:s.selected_id,key:s.page_update},null,8,["data"])):r("",!0)],1024))],2),e("div",{class:P(["p-4",[s.tab==3?"":"hidden"]])},[(o(),B(Q,null,[s.tab==3?(o(),B(U,{data:s.selected_id,key:s.page_update},null,8,["data"])):r("",!0)],1024))],2),e("div",{class:P(["p-4",[s.tab==4?"":"hidden"]])},[(o(),B(Q,null,[s.tab==4?(o(),B(b,{data:s.selected_id,key:s.page_update},null,8,["data"])):r("",!0)],1024))],2),e("div",{class:P(["p-4",[s.tab==5?"":"hidden"]])},[(o(),B(Q,null,[s.tab==5?(o(),B(a,{data:s.selected_id,key:s.page_update},null,8,["data"])):r("",!0)],1024))],2),e("div",{class:P(["p-4",[s.tab==6?"":"hidden"]])},[(o(),B(Q,null,[s.tab==6?(o(),B(C,{data:s.selected_id,key:s.page_update},null,8,["data"])):r("",!0)],1024))],2)])])])]),e("div",{class:P(["bg-indigo-50 px-3 py-3 sm:px-6 sm:flex sm:flex-row",[s.tab==1?"justify-between":"justify-end"]])},[s.tab==1&&f.permission[0].write_incident==1?(o(),l("div",en,[e("button",{class:"inline-flex items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-indigo-900 disabled:opacity-25 transition mr-1",onClick:t[60]||(t[60]=d=>s.submit())},[s.editMode?(o(),l("span",tn,"Update")):r("",!0),s.editMode==!1?(o(),l("span",sn,"Save")):r("",!0),t[122]||(t[122]=e("i",{class:"fas fa-save opacity-75 lg:ml-1 text-sm"},null,-1))]),y(e("button",{onClick:t[61]||(t[61]=(...d)=>s.deleteIncident&&s.deleteIncident(...d)),class:"inline-flex items-center px-4 py-3 bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-400 active:bg-red-600 focus:outline-none focus:border-gray-500 disabled:opacity-25 transition mr-1"},t[123]||(t[123]=[D("Delete"),e("i",{class:"lg:ml-1 fas fa-trash opacity-75 text-sm"},null,-1)]),512),[[be,s.selected_id]])])):r("",!0),e("div",on,[e("button",{onClick:t[62]||(t[62]=(...d)=>s.closeModal&&s.closeModal(...d)),type:"button",class:"inline-flex items-center px-4 py-3 bg-gray-200 border border-transparent rounded-md font-semibold text-xs text-gray-600 uppercase tracking-widest hover:bg-gray-300 active:bg-gray-400 focus:outline-none focus:border-gray-500 disabled:opacity-25 transition"},t[124]||(t[124]=[D("Close "),e("i",{class:"lg:ml-1 fas fa-times-circle opacity-75 text-sm"},null,-1)]))])],2)])])],512)):r("",!0),s.loading?(o(),l("div",ln,t[127]||(t[127]=[e("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),e("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),e("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):r("",!0)]),_:1})}const yn=W(xl,[["render",rn]]);export{yn as default};
