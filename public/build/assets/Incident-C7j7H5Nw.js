import{A as ve,N as _e}from"./NoData-DOmRFlLn.js";import{_ as we}from"./InputLabel-DRb49AJ8.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as w,q as K,o as l,d as n,a as e,f as T,p as ke,F as E,g as q,e as i,t as d,C as H,T as de,B as ce,s as B,k as y,x as _,b as z,A as R,O as re,N as M,J as he,D as G,P as Ce,c as F,w as Te,K as ie,L as se,n as P,M as Z,z as Se}from"./app-BpUoshh9.js";import{M as le}from"./vue3-multiselect.umd.min-SsDtYRO9.js";import{U as Ve}from"./Upload-CKh6OPYj.js";import{P as Ue}from"./Pagination-B3nZN2FW.js";import{V as je}from"./main-BpjBpLux.js";import"./DropdownLink-Ch80CFF4.js";const De={components:{Label:we},name:"IncidentAlert",emits:["show_edit"],props:{tableHeigh:{type:String}},setup(r,t){let f=w("Loading .."),s=w("Loading .."),x=w("code"),v=w("asc");const u=async()=>{let b=`/incidentOverdue?sortBy=${x.value}&order=${v.value}`;try{return await(await fetch(b)).json()}catch(p){console.error(p)}},a=async()=>{let b="/incidentRemain";console.log(b);try{return await(await fetch(b)).json()}catch(p){console.error(p)}};function h(b){let p=b%3600/60,U=b%(24*3600)/3600,A=b/(24*3600),I=null;if(b>=86400){let o=A-Math.floor(A);A=A-o,o=o*24;let L=o-Math.floor(o);o=o-L,o!=0?I=A+" d, "+o+" hr":I=A+" d"}else if(b>1440){let o=U-Math.floor(U),L=U-o;o=Math.round(o*60),L!=0?I=L+" hr,"+o+" m":I=o+" m"}else I=Math.round(p)+" m";return I}function V(b){let p=2592e3;return p-b/100*p}function S(b){t.emit("show_edit",b)}function j(){u().then(b=>{f.value=b}),a().then(b=>{s.value=b})}function N(b){v.value=v.value==="asc"?"desc":"asc",x.value=b,t.emit("sort_change",b,v.value),j()}return K(()=>{j()}),{bundle:f,remain:s,getList:j,getDay:h,percenttosecond:V,doEdit:S,changeSort:N}}},Ie={class:"w-full flex justify-between text-sm px-2"},Oe={key:0},Pe={class:"min-w-full divide-y divide-gray-200 mt-1 shadow-xl"},Me={class:"bg-gray-50 text-center inline-grid grid-cols-4 gap-2rounded-t-lg w-full"},Ne=["onClick"],Ae={class:"px-2 py-2 whitespace-nowrap col-span-1"},Le={class:"px-2 py-2 whitespace-nowrap col-span-1"},Be={class:"px-2 py-2 whitespace-nowrap col-span-1"};function ze(r,t,f,s,x,v){return l(),n(E,null,[e("div",Ie,[t[5]||(t[5]=e("label",{class:"mt-5 uppercase text-md"}," Ticket Overdue Hours Chart",-1)),e("button",{onClick:t[0]||(t[0]=u=>s.getList()),class:"my-2 ml-2 align-right text-center items-center px-3 py-2 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[4]||(t[4]=[e("i",{class:"fas fa-sync opacity-75 text-sm"},null,-1)]))]),s.bundle?(l(),n("div",Oe,[t[10]||(t[10]=e("h2",{class:"m-2 uppercase text-md"},null,-1)),e("div",Pe,[e("div",Me,[t[9]||(t[9]=e("div",{class:"px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1"},"Ticket ID ",-1)),e("div",{class:"px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1 cursor-pointer",onClick:t[1]||(t[1]=u=>s.changeSort("over"))},t[6]||(t[6]=[T("Overdue "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("div",{class:"px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1 cursor-pointer",onClick:t[2]||(t[2]=u=>s.changeSort("actual"))},t[7]||(t[7]=[T("Actual Hrs "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("div",{class:"px-2 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider col-span-1 cursor-pointer",onClick:t[3]||(t[3]=u=>s.changeSort("sla"))},t[8]||(t[8]=[T("Based SLA "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)]))]),e("div",{class:"bg-white rounded-b-lg divide-y divide-gray-200 text-sm text-center overflow-auto block scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white w-full",style:ke({"max-height":f.tableHeigh-170+"px"})},[(l(!0),n(E,null,q(s.bundle,u=>(l(),n("div",{key:u.id,class:"cursor-pointer inline-grid grid-cols-4 gap-2 w-full"},[e("div",{class:"px-2 py-2 whitespace-nowrap col-span-1",onClick:a=>s.doEdit(u)},d(u.code),9,Ne),e("div",Ae,d(s.getDay(u.over)),1),e("div",Le,d(s.getDay(u.diff)),1),e("div",Be,d(u.percentage),1)]))),128))],4)])])):i("",!0)],64)}const Ee=J(De,[["render",ze],["__scopeId","data-v-b3f41ee1"]]),Re={name:"IncidentDetail",emits:["loading"],emits:["selected_id"],components:{Multiselect:le},props:{errors:Object,data:Object,parentform:Object},setup(r,t){const f=H("noc"),s=H("team"),x=H("user"),v=H("incidents"),u=H("customers"),a=H("townships"),h=H("packages"),V=H("parent_form");let S=w(),j=w(!1),N=w(!1),b=w(null);const p=de({id:null,code:null,priority:"normal",customer_id:null,incharge_id:s.filter(m=>m.id==x.id)[0],type:"default",topic:null,status:1,start_date:null,end_date:null,new_address:null,new_township:null,latitude:null,longitude:null,package_id:null,description:null,date:null,time:null,close_date:null,close_time:null,resolved_date:null,resolved_time:null});function U(){b.value=null,j.value=!1,p.id="",p.code="",p.priority="normal",p.customer_id="",p.incharge_id=s.filter(m=>m.id==x.id)[0],p.type="default",p.topic="",p.status=1,p.start_date="",p.end_date="",p.new_address="",p.new_township="",p.latitude="",p.longitude="",p.package_id="",p.description="",p.date="",p.time="",p.close_date="",p.close_time="",p.resolved_date="",p.resolved_time=""}function A(){j.value!=!0?(p._method="POST",M.post("/incident",p,{preserveState:!0,onSuccess:m=>{b.value=m.props.response.id;let C=v.data.filter(D=>D.id==b.value)[0];j.value=!0,t.emit("selected_id",b.value),t.emit("loading",!1),C!==void 0&&(console.log("response is : "+C),I(C)),Toast.fire({icon:"success",title:m.props.flash.message})},onError:m=>{t.emit("loading",!1),console.log("error ..")},onStart:m=>{t.emit("loading",!0)}})):(p._method="PUT",M.post("/incident/"+p.id,p,{onSuccess:m=>{Toast.fire({icon:"success",title:m.props.flash.message}),t.emit("loading",!1)},onError:m=>{t.emit("loading",!1),console.log("error .."+m)},onStart:m=>{t.emit("loading",!0)}}))}function I(m){let C=null;b.value=m.id,j.value=!0,m.location!=null&&(C=m.location.split(",",2),p.latitude=C[0],p.longitude=C[1]),p.id=m.id,p.code=m.code,p.priority=m.priority,p.customer_id=u.filter(D=>D.id==m.customer_id)[0],p.incharge_id=f.filter(D=>D.id==m.incharge_id)[0],p.type=m.type,p.topic=m.topic,p.status=m.status,p.start_date=m.start_date,p.end_date=m.end_date,p.new_address=m.new_address,p.new_township=a.filter(D=>D.id==m.new_township)[0],p.package_id=h.filter(D=>D.id==m.package_id)[0],p.description=m.description,p.date=m.date,p.time=m.time,p.close_date=m.close_date,p.close_time=m.close_time,p.resolved_date=m.resolved_date,p.resolved_time=m.resolved_time}function o(m){j.value=!0,p.priority=m.priority}function L(m){let C="Open";return m==1?C="Open":m==2?C="Escalated":m==3?C="Closed":m==4?C="Deleted":m==5&&(C="Resolved"),C}function Y(m){confirm("Are you sure want to remove?")&&(p._method="PUT",p.status=4,M.post("/incident/"+p.id,p,{onSuccess:C=>{Toast.fire({icon:"success",title:C.props.flash.message})},onError:C=>{console.log("error .."+C)}}))}const W=async()=>{let m="/getIncident/"+r.data;console.log(m);try{return t.emit("loading",!0),await(await fetch(m)).json()}catch(C){t.emit("loading",!1),console.error(C)}},g=()=>{W().then(m=>{S.value=m})};return K(()=>{console.log("Incident Detail - onMounted"),r.data&&(b.value=r.data,W().then(m=>{t.emit("loading",!1),m!==void 0?(console.log("appending response"),I(m),console.log("show parent form"),console.log(V),V&&o(V)):console.log("not appending response")})),h.map(function(m){return m.item_data=`${m.speed} Mbps - ${m.name} - ${m.contract_period} Months`})}),ce(()=>{console.log("Incident Detail - onUpdated"),h.map(function(m){return m.item_data=`${m.speed} Mbps - ${m.name} - ${m.contract_period} Months`})}),{loading:N,getIncident:W,calculate:g,deleteIncident:Y,doSubmit:A,getStatus:L,form:p,clearform:U,customers:u,team:s,townships:a,packages:h,openForm:o,editMode:j,edit:I}}},Fe={class:"grid grid-cols-5 gap-2"},He={class:"py-2 col-span-2 sm:col-span-2"},Ye={class:"mt-1 flex rounded-md shadow-sm"},We={key:0,class:"mt-2 text-sm text-red-500"},Je={class:"py-2 col-span-2 sm:col-span-2"},Ke={class:"mt-1 flex rounded-md shadow-sm"},$e={key:0,class:"mt-2 text-sm text-red-500"},Ge={class:"py-2 col-span-4 sm:col-span-4"},qe={key:0,class:"mt-1 flex rounded-md shadow-sm"},Qe={key:1,class:"mt-2 text-sm text-red-500"},Xe={class:"py-2 col-span-4 sm:col-span-4"},Ze={key:0,class:"mt-1 flex rounded-md shadow-sm"},et={key:1,class:"mt-2 text-sm text-red-500"},tt={class:"py-2 col-span-4 sm:col-span-4"},st={class:"mt-1 flex"},ot={key:0,class:"mt-2 text-sm text-red-500"},lt={key:0,class:"py-2 col-span-1 sm:col-span-1"},nt={key:1,class:"py-2 col-span-4 sm:col-span-4"},rt={class:"mt-1 flex"},it={key:0,class:"mt-2 text-sm text-red-500"},at={class:"py-2 col-span-4 sm:col-span-4"},dt={class:"mt-1 flex"},ct={key:0,class:"mt-2 text-sm text-red-500"},mt={key:2,class:"py-2 col-span-1 sm:col-span-1"},pt={key:3,class:"py-2 col-span-2 sm:col-span-2"},ut={class:"mt-1 flex rounded-md shadow-sm"},ft={key:0,class:"mt-2 text-sm text-red-500"},gt={key:4,class:"py-2 col-span-2 sm:col-span-2"},yt={class:"mt-1 flex rounded-md shadow-sm"},xt={key:0,class:"mt-2 text-sm text-red-500"},bt={key:5,class:"py-2 col-span-1 sm:col-span-1"},vt={key:6,class:"py-2 col-span-2 sm:col-span-2"},_t={class:"mt-1 flex rounded-md shadow-sm"},wt={key:0,class:"mt-2 text-sm text-red-500"},kt={key:7,class:"py-2 col-span-2 sm:col-span-2"},ht={class:"mt-1 flex rounded-md shadow-sm"},Ct={key:0,class:"mt-2 text-sm text-red-500"},Tt={key:8,class:"py-2 col-span-1 sm:col-span-1"},St={key:9,class:"py-2 col-span-4 sm:col-span-4"},Vt={class:"grid grid-cols-2 gap-2"},Ut={class:"col-span-1 sm:col-span-1"},jt={class:"mt-1 flex rounded-md shadow-sm"},Dt={key:0,class:"mt-2 text-sm text-red-500"},It={class:"col-span-1 sm:col-span-1"},Ot={class:"mt-1 flex rounded-md shadow-sm"},Pt={key:0,class:"mt-2 text-sm text-red-500"},Mt={key:10,class:"py-2 col-span-1 sm:col-span-1"},Nt={key:11,class:"py-2 col-span-4 sm:col-span-4"},At={class:"mt-1 flex rounded-md shadow-sm"},Lt={key:0,class:"mt-2 text-sm text-red-500"},Bt={key:12,class:"py-2 col-span-1 sm:col-span-1"},zt={key:13,class:"py-2 col-span-4 sm:col-span-4"},Et={class:"mt-1 flex rounded-md shadow-sm"},Rt={key:0,class:"mt-2 text-sm text-red-500"},Ft={key:14,class:"py-2 col-span-1 sm:col-span-1"},Ht={key:15,class:"py-2 col-span-4 sm:col-span-4"},Yt={class:"mt-1 flex"},Wt={key:0,class:"mt-2 text-sm text-red-500"},Jt={key:16,class:"py-2 col-span-1 sm:col-span-1"},Kt={key:17,class:"py-2 col-span-4 sm:col-span-4"},$t={key:0,class:"mt-1 flex rounded-md shadow-sm"},Gt={key:1,class:"mt-2 text-sm text-red-500"},qt={key:18,class:"py-2 col-span-1 sm:col-span-1"},Qt={key:19,class:"py-2 col-span-4 sm:col-span-4"},Xt={class:"grid grid-cols-2 gap-2"},Zt={class:"col-span-1 sm:col-span-1"},es={class:"mt-1 flex rounded-md shadow-sm"},ts={key:0,class:"mt-2 text-sm text-red-500"},ss={class:"col-span-1 sm:col-span-1"},os={class:"mt-1 flex rounded-md shadow-sm"},ls={key:0,class:"mt-2 text-sm text-red-500"},ns={key:20,class:"py-2 col-span-1 sm:col-span-1"},rs={key:21,class:"py-2 col-span-4 sm:col-span-4"},is={class:"mt-1 flex rounded-md shadow-sm"},as={key:0,class:"mt-2 text-sm text-red-500"},ds={key:22,class:"py-2 col-span-1 sm:col-span-1"},cs={key:23,class:"py-2 col-span-4 sm:col-span-4"},ms={key:0,class:"mt-1 flex rounded-md shadow-sm"},ps={key:1,class:"mt-2 text-sm text-red-500"},us={key:24,class:"py-2 col-span-1 sm:col-span-1"},fs={key:25,class:"py-2 col-span-4 sm:col-span-4"},gs={class:"mt-1 flex rounded-md shadow-sm"},ys={key:0,class:"mt-2 text-sm text-red-500"},xs={class:"py-2 col-span-4 sm:col-span-4"},bs={class:"mt-1 flex"},vs={key:0,class:"mt-2 text-sm text-red-500"},_s={key:0,class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function ws(r,t,f,s,x,v){const u=B("multiselect");return l(),n(E,null,[e("div",Fe,[t[46]||(t[46]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"},"Incident Detail : ")])],-1)),e("div",He,[e("div",Ye,[y(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=a=>s.form.date=a),name:"date",id:"date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.date]])]),r.$page.props.errors.date?(l(),n("p",We,d(r.$page.props.errors.date),1)):i("",!0)]),e("div",Je,[e("div",Ke,[y(e("input",{type:"time","onUpdate:modelValue":t[1]||(t[1]=a=>s.form.time=a),name:"time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.time]])]),r.$page.props.errors.time?(l(),n("p",$e,d(r.$page.props.errors.time),1)):i("",!0)]),t[47]||(t[47]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," User ID : ")])],-1)),e("div",Ge,[s.customers.length!==0?(l(),n("div",qe,[z(u,{"deselect-label":"Selected already",options:s.customers,"track-by":"id",label:"ftth_id",modelValue:s.form.customer_id,"onUpdate:modelValue":t[2]||(t[2]=a=>s.form.customer_id=a),"allow-empty":!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.customer?(l(),n("p",Qe,d(r.$page.props.errors.customer),1)):i("",!0)]),t[48]||(t[48]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"incharge",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Person Incharge : ")])],-1)),e("div",Xe,[s.team.length!==0?(l(),n("div",Ze,[z(u,{"deselect-label":"Selected already",options:s.team,"track-by":"id",label:"name",modelValue:s.form.incharge_id,"onUpdate:modelValue":t[3]||(t[3]=a=>s.form.incharge_id=a),"allow-empty":!1,disabled:!0},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.incharge?(l(),n("p",et,d(r.$page.props.errors.incharge),1)):i("",!0)]),t[49]||(t[49]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"type",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Type : ")])],-1)),e("div",tt,[e("div",st,[y(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>s.form.type=a),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",required:""},t[23]||(t[23]=[re('<option value="default">Please Choose Ticket Type</option><option value="service_complaint">Service Complaint</option><option value="gaming_issue">Gaming Issue</option><option value="relocation">Relocation</option><option value="plan_change">Plan Change</option><option value="information_update">Information Update</option><option value="suspension">Suspension</option><option value="resume">Resume</option><option value="termination">Termination</option>',9)]),512),[[R,s.form.type]])]),r.$page.props.errors.type?(l(),n("p",ot,d(r.$page.props.errors.type),1)):i("",!0)]),s.form.type=="service_complaint"?(l(),n("div",lt,t[24]||(t[24]=[e("div",{class:"mt-1 flex"},[e("label",{for:"topic",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Topic : ")],-1)]))):i("",!0),s.form.type=="service_complaint"?(l(),n("div",nt,[e("div",rt,[y(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>s.form.topic=a),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[25]||(t[25]=[re('<option value="no_internet">No Internet</option><option value="los_redlight">LOS Redlight</option><option value="slow_performance">Slow Performance</option><option value="wifi_issue">Wifi Issue</option><option value="onu_issue">ONU Issue</option><option value="password_change">Password Changed</option><option value="other">Other</option>',7)]),512),[[R,s.form.topic]])]),r.$page.props.errors.topic?(l(),n("p",it,d(r.$page.props.errors.topic),1)):i("",!0)])):i("",!0),t[50]||(t[50]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Status : ")])],-1)),e("div",at,[e("div",dt,[y(e("select",{"onUpdate:modelValue":t[6]||(t[6]=a=>s.form.status=a),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[26]||(t[26]=[e("option",{value:"1"},"Open",-1),e("option",{value:"2",disabled:""},"Escalated",-1),e("option",{value:"5",disabled:""},"Resolved",-1),e("option",{value:"3"},"Closed",-1)]),512),[[R,s.form.status]])]),r.$page.props.errors.status?(l(),n("p",ct,d(r.$page.props.errors.status),1)):i("",!0)]),s.form.status==3?(l(),n("div",mt,t[27]||(t[27]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Close Period : ")],-1)]))):i("",!0),s.form.status==3?(l(),n("div",pt,[e("div",ut,[y(e("input",{type:"date","onUpdate:modelValue":t[7]||(t[7]=a=>s.form.close_date=a),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.close_date]])]),r.$page.props.errors.close_date?(l(),n("p",ft,d(r.$page.props.errors.close_date),1)):i("",!0)])):i("",!0),s.form.status==3?(l(),n("div",gt,[e("div",yt,[y(e("input",{type:"time","onUpdate:modelValue":t[8]||(t[8]=a=>s.form.close_time=a),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.close_time]])]),r.$page.props.errors.close_time?(l(),n("p",xt,d(r.$page.props.errors.close_time),1)):i("",!0)])):i("",!0),s.form.status==5?(l(),n("div",bt,t[28]||(t[28]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Resolved Period : ")],-1)]))):i("",!0),s.form.status==5?(l(),n("div",vt,[e("div",_t,[y(e("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=a=>s.form.resolved_date=a),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.resolved_date]])]),r.$page.props.errors.resolved_date?(l(),n("p",wt,d(r.$page.props.errors.resolved_date),1)):i("",!0)])):i("",!0),s.form.status==5?(l(),n("div",kt,[e("div",ht,[y(e("input",{type:"time","onUpdate:modelValue":t[10]||(t[10]=a=>s.form.resolved_time=a),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.resolved_time]])]),r.$page.props.errors.resolved_time?(l(),n("p",Ct,d(r.$page.props.errors.resolved_time),1)):i("",!0)])):i("",!0),s.form.type=="suspension"?(l(),n("div",Tt,t[29]||(t[29]=[e("div",{class:"mt-1 flex"},[e("label",{for:"suspense",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Suspense Period : ")],-1)]))):i("",!0),s.form.type=="suspension"?(l(),n("div",St,[e("div",Vt,[e("div",Ut,[e("div",jt,[t[30]||(t[30]=e("span",{class:"-mt-1 z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-pause"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[11]||(t[11]=a=>s.form.start_date=a),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),r.$page.props.errors.start_date?(l(),n("p",Dt,d(r.$page.props.errors.start_date),1)):i("",!0)]),e("div",It,[e("div",Ot,[t[31]||(t[31]=e("span",{class:"-mt-1 z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[12]||(t[12]=a=>s.form.end_date=a),name:"end_date",id:"end_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.end_date]])]),r.$page.props.errors.end_date?(l(),n("p",Pt,d(r.$page.props.errors.end_date),1)):i("",!0)])])])):i("",!0),s.form.type=="resume"?(l(),n("div",Mt,t[32]||(t[32]=[e("div",{class:"mt-1 flex"},[e("label",{for:"resume",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Resume Date : ")],-1)]))):i("",!0),s.form.type=="resume"?(l(),n("div",Nt,[e("div",At,[t[33]||(t[33]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[13]||(t[13]=a=>s.form.start_date=a),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),r.$page.props.errors.resume?(l(),n("p",Lt,d(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="termination"?(l(),n("div",Bt,t[34]||(t[34]=[e("div",{class:"mt-1 flex"},[e("label",{for:"termination",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Termination Date : ")],-1)]))):i("",!0),s.form.type=="termination"?(l(),n("div",zt,[e("div",Et,[t[35]||(t[35]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-stop"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[14]||(t[14]=a=>s.form.start_date=a),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),r.$page.props.errors.start_date?(l(),n("p",Rt,d(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(l(),n("div",Ft,t[36]||(t[36]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Address : ")],-1)]))):i("",!0),s.form.type=="relocation"?(l(),n("div",Ht,[e("div",Yt,[y(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=a=>s.form.new_address=a),name:"new_address",id:"new_address",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"}," ",512),[[_,s.form.new_address]])]),r.$page.props.errors.new_address?(l(),n("p",Wt,d(r.$page.props.errors.new_address),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(l(),n("div",Jt,t[37]||(t[37]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Township : ")],-1)]))):i("",!0),s.form.type=="relocation"?(l(),n("div",Kt,[s.townships.length!==0?(l(),n("div",$t,[z(u,{"deselect-label":"Selected already",options:s.townships,"track-by":"id",label:"name",modelValue:s.form.new_township,"onUpdate:modelValue":t[16]||(t[16]=a=>s.form.new_township=a),"allow-empty":!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.new_township?(l(),n("p",Gt,d(r.$page.props.errors.new_township),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(l(),n("div",qt,t[38]||(t[38]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_latlong",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Location : ")],-1)]))):i("",!0),s.form.type=="relocation"?(l(),n("div",Qt,[e("div",Xt,[e("div",Zt,[e("div",es,[t[39]||(t[39]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=a=>s.form.latitude=a),name:"latitude",id:"latitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Latitude"},null,512),[[_,s.form.latitude]])]),r.$page.props.errors.latitude?(l(),n("p",ts,d(r.$page.props.errors.latitude),1)):i("",!0)]),e("div",ss,[e("div",os,[t[40]||(t[40]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=a=>s.form.longitude=a),name:"longitude",id:"longitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Longitude"},null,512),[[_,s.form.longitude]])]),r.$page.props.errors.longitude?(l(),n("p",ls,d(r.$page.props.errors.longitude),1)):i("",!0)])])])):i("",!0),s.form.type=="relocation"?(l(),n("div",ns,t[41]||(t[41]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):i("",!0),s.form.type=="relocation"?(l(),n("div",rs,[e("div",is,[t[42]||(t[42]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-truck"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[19]||(t[19]=a=>s.form.start_date=a),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),r.$page.props.errors.start_date?(l(),n("p",as,d(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="plan_change"?(l(),n("div",ds,t[43]||(t[43]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_package",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Package: ")],-1)]))):i("",!0),s.form.type=="plan_change"?(l(),n("div",cs,[s.packages.length!==0?(l(),n("div",ms,[z(u,{"deselect-label":"Selected already",options:s.packages,"track-by":"id",label:"item_data",modelValue:s.form.package_id,"onUpdate:modelValue":t[20]||(t[20]=a=>s.form.package_id=a),"allow-empty":!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.package?(l(),n("p",ps,d(r.$page.props.errors.package),1)):i("",!0)])):i("",!0),s.form.type=="plan_change"?(l(),n("div",us,t[44]||(t[44]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):i("",!0),s.form.type=="plan_change"?(l(),n("div",fs,[e("div",gs,[t[45]||(t[45]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-random"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[21]||(t[21]=a=>s.form.start_date=a),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),r.$page.props.errors.start_date?(l(),n("p",ys,d(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),t[51]||(t[51]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"detail",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Detail : ")])],-1)),e("div",xs,[e("div",bs,[y(e("textarea",{"onUpdate:modelValue":t[22]||(t[22]=a=>s.form.description=a),name:"detail",id:"detail",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"}," ",512),[[_,s.form.description]])]),r.$page.props.errors.description?(l(),n("p",vs,d(r.$page.props.errors.description),1)):i("",!0)])]),s.loading?(l(),n("div",_s,t[52]||(t[52]=[e("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),e("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),e("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):i("",!0)],64)}const ks=J(Re,[["render",ws]]),hs={name:"Task",components:{Multiselect:le},props:["data"],setup(r){const t=H("noc"),f=H("permission");let s=w(),x=w(!1),v=w(!1),u=w(!1);const a=he({id:null,assigned:null,target:null,status:1,description:null,incident_id:null});function h(){v.value=!0,a.incident_id=r.data}function V(){a.id=null,a.assigned=null,a.target=null,a.status=1,a.description=null,a.incident_id=r.data}function S(g){a.id=g.id,a.assigned=Y(g.assigned)?JSON.parse(g.assigned):t.filter(m=>m.id==g.assigned)[0],a.description=g.description,a.incident_id=g.incident_id,a.status=g.status,a.target=g.target,u.value=!0,v.value=!0}function j(g){Toast.fire({title:"Are you sure?",text:"Once deleted, you will not be able to recover this data !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(m=>{m.isConfirmed?N(g):Toast.fire("Your data is safe!")})}function N(g){a.id=g.id,a.assigned=Y(g.assigned)?JSON.parse(g.assigned):t.filter(m=>m.id==g.assigned)[0],a.description=g.description,a.incident_id=g.incident_id,a.status=0,a.target=g.target,u.value=!0,v.value=!1,U()}function b(g){g.status!=2?Toast.fire({title:"Are you sure?",text:"Do you want to mark as completed !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(m=>{m.isConfirmed&&p(g,2)}):Toast.fire({title:"Are you sure?",text:"Do you want to mark as WIP !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(m=>{m.isConfirmed&&p(g,1)})}function p(g,m){a.id=g.id,a.assigned=g.assigned,a.description=g.description,a.incident_id=g.incident_id,a.status=m,a.target=g.target,u.value=!0,v.value=!1,U()}function U(){u.value!=!0?(a._method="POST",M.post("/addTask",a,{preserveState:!0,onSuccess:g=>{v.value=!1,V(),W(),Toast.fire({icon:"success",title:g.props.flash.message})},onError:g=>{console.log("error ..".errors)}})):(a._method="PUT",M.post("/editTask/"+a.id,a,{onSuccess:g=>{v.value=!1,u.value=!1,V(),W(),Toast.fire({icon:"success",title:g.props.flash.message}),closeModal()},onError:g=>{console.log("error ..".errors)}}))}function A(){v.value=!1,preserveState=!0}const I=async()=>{let g="/getTask/"+r.data;console.log(g);try{return await(await fetch(g)).json()}catch(m){console.error(m)}},o=g=>{var m,C;if(Y(g)){let D=JSON.parse(g);if(console.log(D),!Array.isArray(D)&&D instanceof Object)return(C=D.name)==null?void 0:C.match(/\b\w/g).join("");{let Q=""+D.map($=>{var X;return console.log($.name),(X=$.name)==null?void 0:X.match(/\b\w/g).join("")});return console.log(Q),Q}}else return(m=Object(t.filter(Q=>Q.id==g)[0]).name)==null?void 0:m.match(/\b\w/g).join("")};function L(g){let m="WIP";return g==0?m="Deleted":g==1?m="WIP":m="Completed",m}function Y(g){console.log(g);try{const m=JSON.parse(g);return typeof m=="object"&&m!==null}catch{return console.log("not json"),!1}}const W=()=>{I().then(g=>{s.value=g})};return K(()=>{console.log(s.value),W()}),{loading:x,task_list:s,edit:v,editMode:u,newTask:h,saveTask:U,cancelTask:A,getName:o,getStatus:L,editTask:S,deleteTask:j,completeTask:b,form:a,noc:t,permission:f}}},Cs={class:"flex w-full justify-end"},Ts={key:0},Ss={key:1},Vs={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},Us={key:1},js={class:"min-w-full divide-y divide-gray-200 table-auto"},Ds={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto block scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white flex flex-col justify-between text-left"},Is={class:"px-6 py-3 whitespace-nowrap w-1/12"},Os=["checked","onClick","disabled"],Ps={class:"px-6 py-3 whitespace-nowrap w-3/5"},Ms={class:"px-6 py-3 whitespace-nowrap w-1/4"},Ns={class:"px-6 py-3 whitespace-nowrap w-1/6"},As={class:"px-6 py-3 whitespace-nowrap w-1/12"},Ls={key:0,class:"px-6 py-3 whitespace-nowrap w-1/12"},Bs=["onClick"],zs=["onClick"],Es={key:1,class:"px-6 py-3 whitespace-nowrap w-1/12"},Rs=["onClick"],Fs={key:2},Hs={class:"grid grid-cols-1 md:grid-cols-4 gap-2 w-full"},Ys={class:"py-2 col-span-3 sm:col-span-3"},Ws={class:"flex rounded-md shadow-sm"},Js={key:0,class:"flex rounded-md shadow-sm w-full"},Ks={key:1,class:"mt-2 text-sm text-red-500"},$s={class:"py-2 col-span-3 sm:col-span-3"},Gs={class:"flex rounded-md shadow-sm"},qs={key:0,class:"mt-2 text-sm text-red-500"},Qs={class:"py-2 col-span-3 sm:col-span-3"},Xs={class:"flex rounded-md shadow-sm"},Zs={key:0,class:"mt-2 text-sm text-red-500"},eo={class:"py-2 col-span-3 sm:col-span-3"},to={class:"flex rounded-md shadow-sm"},so={key:0,class:"mt-2 text-sm text-red-500"};function oo(r,t,f,s,x,v){const u=B("multiselect");return l(),n(E,null,[e("div",Cs,[!s.edit&&s.permission[0].write_incident==1?(l(),n("a",{key:0,href:"#",onClick:t[0]||(t[0]=a=>s.newTask()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[7]||(t[7]=[T("Add Task"),e("i",{class:"fas fa-plus-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0),s.edit&&s.permission[0].write_incident==1?(l(),n("a",{key:1,href:"#",onClick:t[1]||(t[1]=a=>s.saveTask()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-green-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-400 active:bg-green-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},[s.editMode?i("",!0):(l(),n("span",Ts,"Save Task")),s.editMode?(l(),n("span",Ss,"Update Task")):i("",!0),t[8]||(t[8]=e("i",{class:"fas fa-save opacity-75 lg:ml-1 text-sm"},null,-1))])):i("",!0),s.edit?(l(),n("a",{key:2,href:"#",onClick:t[2]||(t[2]=a=>s.cancelTask()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-gray-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-400 active:bg-gray-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[9]||(t[9]=[T("Cancel"),e("i",{class:"fas fa-save opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0)]),s.task_list?i("",!0):(l(),n("div",Vs,t[10]||(t[10]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.task_list&&!s.edit?(l(),n("div",Us,[e("table",js,[t[15]||(t[15]=e("thead",{class:"bg-gray-50 w-full flex flex-col"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"}),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-3/5"}," Description"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4"}," Assigned"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/6"}," Target"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"}," Status"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"}," Action")])],-1)),e("tbody",Ds,[(l(!0),n(E,null,q(s.task_list,a=>(l(),n("tr",{key:a.id,class:"flex"},[e("td",Is,[e("input",{type:"checkbox",name:"status",checked:a.status==2,onClick:h=>s.completeTask(a),disabled:!s.permission[0].write_incident},null,8,Os)]),e("td",Ps,d(a.description.length>50?a.description.substring(0,50)+" ...":a.description),1),e("td",Ms,d(s.getName(a.assigned)),1),e("td",Ns,d(a.target),1),e("td",As,d(s.getStatus(a.status)),1),s.permission[0].write_incident==1?(l(),n("td",Ls,[e("a",{href:"#",onClick:h=>s.editTask(a),class:"text-blue-600"},t[11]||(t[11]=[e("i",{class:"fa fa-edit"},null,-1)]),8,Bs),t[13]||(t[13]=T(" | ")),e("a",{href:"#",onClick:h=>s.deleteTask(a),class:"text-red-600"},t[12]||(t[12]=[e("i",{class:"fa fa-trash"},null,-1)]),8,zs)])):(l(),n("td",Es,[e("a",{href:"#",onClick:h=>s.editTask(a),class:"text-blue-600"},t[14]||(t[14]=[e("i",{class:"fa fa-eye"},null,-1)]),8,Rs)]))]))),128))])])])):i("",!0),s.edit?(l(),n("div",Fs,[e("div",Hs,[t[17]||(t[17]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"assigned",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Assigned : ")])],-1)),e("div",Ys,[e("div",Ws,[s.noc.length!==0?(l(),n("div",Js,[z(u,{"deselect-label":"Selected already",options:s.noc,"track-by":"id",label:"name",modelValue:s.form.assigned,"onUpdate:modelValue":t[3]||(t[3]=a=>s.form.assigned=a),"allow-empty":!1,multiple:!0},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.assigned?(l(),n("p",Ks,d(r.$page.props.errors.assigned),1)):i("",!0)])]),t[18]||(t[18]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"target",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Target : ")])],-1)),e("div",$s,[e("div",Gs,[y(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=a=>s.form.target=a),name:"target",id:"target",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.target]])]),r.$page.props.errors.target?(l(),n("p",qs,d(r.$page.props.errors.target),1)):i("",!0)]),t[19]||(t[19]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Description : ")])],-1)),e("div",Qs,[e("div",Xs,[y(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=a=>s.form.description=a),name:"description",id:"description",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.description]])]),r.$page.props.errors.description?(l(),n("p",Zs,d(r.$page.props.errors.description),1)):i("",!0)]),t[20]||(t[20]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"flex"},[e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Status : ")])],-1)),e("div",eo,[e("div",to,[y(e("select",{"onUpdate:modelValue":t[6]||(t[6]=a=>s.form.status=a),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[16]||(t[16]=[e("option",{value:"1"},"WIP",-1),e("option",{value:"2"},"Completed",-1),e("option",{value:"0"},"Deleted",-1)]),512),[[R,s.form.status]])]),r.$page.props.errors.status?(l(),n("p",so,d(r.$page.props.errors.status),1)):i("",!0)])])])):i("",!0)],64)}const lo=J(hs,[["render",oo]]),no={name:"Log",props:["data"],setup(r){const t=w(""),f=async()=>{let x="/getLog/"+r.data;try{return await(await fetch(x)).json()}catch(v){console.error(v)}},s=()=>{f().then(x=>{t.value=x})};return K(()=>{s()}),{logs:t}}},ro={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},io={key:1},ao={class:"min-w-full divide-y divide-gray-200 table-auto"},co={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white block text-left"},mo={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-1/12 flex"},po={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-1/4 flex-1"},uo={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-1/3 flex-1"},fo={class:"px-3 py-3 text-xs font-medium whitespace-wrap tracking-wider w-full flex-1"};function go(r,t,f,s,x,v){return l(),n(E,null,[s.logs?i("",!0):(l(),n("div",ro,t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.logs?(l(),n("div",io,[e("table",ao,[t[1]||(t[1]=e("thead",{class:"bg-gray-50 w-full flex block table text-left"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12 flex"},"No."),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/4 flex-1"},"Date"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/3 flex-1"},"Actor"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-full flex-1"},"Action")])],-1)),e("tbody",co,[(l(!0),n(E,null,q(s.logs,(u,a)=>(l(),n("tr",{key:u.id,class:"flex"},[e("td",mo,d(a+1),1),e("td",po,d(u.created_at),1),e("td",uo,d(u.name),1),e("td",fo,d(u.action),1)]))),128))])])])):i("",!0)],64)}const yo=J(no,[["render",go]]),xo={name:"History",props:["data"],setup(r){const t=w(),f=async()=>{let x="/getHistory/"+r.data;try{return await(await fetch(x)).json()}catch(v){console.error(v)}},s=()=>{f().then(x=>{t.value=x})};return K(()=>{s()}),{logs:t}}},bo={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},vo={key:1},_o={class:"min-w-full divide-y divide-gray-200 table-auto"},wo={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white block text-left"},ko={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex"},ho={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},Co={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},To={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},So={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},Vo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"},Uo={class:"px-3 py-3 text-xs font-medium tracking-wider w-1/7 flex-1"};function jo(r,t,f,s,x,v){return l(),n(E,null,[s.logs?i("",!0):(l(),n("div",bo,t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.logs?(l(),n("div",vo,[e("table",_o,[t[1]||(t[1]=e("thead",{class:"bg-gray-50 w-full flex block table text-left"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex"},"No."),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Date"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Ticket ID"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Customer ID"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Ticket Type"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Ticket Topic (if exists)"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/7 flex-1"},"Opened By")])],-1)),e("tbody",wo,[(l(!0),n(E,null,q(s.logs,(u,a)=>(l(),n("tr",{key:u.id,class:"flex"},[e("td",ko,d(a+1),1),e("td",ho,d(u.date+" "+u.time),1),e("td",Co,d(u.code),1),e("td",To,d(u.ftth_id),1),e("td",So,d(u.type),1),e("td",Vo,d(u.topic?u.topic:"N/A"),1),e("td",Uo,d(u.name),1)]))),128))])])])):i("",!0)],64)}const Do=J(xo,[["render",jo]]),Io={name:"File",components:{Upload:Ve},props:["data"],setup(r){let t=w(!1),f=w();const s=H("permission");let x=w(!1),v=w("");function u(){x.value=!0,v.value={incident_id:r.data}}function a(){x.value=!1,N()}function h(b){Toast.fire({title:"Are you sure?",text:"Once deleted, you will not be able to recover this data !",icon:"warning",timer:!1,position:"center",showCancelButton:!0,dangerMode:!0}).then(p=>{p.isConfirmed?V(b):Toast.fire("Your data is safe!")})}function V(b){b._method="DELETE",M.post("/deleteFile/"+b.id,b,{onSuccess(p){Toast.fire({icon:"success",title:"Your File has been Deleted !"}),N()}})}const S=async()=>{let b="/getFile/"+r.data;console.log(b);try{return await(await fetch(b)).json()}catch(p){console.error(p)}},j=b=>{b&&(x.value=!1,N(),Toast.fire({icon:"success",title:"Successfully Uploaded the File"}))},N=()=>{S().then(b=>{f.value=b})};return K(()=>{N()}),{file_list:f,add:x,deleteFile:h,addFile:u,closeFile:a,checkUpload:j,incident_id:v,permission:s,loading:t}}},Oo={class:"flex w-full justify-end"},Po={key:0,"wire:loading":"",class:"w-full flex flex-col items-center justify-center"},Mo={key:1},No={class:"min-w-full divide-y divide-gray-200 table-auto"},Ao={class:"bg-white divide-y divide-gray-200 text-sm max-h-64 w-full overflow-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-white block text-left"},Lo={class:"px-6 py-3 whitespace-nowrap tracking-wider w-1/12"},Bo={class:"px-6 py-3 whitespace-nowrap tracking-wider w-full"},zo={key:0,class:"px-6 py-3 whitespace-nowrap tracking-wider text-right w-1/12 mr-4"},Eo=["href"],Ro=["onClick"],Fo={key:1,class:"px-6 py-3 whitespace-nowrap tracking-wider text-right w-1/12 mr-4"},Ho=["href"],Yo={key:2};function Wo(r,t,f,s,x,v){const u=B("upload");return l(),n(E,null,[e("div",Oo,[!s.add&&s.permission[0].write_incident==1?(l(),n("a",{key:0,href:"#",onClick:t[0]||(t[0]=a=>s.addFile()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[2]||(t[2]=[T("Add File"),e("i",{class:"fas fa-plus-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0),s.add?(l(),n("a",{key:1,href:"#",onClick:t[1]||(t[1]=a=>s.closeFile()),class:"-mt-2 mb-2 text-center items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-gray-900 disabled:opacity-25 transition mr-1"},t[3]||(t[3]=[T("Close"),e("i",{class:"fas fa-times-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0)]),s.file_list?i("",!0):(l(),n("div",Po,t[4]||(t[4]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.file_list&&!s.add?(l(),n("div",Mo,[e("table",No,[t[9]||(t[9]=e("thead",{class:"bg-gray-50 w-full flex block table text-left"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"},"ID"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-full"},"File"),e("th",{scope:"col",class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider w-1/12"}," Action ")])],-1)),e("tbody",Ao,[(l(!0),n(E,null,q(s.file_list,(a,h)=>(l(),n("tr",{key:a.id,class:"flex"},[e("td",Lo,d(h+1),1),e("td",Bo,d(a.name),1),s.permission[0].write_incident==1?(l(),n("td",zo,[e("a",{href:a.path,target:"_blank"},t[5]||(t[5]=[e("i",{class:"fas fa-eye text-indigo-600"},null,-1)]),8,Eo),t[7]||(t[7]=T(" | ")),e("a",{href:"#",onClick:V=>s.deleteFile(a),class:"text-red-600"},t[6]||(t[6]=[e("i",{class:"fa fa-trash"},null,-1)]),8,Ro)])):(l(),n("td",Fo,[e("a",{href:a.path,target:"_blank"},t[8]||(t[8]=[e("i",{class:"fas fa-eye text-indigo-600"},null,-1)]),8,Ho)]))]))),128))])])])):i("",!0),s.add?(l(),n("div",Yo,[z(u,{data:s.incident_id,onStatus:s.checkUpload},null,8,["data","onStatus"])])):i("",!0)],64)}const Jo=J(Io,[["render",Wo]]),Ko={name:"CustomerDetail",props:["data"],setup(r){const t=w(""),f=async()=>{let x="/getCustomer/"+r.data;try{return await(await fetch(x)).json()}catch(v){console.error(v)}},s=()=>{f().then(x=>{t.value=x})};return K(()=>{s()}),{customer_detail:t}}},$o={key:0,class:"w-full flex flex-col items-center justify-center"},Go={key:1},qo={class:"bg-white shadow overflow-hidden sm:rounded-lg text-left"},Qo={class:"border-t border-gray-200"},Xo={class:"bg-gray-50 px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},Zo={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},el={key:0,class:"bg-white px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},tl={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},sl={class:"bg-gray-50 px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},ol={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},ll={class:"bg-white px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},nl={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},rl={key:1,class:"bg-gray-50 px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},il={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},al={class:"bg-white px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},dl={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},cl={key:2,class:"bg-gray-50 px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},ml={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},pl={key:3,class:"bg-white px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},ul={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},fl={key:4,class:"bg-gray-50 px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},gl={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},yl={key:5,class:"bg-white px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},xl={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},bl={class:"bg-gray-50 px-2 py-2 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6"},vl={key:0,class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},_l={class:"uppercase"},wl={key:1,class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-3"},kl={class:"uppercase"};function hl(r,t,f,s,x,v){return l(),n(E,null,[s.customer_detail[0]?i("",!0):(l(),n("div",$o,t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"},null,-1),e("h2",{class:"text-center text-gray-600 text-sm font-semibold mt-2"},"Loading...",-1)]))),s.customer_detail[0]?(l(),n("div",Go,[e("div",qo,[e("div",Qo,[e("dl",null,[e("div",Xo,[t[1]||(t[1]=e("dt",{class:"text-sm font-medium text-gray-500"},"Customer ID",-1)),e("dd",Zo,d(s.customer_detail[0].ftth_id),1)]),s.customer_detail[0].sale_channel?(l(),n("div",el,[t[2]||(t[2]=e("dt",{class:"text-sm font-medium text-gray-500"},"Sales Source",-1)),e("dd",tl,d(s.customer_detail[0].sale_channel),1)])):i("",!0),e("div",sl,[t[3]||(t[3]=e("dt",{class:"text-sm font-medium text-gray-500"},"Customer Name",-1)),e("dd",ol,d(s.customer_detail[0].name),1)]),e("div",ll,[t[4]||(t[4]=e("dt",{class:"text-sm font-medium text-gray-500"},"Contact Number",-1)),e("dd",nl,d(s.customer_detail[0].phone_1)+" "+d(s.customer_detail[0].phone_2),1)]),s.customer_detail[0].email?(l(),n("div",rl,[t[5]||(t[5]=e("dt",{class:"text-sm font-medium text-gray-500"},"Contact E Mail",-1)),e("dd",il,d(s.customer_detail[0].email),1)])):i("",!0),e("div",al,[t[6]||(t[6]=e("dt",{class:"text-sm font-medium text-gray-500"},"Full Address",-1)),e("dd",dl,d(s.customer_detail[0].address),1)]),s.customer_detail[0].latitude?(l(),n("div",cl,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500"},"Location",-1)),e("dd",ml,d(s.customer_detail[0].latitude)+","+d(s.customer_detail[0].longitude),1)])):i("",!0),s.customer_detail[0].billing_attention?(l(),n("div",pl,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500"},"Contact Person Name",-1)),e("dd",ul,d(s.customer_detail[0].billing_attention),1)])):i("",!0),s.customer_detail[0].nrc?(l(),n("div",fl,[t[9]||(t[9]=e("dt",{class:"text-sm font-medium text-gray-500"},"NRC Number",-1)),e("dd",gl,d(s.customer_detail[0].nrc),1)])):i("",!0),s.customer_detail[0].dob?(l(),n("div",yl,[t[10]||(t[10]=e("dt",{class:"text-sm font-medium text-gray-500"},"Date of Birth",-1)),e("dd",xl,d(s.customer_detail[0].dob),1)])):i("",!0),e("div",bl,[t[11]||(t[11]=e("dt",{class:"text-sm font-medium text-gray-500"},"Applied Mbps",-1)),s.customer_detail[0].payment_type==1?(l(),n("dd",vl,[T(d(s.customer_detail[0].package_name)+" ("+d(s.customer_detail[0].package_speed)+" Mbps),MRC "+d(s.customer_detail[0].package_price)+" ",1),e("span",_l,d(s.customer_detail[0].package_currency),1),T(", "+d(s.customer_detail[0].package_contract_period)+" Months Contract, "+d(s.customer_detail[0].prepaid_period)+" Months Prepaid ",1)])):(l(),n("dd",wl,[T(d(s.customer_detail[0].package_name)+" ("+d(s.customer_detail[0].package_speed)+" Mbps), MRC "+d(s.customer_detail[0].package_price)+" ",1),e("span",kl,d(s.customer_detail[0].package_currency),1),T(", "+d(s.customer_detail[0].package_contract_period)+" Months Contract, Monthly Postpaid ",1)]))])])])])])):i("",!0)],64)}const Cl=J(Ko,[["render",hl]]);/*! js-cookie v3.0.5 | MIT */function ee(r){for(var t=1;t<arguments.length;t++){var f=arguments[t];for(var s in f)r[s]=f[s]}return r}var Tl={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function oe(r,t){function f(x,v,u){if(!(typeof document>"u")){u=ee({},t,u),typeof u.expires=="number"&&(u.expires=new Date(Date.now()+u.expires*864e5)),u.expires&&(u.expires=u.expires.toUTCString()),x=encodeURIComponent(x).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var h in u)u[h]&&(a+="; "+h,u[h]!==!0&&(a+="="+u[h].split(";")[0]));return document.cookie=x+"="+r.write(v,x)+a}}function s(x){if(!(typeof document>"u"||arguments.length&&!x)){for(var v=document.cookie?document.cookie.split("; "):[],u={},a=0;a<v.length;a++){var h=v[a].split("="),V=h.slice(1).join("=");try{var S=decodeURIComponent(h[0]);if(u[S]=r.read(V,S),x===S)break}catch{}}return x?u[x]:u}}return Object.create({set:f,get:s,remove:function(x,v){f(x,"",ee({},v,{expires:-1}))},withAttributes:function(x){return oe(this.converter,ee({},this.attributes,x))},withConverter:function(x){return oe(ee({},this.converter,x),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(r)}})}var ae=oe(Tl,{path:"/"});const Sl={name:"Incident",components:{AppLayout:ve,Pagination:Ue,IncidentAlert:Ee,IncidentDetail:ks,Multiselect:le,VueDatePicker:je,Task:lo,File:Jo,Log:yo,History:Do,CustomerDetail:Cl,NoData:_e},props:{incidents:Object,incidents_2:Object,noc:Object,team:Object,townships:Object,customers:Object,packages:Object,critical:Object,high:Object,normal:Object,errors:Object,permission:Object,user:Object},setup(r){const t=w(""),f=w(""),s=w(1);let x=w(!1),v=w(!1),u=w(""),a=w(0),h=w("default"),V=w("default"),S=w([]);const j=w(null),N=w({date:"YYYY-MM-DD",month:"MMM"});let b=w(!1),p=w(!1);G("noc",r.noc),G("team",r.team),G("townships",r.townships),G("user",r.user),G("packages",r.packages),G("permission",r.permission),G("customers",r.customers);const U=w(ae.get("pagination")||10),A=()=>{ae.set("pagination",U.value,{expires:7}),I()},I=()=>{let c=`/incident?pagination=${U.value}`;M.get(c,{},{preserveState:!0})},o=de({id:null,code:null,priority:null,customer_id:null,incharge_id:r.team.filter(c=>c.id==r.user.id)[0],type:"default",topic:null,status:1,start_date:null,end_date:null,new_address:null,new_township:null,latitude:null,longitude:null,package_id:null,description:null,date:null,time:null,close_date:null,close_time:null,resolved_date:null,resolved_time:null});let L=w(!0),Y=w("");function W(c){Y.value=c}function g(c){if(u.value!=null&&(L.value=c,c==1)){let k=r.incidents.data.filter(O=>O.id==u.value)[0];$(k)}}function m(){var c=new Date,k=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate(),O=c.getHours()+":"+c.getMinutes();!o.close_date&&a.value!=3&&(o.close_date=k),!o.close_time&&a.value!=3&&(o.close_time=O),L.value=1,b.value=!0}function C(){b.value=!1,u.value=null}function D(){X(),m()}function Q(c){let k=r.incidents_2.filter(O=>O.id==c.id)[0];console.log("edit data",k),$(k)}function $(c){let k=null;u.value=c.id,v.value=!0,c.location!=null&&(k=c.location.split(",",2),o.latitude=k[0],o.longitude=k[1]),o.id=c.id,o.code=c.code,o.priority=c.priority,o.customer_id=r.customers.filter(O=>O.id==c.customer_id)[0],o.incharge_id=r.noc.filter(O=>O.id==c.incharge_id)[0],o.type=c.type,o.topic=c.topic,o.status=c.status,o.start_date=c.start_date,o.end_date=c.end_date,o.new_address=c.new_address,o.new_township=r.townships.filter(O=>O.id==c.new_township)[0],o.package_id=r.packages.filter(O=>O.id==c.package_id)[0],o.description=c.description,o.date=c.date,o.time=c.time,o.close_date=c.close_date,o.close_time=c.close_time,o.resolved_date=c.resolved_date,o.resolved_time=c.resolved_time,m()}function X(){u.value=null,v.value=!1,o.id="",o.code="",o.priority="normal",o.customer_id="",o.incharge_id=r.team.filter(c=>c.id==r.user.id)[0],o.type="default",o.topic="",o.status=1,o.start_date="",o.end_date="",o.new_address="",o.new_township="",o.latitude="",o.longitude="",o.package_id="",o.description="",o.date="",o.time="",o.close_date="",o.close_time="",o.resolved_date="",o.resolved_time=""}function me(c){let k="Open";return c==1?k="Open":c==2?k="Escalated":c==3?k="Closed":c==4?k="Deleted":c==5?k="Resolved":c==6&&(k="Pending"),k}function pe(c){confirm("Are you sure want to remove?")&&(o._method="PUT",o.status=4,M.post("/incident/"+o.id,o,{onSuccess:k=>{s.value+=1,Toast.fire({icon:"success",title:k.props.flash.message}),C()},onError:k=>{console.log("error ..".errors)}}))}const ue=()=>{let c="/incident/";a.value!=null&&(c=c+"?status="+a.value),M.get(c,{keyword:t.value},{preserveState:!0})},fe=()=>{let c="/incident/";t.value!=null&&(c=c+"?keyword="+t.value),h.value!="default"&&(c=c+"&type="+h.value),V.value!="default"&&(c=c+"&member="+V.value),S.value!=""&&(c=c+"&date="+S.value),M.get(c,{status:a.value},{preserveState:!0})},ge=c=>{let k="/incident";c!="all"?M.get(k,{priority:c},{preserveState:!0}):M.get(k,{},{preserveState:!0})},ye=c=>{let k="/incident/?";f.value=c,f.order=f.order!=="asc"?"asc":"desc";let O=xe();M.get(k+O,{sort:f.value,order:f.order},{preserveState:!0})},xe=()=>{let c="";return U.value!=null&&(c="?pagination="+U.value),t.value!=null&&(c+="&keyword="+t.value),h.value!="default"&&(c+="&type="+h.value),V.value!="default"&&(c+="&member="+V.value),a.value!=null&&(c+="&status="+a.value),S.value!=""&&(c+="&date="+S.value),c};function ne(){r.incidents.data.map(function(c){c.priority=="high"?c.color=c.status!=3&&c.status!=4?"yellow-600":"gray-200":c.priority=="critical"?c.color=c.status!=3&&c.status!=4?"red-600":"gray-200":c.color=c.status!=3&&c.status!=4?"yellow-300":"gray-200"})}function be(){v.value!=!0?(o._method="POST",M.post("/incident",o,{preserveState:!0,onSuccess:c=>{u.value=c.props.response.id;let k=r.incidents.data.filter(O=>O.id==u.value)[0];v.value=!0,p.value=!1,k!==void 0&&(console.log("response is : "+k),$(k)),Toast.fire({icon:"success",title:c.props.flash.message})},onError:c=>{p.value=!1,console.log("error ..")},onStart:c=>{p.value=!0}})):(o._method="PUT",M.post("/incident/"+o.id,o,{onSuccess:c=>{Toast.fire({icon:"success",title:c.props.flash.message}),p.value=!1},onError:c=>{p.value=!1,console.log("error .."+c)},onStart:c=>{p.value=!0}}))}const te=c=>{c.key==="Escape"&&C()};return K(()=>{I(),window.addEventListener("keydown",te),console.log("Incident - On Mounted"),r.packages.map(function(c){return c.item_data=`${c.name}`}),ne()}),Ce(()=>{window.removeEventListener("keydown",te)}),ce(()=>{var c;console.log("Incident - On Updated"),r.packages.map(function(k){return k.item_data=`${k.name}`}),ne(),console.log("Table height:",(c=j.value)==null?void 0:c.clientHeight)}),{loading:p,form:o,openModal:m,closeModal:C,newTicket:D,isOpen:b,deleteIncident:pe,searchIncident:ue,edit:$,sortBy:ye,getStatus:me,changeStatus:fe,sort:f,search:t,show:x,tabClick:g,tab:L,selection:Y,selected_id:u,editMode:v,typeChange:W,showPriority:ge,incidentStatus:a,page_update:s,alert_edit:Q,submit:be,clearform:X,incidentType:h,incidentBy:V,incidentDate:S,formatter:N,escKey:te,updatePagination:A,pagination:U,myTable:j}}},Vl={class:"py-1"},Ul={class:"mx-auto sm:px-6 lg:px-8"},jl={class:"flex w-full place-items-center align-middle"},Dl={class:"flex w-full place-items-center align-middle"},Il={class:"flex w-full place-items-center align-middle"},Ol=["value"],Pl={class:"flex w-full place-items-center align-middle"},Ml={class:"flex w-full place-items-center align-middle"},Nl={class:"flex w-full md:w-1/4"},Al={class:"flex w-full md:w-1/2 md:justify-end"},Ll={key:0,class:"grid grid-cols-1 md:grid-cols-6 gap-6 w-full"},Bl={class:"lg:col-span-4 md:col-span-6"},zl={key:0,class:"bg-white overflow-auto md:overflow-hidden shadow-xl sm:rounded-lg mt-1"},El={class:"min-w-full divide-y divide-gray-200",ref:"myTable"},Rl={class:"bg-gray-50"},Fl={class:"bg-white divide-y divide-gray-200 text-sm"},Hl=["onClick"],Yl={class:"px-2 py-3 whitespace-nowrap"},Wl={class:"px-2 py-3 whitespace-nowrap"},Jl={class:"px-2 py-3 whitespace-nowrap"},Kl={class:"px-2 py-3 whitespace-nowrap"},$l={key:0,class:"px-2 py-3 whitespace-nowrap"},Gl={key:1,class:"px-2 py-3 whitespace-nowrap"},ql={class:"px-2 py-3 whitespace-nowrap capitalize"},Ql={class:"px-2 py-3 whitespace-nowrap"},Xl={class:"px-2 py-3 whitespace-nowrap"},Zl={key:1,class:"w-full mt-4 inline-flex text-xs text-gray-600 items-center gap-2 justify-between"},en={key:2},tn={key:3,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg mt-1 py-4 flex flex-col items-center"},sn={class:"col-span-2"},on={class:"bg-white rounded-lg w-full mx-auto mt-1 shadow-xl divide-y divide-gray-200 py-2 px-2"},ln={class:"grid grid-cols-4 gap-2"},nn={class:"col-span-1"},rn={class:"col-span-1"},an={key:1,class:"flex justify-center"},dn={key:0,ref:"isOpen",class:"fixed z-10 inset-0 overflow-y-auto ease-out duration-400"},cn={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},mn={class:"bg-gray-50 rounded-sm pt-1 inline-block align-bottom overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},pn={class:""},un={class:""},fn={class:"py-2 divide-y divide-yellow-500"},gn={class:"mt-1 px-3 flex w-full justify-between"},yn={class:"flex"},xn={class:"flex col-span-1"},bn={class:"px-2 lg:px-3"},vn={class:"px-2 lg:px-3"},_n={class:"px-2 lg:px-3"},wn={class:"bg-white rounded-t-lg w-full mx-auto mt-1 shadow-xl divide-y divide-gray-200"},kn={class:"inline-flex w-full bg-gray-50 rounded-t-lg"},hn={id:"tabs",class:"flex"},Cn={id:"tab-contents"},Tn={class:"grid grid-cols-5 gap-2"},Sn={class:"py-2 col-span-2 sm:col-span-2"},Vn={class:"mt-1 flex rounded-md shadow-sm"},Un={key:0,class:"mt-2 text-sm text-red-500"},jn={class:"py-2 col-span-2 sm:col-span-2"},Dn={class:"mt-1 flex rounded-md shadow-sm"},In={key:0,class:"mt-2 text-sm text-red-500"},On={class:"py-2 col-span-4 sm:col-span-4"},Pn={key:0,class:"mt-1 flex rounded-md shadow-sm"},Mn={key:1,class:"mt-2 text-sm text-red-500"},Nn={class:"py-2 col-span-4 sm:col-span-4"},An={key:0,class:"mt-1 flex rounded-md shadow-sm"},Ln={key:1,class:"mt-2 text-sm text-red-500"},Bn={class:"py-2 col-span-4 sm:col-span-4"},zn={class:"mt-1 flex"},En={key:0,class:"mt-2 text-sm text-red-500"},Rn={key:0,class:"py-2 col-span-1 sm:col-span-1"},Fn={key:1,class:"py-2 col-span-4 sm:col-span-4"},Hn={class:"mt-1 flex"},Yn={key:0,class:"mt-2 text-sm text-red-500"},Wn={key:2,class:"py-2 col-span-4 sm:col-span-4"},Jn={class:"mt-1 flex"},Kn={key:0,class:"mt-2 text-sm text-red-500"},$n={key:3,class:"py-2 col-span-4 sm:col-span-4"},Gn={class:"mt-1 flex"},qn={key:0,class:"mt-2 text-sm text-red-500"},Qn={class:"py-2 col-span-4 sm:col-span-4"},Xn={class:"mt-1 flex"},Zn={key:0,class:"mt-2 text-sm text-red-500"},er={key:4,class:"py-2 col-span-1 sm:col-span-1"},tr={key:5,class:"py-2 col-span-2 sm:col-span-2"},sr={class:"mt-1 flex rounded-md shadow-sm"},or={key:0,class:"mt-2 text-sm text-red-500"},lr={key:6,class:"py-2 col-span-2 sm:col-span-2"},nr={class:"mt-1 flex rounded-md shadow-sm"},rr={key:0,class:"mt-2 text-sm text-red-500"},ir={key:7,class:"py-2 col-span-1 sm:col-span-1"},ar={key:8,class:"py-2 col-span-2 sm:col-span-2"},dr={class:"mt-1 flex rounded-md shadow-sm"},cr={key:0,class:"mt-2 text-sm text-red-500"},mr={key:9,class:"py-2 col-span-2 sm:col-span-2"},pr={class:"mt-1 flex rounded-md shadow-sm"},ur={key:0,class:"mt-2 text-sm text-red-500"},fr={key:10,class:"py-2 col-span-1 sm:col-span-1"},gr={key:11,class:"py-2 col-span-4 sm:col-span-4"},yr={class:"grid grid-cols-2 gap-2"},xr={class:"col-span-1 sm:col-span-1"},br={class:"mt-1 flex rounded-md shadow-sm"},vr={key:0,class:"mt-2 text-sm text-red-500"},_r={class:"col-span-1 sm:col-span-1"},wr={class:"mt-1 flex rounded-md shadow-sm"},kr={key:0,class:"mt-2 text-sm text-red-500"},hr={key:12,class:"py-2 col-span-1 sm:col-span-1"},Cr={key:13,class:"py-2 col-span-4 sm:col-span-4"},Tr={class:"mt-1 flex rounded-md shadow-sm"},Sr={key:0,class:"mt-2 text-sm text-red-500"},Vr={key:14,class:"py-2 col-span-1 sm:col-span-1"},Ur={key:15,class:"py-2 col-span-4 sm:col-span-4"},jr={class:"mt-1 flex rounded-md shadow-sm"},Dr={key:0,class:"mt-2 text-sm text-red-500"},Ir={key:16,class:"py-2 col-span-1 sm:col-span-1"},Or={key:17,class:"py-2 col-span-4 sm:col-span-4"},Pr={class:"mt-1 flex"},Mr={key:0,class:"mt-2 text-sm text-red-500"},Nr={key:18,class:"py-2 col-span-1 sm:col-span-1"},Ar={key:19,class:"py-2 col-span-4 sm:col-span-4"},Lr={key:0,class:"mt-1 flex rounded-md shadow-sm"},Br={key:1,class:"mt-2 text-sm text-red-500"},zr={key:20,class:"py-2 col-span-1 sm:col-span-1"},Er={key:21,class:"py-2 col-span-4 sm:col-span-4"},Rr={class:"grid grid-cols-2 gap-2"},Fr={class:"col-span-1 sm:col-span-1"},Hr={class:"mt-1 flex rounded-md shadow-sm"},Yr={key:0,class:"mt-2 text-sm text-red-500"},Wr={class:"col-span-1 sm:col-span-1"},Jr={class:"mt-1 flex rounded-md shadow-sm"},Kr={key:0,class:"mt-2 text-sm text-red-500"},$r={key:22,class:"py-2 col-span-1 sm:col-span-1"},Gr={key:23,class:"py-2 col-span-4 sm:col-span-4"},qr={class:"mt-1 flex rounded-md shadow-sm"},Qr={key:0,class:"mt-2 text-sm text-red-500"},Xr={key:24,class:"py-2 col-span-1 sm:col-span-1"},Zr={key:25,class:"py-2 col-span-4 sm:col-span-4"},ei={key:0,class:"mt-1 flex rounded-md shadow-sm"},ti={key:1,class:"mt-2 text-sm text-red-500"},si={key:26,class:"py-2 col-span-1 sm:col-span-1"},oi={key:27,class:"py-2 col-span-4 sm:col-span-4"},li={class:"mt-1 flex rounded-md shadow-sm"},ni={key:0,class:"mt-2 text-sm text-red-500"},ri={class:"py-2 col-span-4 sm:col-span-4"},ii={class:"mt-1 flex"},ai={key:0,class:"mt-2 text-sm text-red-500"},di={key:0,class:"flex"},ci={key:0},mi={key:1},pi={class:"flex"},ui={key:1,"wire:loading":"",class:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-gray-700 opacity-75 flex flex-col items-center justify-center"};function fi(r,t,f,s,x,v){const u=B("VueDatePicker"),a=B("pagination"),h=B("no-data"),V=B("incident-alert"),S=B("multiselect"),j=B("task"),N=B("file"),b=B("customer-detail"),p=B("log"),U=B("history"),A=B("app-layout");return l(),F(A,null,{default:Te(()=>{var I;return[e("div",Vl,[e("div",Ul,[e("div",{class:"py-2 md:inline-flex justify-between w-full gap-4",onKeydown:t[11]||(t[11]=ie((...o)=>s.closeModal&&s.closeModal(...o),["esc"]))},[e("div",jl,[t[65]||(t[65]=e("span",{class:"z-10 flex font-normal text-gray-400 absolute bg-transparent text-base justify-center w-8"},[e("i",{class:"fas fa-search"})],-1)),y(e("input",{type:"text",placeholder:"Ticket/Customer",class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",id:"search",tabindex:"1","onUpdate:modelValue":t[0]||(t[0]=o=>s.search=o),onKeyup:t[1]||(t[1]=ie((...o)=>s.searchIncident&&s.searchIncident(...o),["enter"]))},null,544),[[_,s.search]])]),e("div",Dl,[t[67]||(t[67]=e("span",{class:"z-10 flex font-normal text-gray-400 absolute bg-transparent text-base justify-center w-8"},[e("i",{class:"fas fa-sliders-h"})],-1)),y(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.incidentType=o),class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",tabindex:"3",onChange:t[3]||(t[3]=(...o)=>s.changeStatus&&s.changeStatus(...o))},t[66]||(t[66]=[e("option",{value:"default"},"All Ticket",-1),e("option",{value:"service_complaint"},"Service Complaint",-1),e("option",{value:"port_down"},"Port Down",-1),e("option",{value:"onsite_complaint"},"Onsite Complaint",-1),e("option",{value:"technical_complaint"},"Technical Complaint",-1),e("option",{value:"plan_change"},"Plan Change",-1),e("option",{value:"suspension"},"Suspension",-1),e("option",{value:"termination"},"Termination",-1)]),544),[[R,s.incidentType]])]),e("div",Il,[t[69]||(t[69]=e("span",{class:"z-10 flex font-normal text-gray-400 absolute bg-transparent text-base justify-center w-8"},[e("i",{class:"fas fa-sliders-h"})],-1)),y(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.incidentBy=o),class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",tabindex:"4",onChange:t[5]||(t[5]=(...o)=>s.changeStatus&&s.changeStatus(...o))},[t[68]||(t[68]=e("option",{value:"default"},"All Member",-1)),(l(!0),n(E,null,q(f.noc,o=>(l(),n("option",{key:o.id,value:o.id},d(o.name),9,Ol))),128))],544),[[R,s.incidentBy]])]),e("div",Pl,[t[71]||(t[71]=e("span",{class:"z-10 flex font-normal text-gray-400 absolute bg-transparent text-base justify-center w-8"},[e("i",{class:"fas fa-sliders-h"})],-1)),y(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.incidentStatus=o),class:"relative self-center block w-full pr-12 py-2 rounded-md text-gray-400 text-sm border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none pl-10",tabindex:"5",onChange:t[7]||(t[7]=(...o)=>s.changeStatus&&s.changeStatus(...o))},t[70]||(t[70]=[e("option",{value:"0"},"All Status",-1),e("option",{value:"1"},"Open",-1),e("option",{value:"2"},"Escalated",-1),e("option",{value:"6"},"Pending",-1),e("option",{value:"5"},"Resolved",-1),e("option",{value:"3"},"Closed",-1),e("option",{value:"4"},"Deleted",-1)]),544),[[R,s.incidentStatus]])]),e("div",Ml,[z(u,{modelValue:s.incidentDate,"onUpdate:modelValue":t[8]||(t[8]=o=>s.incidentDate=o),range:{partialRange:!0},placeholder:"Ticket Date","enable-time-picker":!1,"model-type":"yyyy-MM-dd",id:"order_date",class:"text-gray-400 text-sm focus:ring focus:ring-indigo-500 focus:border-indigo-500 focus:ring-opacity-10 focus:outline-none"},null,8,["modelValue"])]),e("div",Nl,[e("button",{onClick:t[9]||(t[9]=(...o)=>s.changeStatus&&s.changeStatus(...o)),class:"text-center self-center w-full mt-2 md:w-auto md:mt-0 items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:border-litepie-primary-300 focus:ring focus:ring-litepie-primary-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition mr-1"},t[72]||(t[72]=[e("i",{class:"fas fa-search opacity-75 lg:ml-1 text-sm"},null,-1)]))]),e("div",Al,[f.permission[0].write_incident==1?(l(),n("button",{key:0,onClick:t[10]||(t[10]=o=>s.newTicket()),class:"text-center self-center w-full mt-2 md:w-auto md:mt-0 items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-sm font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:border-litepie-primary-300 focus:ring focus:ring-litepie-primary-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition mr-1",tabindex:"7"},t[73]||(t[73]=[T("Ticket"),e("i",{class:"fas fa-plus-circle opacity-75 lg:ml-1 text-sm"},null,-1)]))):i("",!0)])],32),f.permission[0].read_incident==1||f.permission[0].write_incident==1?(l(),n("div",Ll,[e("div",Bl,[f.incidents.data?(l(),n("div",zl,[e("table",El,[e("thead",Rl,[e("tr",null,[t[80]||(t[80]=e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},null,-1)),t[81]||(t[81]=e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No.",-1)),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[12]||(t[12]=o=>s.sortBy("date"))},t[74]||(t[74]=[T("Open Date "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[13]||(t[13]=o=>s.sortBy("code"))},t[75]||(t[75]=[T("Ticket "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[14]||(t[14]=o=>s.sortBy("ftth_id"))},t[76]||(t[76]=[T("User "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[15]||(t[15]=o=>s.sortBy("township_id"))},t[77]||(t[77]=[T("TSP "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[16]||(t[16]=o=>s.sortBy("type"))},t[78]||(t[78]=[T("Type "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[17]||(t[17]=o=>s.sortBy("incharge"))},t[79]||(t[79]=[T("Created "),e("i",{class:"fas fa-sort text-gray-400"},null,-1)])),t[82]||(t[82]=e("th",{scope:"col",class:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status",-1))])]),e("tbody",Fl,[(l(!0),n(E,null,q(f.incidents.data,(o,L)=>(l(),n("tr",{key:o.id,class:P([[o.id==s.selected_id?"bg-indigo-200":""],"cursor-pointer"]),onClick:Y=>s.edit(o)},[e("td",Yl,[e("i",{class:P("fa fa-circle text-"+o.color)},null,2)]),e("td",Wl,d(L+=f.incidents.from),1),e("td",Jl,d(o.date)+" "+d(o.time),1),e("td",Kl,d(o.code),1),o.ftth_id?(l(),n("td",$l,d(o.ftth_id),1)):i("",!0),o.township_short?(l(),n("td",Gl,d(o.township_short),1)):i("",!0),e("td",ql,d(o.type.replace("_"," ")),1),e("td",Ql,d(o.incharge.match(/\b\w/g).join("")),1),e("td",Xl,d(s.getStatus(o.status)),1)],10,Hl))),128))])],512)])):i("",!0),f.incidents.total?(l(),n("div",Zl,[e("div",null,[e("label",null,d(f.incidents.data.length)+" Tickets in Current Page. Total Number of Tickets : "+d(f.incidents.total),1)]),e("div",null,[t[84]||(t[84]=e("label",{for:"pagination"},"Items per page:",-1)),y(e("select",{id:"pagination","onUpdate:modelValue":t[18]||(t[18]=o=>s.pagination=o),onChange:t[19]||(t[19]=(...o)=>s.updatePagination&&s.updatePagination(...o)),class:"border-gray-300 rounded-md text-xs focus:ring focus:ring-indigo-500 focus:border-indigo-500 mx-4"},t[83]||(t[83]=[e("option",{value:"10"},"10",-1),e("option",{value:"20"},"20",-1),e("option",{value:"50"},"50",-1),e("option",{value:"100"},"100",-1)]),544),[[R,s.pagination]])])])):i("",!0),f.incidents.links?(l(),n("span",en,[z(a,{class:"mt-4",links:f.incidents.links},null,8,["links"])])):i("",!0),f.incidents.data?i("",!0):(l(),n("div",tn,[z(h)]))]),e("div",sn,[e("div",on,[e("div",ln,[e("div",nn,[t[85]||(t[85]=e("label",{class:"block text-sm font-normal text-center"},"Critical",-1)),e("button",{class:"block py-2 px-2 w-full bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-400 active:bg-red-600 focus:border-red-300 focus:ring focus:ring-red-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[20]||(t[20]=o=>s.showPriority("critical"))},d(f.critical),1)]),e("div",{class:"col-span-1",onClick:t[22]||(t[22]=o=>s.showPriority("high"))},[t[86]||(t[86]=e("label",{class:"block text-sm font-normal text-center"},"High",-1)),e("button",{class:"block py-2 px-2 w-full bg-yellow-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-500 active:bg-yellow-700 focus:border-yellow-300 focus:ring focus:ring-yellow-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[21]||(t[21]=o=>s.showPriority("high"))},d(f.high),1)]),e("div",{class:"col-span-1",onClick:t[24]||(t[24]=o=>s.showPriority("normal"))},[t[87]||(t[87]=e("label",{class:"block text-sm font-normal text-center"},"Normal",-1)),e("button",{class:"block py-2 px-2 w-full bg-yellow-400 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-300 active:bg-yellow-500 focus:border-yellow-300 focus:ring focus:ring-yellow-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[23]||(t[23]=o=>s.showPriority("normal"))},d(f.normal),1)]),e("div",rn,[t[88]||(t[88]=e("label",{class:"block text-sm font-normal text-center"},"All",-1)),e("button",{class:"block py-2 px-2 w-full bg-indigo-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:border-indigo-300 focus:ring focus:ring-indigo-500 focus:ring-opacity-10 focus:outline-none disabled:opacity-25 transition",onClick:t[25]||(t[25]=o=>s.showPriority("all"))},d(f.critical+f.high+f.normal),1)])])]),z(V,{tableHeigh:(I=s.myTable)==null?void 0:I.clientHeight,onShow_edit:s.alert_edit},null,8,["tableHeigh","onShow_edit"])])])):(l(),n("div",an,t[89]||(t[89]=[e("span",{class:"px-20 py-10 center bg-white inline-flex"},[e("i",{class:"fa fas fa-exclamation-triangle fa-2x text-yellow-600 mr-2"}),e("label",{class:"font-bold mt-2 text-sm"}," You Don't Have Permission To Access This Page")],-1)])))])]),s.isOpen?(l(),n("div",dn,[e("div",cn,[t[129]||(t[129]=e("div",{class:"fixed inset-0 transition-opacity"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),t[130]||(t[130]=T(" ​ ")),e("div",mn,[e("div",pn,[e("div",un,[e("div",fn,[e("div",gn,[t[94]||(t[94]=e("div",{class:"flex"},[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight mt-2"},"Ticket Detail")],-1)),e("div",yn,[t[93]||(t[93]=e("span",{class:"border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded-l-md text-sm shadow outline-none focus:outline-none"}," Ticket ID ",-1)),y(e("input",{type:"text","onUpdate:modelValue":t[26]||(t[26]=o=>s.form.code=o),name:"code",id:"code",class:"mr-2 border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded-r-md text-sm shadow outline-none focus:outline-none",disabled:""},null,512),[[_,s.form.code]]),e("ul",xn,[e("li",bn,[t[90]||(t[90]=e("label",{class:"block text-sm"},"Critical",-1)),y(e("input",{"onUpdate:modelValue":t[27]||(t[27]=o=>s.form.priority=o),name:"priority",value:"critical",type:"radio",class:"form-radio h-5 w-5 text-red-600 bg-red-600",title:"(1-4hrs)"},null,512),[[se,s.form.priority]])]),e("li",vn,[t[91]||(t[91]=e("label",{class:"block text-sm"},"High",-1)),y(e("input",{"onUpdate:modelValue":t[28]||(t[28]=o=>s.form.priority=o),name:"priority",value:"high",type:"radio",class:"form-radio h-5 w-5 text-yellow-600 bg-yellow-600",title:"(1-12hrs)"},null,512),[[se,s.form.priority]])]),e("li",_n,[t[92]||(t[92]=e("label",{class:"block text-sm"},"Normal",-1)),y(e("input",{"onUpdate:modelValue":t[29]||(t[29]=o=>s.form.priority=o),name:"priority",value:"normal",type:"radio",class:"form-radio h-5 w-5 text-yellow-300 bg-yellow-300",title:"(1-48hrs)"},null,512),[[se,s.form.priority]])])])])])]),e("div",wn,[e("div",kn,[e("ul",hn,[e("li",{class:P(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==1?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[30]||(t[30]=o=>s.tabClick(1)),"preserve-state":""},"Genaral")],2),e("li",{class:P(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==2?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[31]||(t[31]=o=>s.tabClick(2)),"preserve-state":""},"Tasks")],2),e("li",{class:P(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==3?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[32]||(t[32]=o=>s.tabClick(3)),"preserve-state":""},"Files")],2),e("li",{class:P(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==4?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[33]||(t[33]=o=>s.tabClick(4)),"preserve-state":""},"Customer Info")],2),e("li",{class:P(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==5?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[34]||(t[34]=o=>s.tabClick(5)),"preserve-state":""},"LOGS")],2),e("li",{class:P(["px-2 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",[s.tab==6?"border-b-2 border-indigo-400 -mb-px":"opacity-50"]])},[e("a",{href:"#",onClick:t[35]||(t[35]=o=>s.tabClick(6)),"preserve-state":""},"History")],2)])]),e("div",Cn,[e("div",{class:P(["p-4",[s.tab==1?"":"hidden"]])},[e("div",Tn,[t[120]||(t[120]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"},"Incident Detail : ")])],-1)),e("div",Sn,[e("div",Vn,[y(e("input",{type:"date","onUpdate:modelValue":t[36]||(t[36]=o=>s.form.date=o),name:"date",id:"date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.date]])]),r.$page.props.errors.date?(l(),n("p",Un,d(r.$page.props.errors.date),1)):i("",!0)]),e("div",jn,[e("div",Dn,[y(e("input",{type:"time","onUpdate:modelValue":t[37]||(t[37]=o=>s.form.time=o),name:"time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.time]])]),r.$page.props.errors.time?(l(),n("p",In,d(r.$page.props.errors.time),1)):i("",!0)]),t[121]||(t[121]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," User ID : ")])],-1)),e("div",On,[f.customers.length!==0?(l(),n("div",Pn,[z(S,{"deselect-label":"Selected already",options:f.customers,"track-by":"id",label:"ftth_id",modelValue:s.form.customer_id,"onUpdate:modelValue":t[38]||(t[38]=o=>s.form.customer_id=o),"allow-empty":!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.customer?(l(),n("p",Mn,d(r.$page.props.errors.customer),1)):i("",!0)]),t[122]||(t[122]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"incharge",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Person Incharge : ")])],-1)),e("div",Nn,[f.team.length!==0?(l(),n("div",An,[z(S,{"deselect-label":"Selected already",options:f.team,"track-by":"id",label:"name",modelValue:s.form.incharge_id,"onUpdate:modelValue":t[39]||(t[39]=o=>s.form.incharge_id=o),"allow-empty":!1,disabled:!0},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.incharge?(l(),n("p",Ln,d(r.$page.props.errors.incharge),1)):i("",!0)]),t[123]||(t[123]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"type",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Type : ")])],-1)),e("div",Bn,[e("div",zn,[y(e("select",{"onUpdate:modelValue":t[40]||(t[40]=o=>s.form.type=o),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",required:"",onChange:t[41]||(t[41]=o=>s.form.topic=null)},t[95]||(t[95]=[e("option",{value:"default"},"Please Choose Ticket Type",-1),e("option",{value:"service_complaint"},"Service Complaint",-1),e("option",{value:"port_down"},"Port Down",-1),e("option",{value:"onsite_complaint"},"Onsite Complaint",-1),e("option",{value:"technical_complaint"},"Technical Complaint",-1),e("option",{value:"plan_change"},"Plan Change",-1),e("option",{value:"suspension"},"Suspension",-1),e("option",{value:"termination"},"Termination",-1)]),544),[[R,s.form.type]])]),r.$page.props.errors.type?(l(),n("p",En,d(r.$page.props.errors.type),1)):i("",!0)]),s.form.type=="service_complaint"||s.form.type=="onsite_complaint"|s.form.type=="technical_complaint"?(l(),n("div",Rn,t[96]||(t[96]=[e("div",{class:"mt-1 flex"},[e("label",{for:"topic",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Topic : ")],-1)]))):i("",!0),s.form.type=="service_complaint"?(l(),n("div",Fn,[e("div",Hn,[y(e("select",{"onUpdate:modelValue":t[42]||(t[42]=o=>s.form.topic=o),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[97]||(t[97]=[e("option",{value:"los_redlight"},"LOS Redlight",-1),e("option",{value:"pon_blinking"},"PON Blinking",-1),e("option",{value:"high_loss"},"High Loss",-1),e("option",{value:"dn_down"},"DN Down",-1),e("option",{value:"sn_down"},"SN Down",-1),e("option",{value:"relocation"},"Relocation",-1),e("option",{value:"maintenance"},"Maintenance",-1),e("option",{value:"other"},"Other",-1)]),512),[[R,s.form.topic]])]),r.$page.props.errors.topic?(l(),n("p",Yn,d(r.$page.props.errors.topic),1)):i("",!0)])):i("",!0),s.form.type=="onsite_complaint"?(l(),n("div",Wn,[e("div",Jn,[y(e("select",{"onUpdate:modelValue":t[43]||(t[43]=o=>s.form.topic=o),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[98]||(t[98]=[e("option",{value:"no_internet"},"No Internet",-1),e("option",{value:"slow_performance"},"Slow Performance",-1),e("option",{value:"wifi_issue"},"Wifi Issue",-1),e("option",{value:"coverage_issue"},"Coverage Issue",-1),e("option",{value:"onu_issue"},"ONU issue",-1),e("option",{value:"home_router_issue"},"Home Router Issue",-1),e("option",{value:"password_change"},"Password Change",-1),e("option",{value:"other"},"Other",-1)]),512),[[R,s.form.topic]])]),r.$page.props.errors.topic?(l(),n("p",Kn,d(r.$page.props.errors.topic),1)):i("",!0)])):i("",!0),s.form.type=="technical_complaint"?(l(),n("div",$n,[e("div",Gn,[y(e("select",{"onUpdate:modelValue":t[44]||(t[44]=o=>s.form.topic=o),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[99]||(t[99]=[e("option",{value:"website_delay_issue"},"Website Delay Issue",-1),e("option",{value:"gaming_delay_issue"},"Gaming Delay Issue",-1),e("option",{value:"application_delay_issue"},"Application Delay Issue",-1),e("option",{value:"other"},"Other",-1)]),512),[[R,s.form.topic]])]),r.$page.props.errors.topic?(l(),n("p",qn,d(r.$page.props.errors.topic),1)):i("",!0)])):i("",!0),t[124]||(t[124]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Status : ")])],-1)),e("div",Qn,[e("div",Xn,[y(e("select",{"onUpdate:modelValue":t[45]||(t[45]=o=>s.form.status=o),class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},t[100]||(t[100]=[e("option",{value:"1"},"Open",-1),e("option",{value:"6"},"Pending",-1),e("option",{value:"2",disabled:""},"Escalated",-1),e("option",{value:"5",disabled:""},"Resolved",-1),e("option",{value:"3"},"Closed",-1)]),512),[[R,s.form.status]])]),r.$page.props.errors.status?(l(),n("p",Zn,d(r.$page.props.errors.status),1)):i("",!0)]),s.form.status==3?(l(),n("div",er,t[101]||(t[101]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Close Period : ")],-1)]))):i("",!0),s.form.status==3?(l(),n("div",tr,[e("div",sr,[y(e("input",{type:"date","onUpdate:modelValue":t[46]||(t[46]=o=>s.form.close_date=o),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.close_date]])]),r.$page.props.errors.close_date?(l(),n("p",or,d(r.$page.props.errors.close_date),1)):i("",!0)])):i("",!0),s.form.status==3?(l(),n("div",lr,[e("div",nr,[y(e("input",{type:"time","onUpdate:modelValue":t[47]||(t[47]=o=>s.form.close_time=o),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.close_time]])]),r.$page.props.errors.close_time?(l(),n("p",rr,d(r.$page.props.errors.close_time),1)):i("",!0)])):i("",!0),s.form.status==5?(l(),n("div",ir,t[102]||(t[102]=[e("div",{class:"mt-1 flex"},[e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Incident Resolved Period : ")],-1)]))):i("",!0),s.form.status==5?(l(),n("div",ar,[e("div",dr,[y(e("input",{type:"date","onUpdate:modelValue":t[48]||(t[48]=o=>s.form.resolved_date=o),name:"close_date",id:"close_date",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.resolved_date]])]),r.$page.props.errors.resolved_date?(l(),n("p",cr,d(r.$page.props.errors.resolved_date),1)):i("",!0)])):i("",!0),s.form.status==5?(l(),n("div",mr,[e("div",pr,[y(e("input",{type:"time","onUpdate:modelValue":t[49]||(t[49]=o=>s.form.resolved_time=o),name:"close_time",class:"form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.resolved_time]])]),r.$page.props.errors.resolved_time?(l(),n("p",ur,d(r.$page.props.errors.resolved_time),1)):i("",!0)])):i("",!0),s.form.type=="suspension"?(l(),n("div",fr,t[103]||(t[103]=[e("div",{class:"mt-1 flex"},[e("label",{for:"suspense",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Suspense Period : ")],-1)]))):i("",!0),s.form.type=="suspension"?(l(),n("div",gr,[e("div",yr,[e("div",xr,[e("div",br,[t[104]||(t[104]=e("span",{class:"-mt-1 z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-pause"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[50]||(t[50]=o=>s.form.start_date=o),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),r.$page.props.errors.start_date?(l(),n("p",vr,d(r.$page.props.errors.start_date),1)):i("",!0)]),e("div",_r,[e("div",wr,[t[105]||(t[105]=e("span",{class:"-mt-1 z-10 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[51]||(t[51]=o=>s.form.end_date=o),name:"end_date",id:"end_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.end_date]])]),r.$page.props.errors.end_date?(l(),n("p",kr,d(r.$page.props.errors.end_date),1)):i("",!0)])])])):i("",!0),s.form.type=="resume"?(l(),n("div",hr,t[106]||(t[106]=[e("div",{class:"mt-1 flex"},[e("label",{for:"resume",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Resume Date : ")],-1)]))):i("",!0),s.form.type=="resume"?(l(),n("div",Cr,[e("div",Tr,[t[107]||(t[107]=e("span",{class:"z-10 -mt-1 leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-play"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[52]||(t[52]=o=>s.form.start_date=o),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),r.$page.props.errors.resume?(l(),n("p",Sr,d(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="termination"?(l(),n("div",Vr,t[108]||(t[108]=[e("div",{class:"mt-1 flex"},[e("label",{for:"termination",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Termination Date : ")],-1)]))):i("",!0),s.form.type=="termination"?(l(),n("div",Ur,[e("div",jr,[t[109]||(t[109]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-stop"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[53]||(t[53]=o=>s.form.start_date=o),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),r.$page.props.errors.start_date?(l(),n("p",Dr,d(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(l(),n("div",Ir,t[110]||(t[110]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Address : ")],-1)]))):i("",!0),s.form.type=="relocation"?(l(),n("div",Or,[e("div",Pr,[y(e("textarea",{"onUpdate:modelValue":t[54]||(t[54]=o=>s.form.new_address=o),name:"new_address",id:"new_address",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"}," ",512),[[_,s.form.new_address]])]),r.$page.props.errors.new_address?(l(),n("p",Mr,d(r.$page.props.errors.new_address),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(l(),n("div",Nr,t[111]||(t[111]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Township : ")],-1)]))):i("",!0),s.form.type=="relocation"?(l(),n("div",Ar,[f.townships.length!==0?(l(),n("div",Lr,[z(S,{"deselect-label":"Selected already",options:f.townships,"track-by":"id",label:"name",modelValue:s.form.new_township,"onUpdate:modelValue":t[55]||(t[55]=o=>s.form.new_township=o),"allow-empty":!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.new_township?(l(),n("p",Br,d(r.$page.props.errors.new_township),1)):i("",!0)])):i("",!0),s.form.type=="relocation"?(l(),n("div",zr,t[112]||(t[112]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_latlong",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Location : ")],-1)]))):i("",!0),s.form.type=="relocation"?(l(),n("div",Er,[e("div",Rr,[e("div",Fr,[e("div",Hr,[t[113]||(t[113]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[56]||(t[56]=o=>s.form.latitude=o),name:"latitude",id:"latitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Latitude"},null,512),[[_,s.form.latitude]])]),r.$page.props.errors.latitude?(l(),n("p",Yr,d(r.$page.props.errors.latitude),1)):i("",!0)]),e("div",Wr,[e("div",Jr,[t[114]||(t[114]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-location-arrow"})],-1)),y(e("input",{type:"text","onUpdate:modelValue":t[57]||(t[57]=o=>s.form.longitude=o),name:"longitude",id:"longitude",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"Longitude"},null,512),[[_,s.form.longitude]])]),r.$page.props.errors.longitude?(l(),n("p",Kr,d(r.$page.props.errors.longitude),1)):i("",!0)])])])):i("",!0),s.form.type=="relocation"?(l(),n("div",$r,t[115]||(t[115]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):i("",!0),s.form.type=="relocation"?(l(),n("div",Gr,[e("div",qr,[t[116]||(t[116]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-truck"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[58]||(t[58]=o=>s.form.start_date=o),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),r.$page.props.errors.start_date?(l(),n("p",Qr,d(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),s.form.type=="plan_change"?(l(),n("div",Xr,t[117]||(t[117]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_package",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," New Package: ")],-1)]))):i("",!0),s.form.type=="plan_change"?(l(),n("div",Zr,[f.packages.length!==0?(l(),n("div",ei,[z(S,{"deselect-label":"Selected already",options:f.packages,"track-by":"id",label:"item_data",modelValue:s.form.package_id,"onUpdate:modelValue":t[59]||(t[59]=o=>s.form.package_id=o),"allow-empty":!1},null,8,["options","modelValue"])])):i("",!0),r.$page.props.errors.package?(l(),n("p",ti,d(r.$page.props.errors.package),1)):i("",!0)])):i("",!0),s.form.type=="plan_change"?(l(),n("div",si,t[118]||(t[118]=[e("div",{class:"mt-1 flex"},[e("label",{for:"new_address",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Effective Date : ")],-1)]))):i("",!0),s.form.type=="plan_change"?(l(),n("div",oi,[e("div",li,[t[119]||(t[119]=e("span",{class:"z-10 -mt-1 leading-snug font-normal absolute text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-random"})],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[60]||(t[60]=o=>s.form.start_date=o),name:"start_date",id:"start_date",class:"pl-10 form-input focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"},null,512),[[_,s.form.start_date]])]),r.$page.props.errors.start_date?(l(),n("p",ni,d(r.$page.props.errors.start_date),1)):i("",!0)])):i("",!0),t[125]||(t[125]=e("div",{class:"py-2 col-span-1 sm:col-span-1"},[e("div",{class:"mt-1 flex"},[e("label",{for:"detail",class:"block text-sm font-medium text-gray-700 mt-2 mr-2"}," Detail : ")])],-1)),e("div",ri,[e("div",ii,[y(e("textarea",{"onUpdate:modelValue":t[61]||(t[61]=o=>s.form.description=o),name:"detail",id:"detail",class:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300"}," ",512),[[_,s.form.description]])]),r.$page.props.errors.description?(l(),n("p",ai,d(r.$page.props.errors.description),1)):i("",!0)])])],2),e("div",{class:P(["p-4",[s.tab==2?"":"hidden"]])},[(l(),F(Z,null,[s.tab==2?(l(),F(j,{data:s.selected_id,key:s.page_update},null,8,["data"])):i("",!0)],1024))],2),e("div",{class:P(["p-4",[s.tab==3?"":"hidden"]])},[(l(),F(Z,null,[s.tab==3?(l(),F(N,{data:s.selected_id,key:s.page_update},null,8,["data"])):i("",!0)],1024))],2),e("div",{class:P(["p-4",[s.tab==4?"":"hidden"]])},[(l(),F(Z,null,[s.tab==4?(l(),F(b,{data:s.selected_id,key:s.page_update},null,8,["data"])):i("",!0)],1024))],2),e("div",{class:P(["p-4",[s.tab==5?"":"hidden"]])},[(l(),F(Z,null,[s.tab==5?(l(),F(p,{data:s.selected_id,key:s.page_update},null,8,["data"])):i("",!0)],1024))],2),e("div",{class:P(["p-4",[s.tab==6?"":"hidden"]])},[(l(),F(Z,null,[s.tab==6?(l(),F(U,{data:s.selected_id,key:s.page_update},null,8,["data"])):i("",!0)],1024))],2)])])])]),e("div",{class:P(["bg-indigo-50 px-3 py-3 sm:px-6 sm:flex sm:flex-row",[s.tab==1?"justify-between":"justify-end"]])},[s.tab==1&&f.permission[0].write_incident==1?(l(),n("div",di,[e("button",{class:"inline-flex items-center px-4 py-3 bg-indigo-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-400 active:bg-indigo-600 focus:outline-none focus:border-indigo-900 disabled:opacity-25 transition mr-1",onClick:t[62]||(t[62]=o=>s.submit())},[s.editMode?(l(),n("span",ci,"Update")):i("",!0),s.editMode==!1?(l(),n("span",mi,"Save")):i("",!0),t[126]||(t[126]=e("i",{class:"fas fa-save opacity-75 lg:ml-1 text-sm"},null,-1))]),y(e("button",{onClick:t[63]||(t[63]=(...o)=>s.deleteIncident&&s.deleteIncident(...o)),class:"inline-flex items-center px-4 py-3 bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-400 active:bg-red-600 focus:outline-none focus:border-gray-500 disabled:opacity-25 transition mr-1"},t[127]||(t[127]=[T("Delete"),e("i",{class:"lg:ml-1 fas fa-trash opacity-75 text-sm"},null,-1)]),512),[[Se,s.selected_id]])])):i("",!0),e("div",pi,[e("button",{onClick:t[64]||(t[64]=(...o)=>s.closeModal&&s.closeModal(...o)),type:"button",class:"inline-flex items-center px-4 py-3 bg-gray-200 border border-transparent rounded-md font-semibold text-xs text-gray-600 uppercase tracking-widest hover:bg-gray-300 active:bg-gray-400 focus:outline-none focus:border-gray-500 disabled:opacity-25 transition"},t[128]||(t[128]=[T("Close "),e("i",{class:"lg:ml-1 fas fa-times-circle opacity-75 text-sm"},null,-1)]))])],2)])])],512)):i("",!0),s.loading?(l(),n("div",ui,t[131]||(t[131]=[e("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4"},null,-1),e("h2",{class:"text-center text-white text-xl font-semibold"},"Loading...",-1),e("p",{class:"w-1/3 text-center text-white"},"This may take a few seconds, please don't close this page.",-1)]))):i("",!0)]}),_:1})}const Ci=J(Sl,[["render",fi]]);export{Ci as default};
