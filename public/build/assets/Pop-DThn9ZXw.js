import{A as L}from"./AppLayout-C1XkyyNU.js";import{P as U}from"./Pagination-C4a6N0n6.js";import{_ as T}from"./PrimaryButton-D2-MbjmZ.js";import{_ as A}from"./DialogModal-R3RubT4b.js";import{_ as I}from"./SecondaryButton-DtNC28WA.js";import{_ as J}from"./DangerButton-CqbLmX7I.js";import{_ as M,a as B}from"./TextInput-Xwem0K4Q.js";import{_ as q}from"./ConfirmationModal-DNSnUBvw.js";import{T as V,r as k,s as x,d,b as u,w as i,F as D,N as O,o as c,a as e,k as y,x as _,K as F,g as E,e as b,t as p,f}from"./app-BbJbczhH.js";import{M as K}from"./vue3-multiselect.umd.min-CDtnbevn.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-NtfwnczN.js";const R={name:"pop",components:{AppLayout:L,Pagination:U,JetButton:T,JetDialogModal:A,JetSecondaryButton:I,JetDangerButton:J,JetConfirmationModal:q,JetInput:M,JetInputError:B,useForm:V,Multiselect:K},props:{pops:Object,pop_devices:Object,errors:Object},setup(m){let t=k(!1),a=k(""),o=k(!1);const g=k([{id:"",device_name:"",qty:1,remark:""}]),l=V({id:null,site_name:null,site_description:null,site_location:null,devices:null});function C(n){l.id=n}function h(){l.id=null,l.site_name=null,l.site_description=null,l.site_location=null,l.devices=null,g.value=[]}function w(n){l.id=n.id,l.site_name=n.site_name,l.site_description=n.site_description,l.site_location=n.site_location,t.value=!0,o.value=!0,m.pop_devices&&(g.value.shift(),m.pop_devices.forEach(r=>{if(r.pop_id==n.id){var v={id:r.id,device_name:r.device_name,qty:r.qty,remark:r.remark};g.value.push(v)}}))}function P(){h(),t.value=!1,o.value=!1}function S(){o.value?(l._method="PUT",l.devices=g,l.put("/pop/"+l.id,{preserveState:!0,onSuccess:n=>{t.value=!1,h(),Toast.fire({icon:"success",title:n.props.flash.message})},onError:n=>{console.log("error ..".errors)}})):(l._method="POST",l.devices=g,l.post("/pop",{preserveState:!0,onSuccess:n=>{t.value=!1,h(),Toast.fire({icon:"success",title:n.props.flash.message})},onError:n=>{console.log("error ..".errors)}}))}function N(){O.get("/pop/",{keyword:a.value},{preserveState:!0})}const j=n=>{const r=/^-?\d+(\.\d+)?,-?\d+(\.\d+)?$/,v=n.target.value;r.test(v)&&(console.log(v),l.site_location=v)};function s(){let n=Object({});n.id=l.id,n._method="DELETE",O.post("/pop/"+n.id,n,{preserveScroll:!0,preserveState:!0,onSuccess:r=>{l.id=null,Toast.fire({icon:"success",title:r.props.flash.message})},onError:r=>{console.log("error ..".errors)}})}return{show:t,form:l,editMode:o,search:a,devices:g,onInputLocation:j,cancel:P,deleteNode:s,confirmDelete:C,searchPort:N,save:S,edit:w}}},G={class:"py-2"},H={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Q={class:"flex justify-between space-x-2 items-end mb-2 px-1 md:px-0"},W={class:"relative flex flex-wrap z-0"},X={class:"col-1"},Y={key:0,class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Z={class:"min-w-full divide-y divide-gray-200 table-auto"},$={class:"bg-white divide-y divide-gray-200 max-h-64"},tt={class:"px-6 py-3 font-medium"},et={class:"px-6 py-3 font-medium"},ot={class:"px-6 py-3 font-medium"},st={class:"px-6 py-3 font-medium"},nt={class:"px-6 py-3 font-medium"},lt={class:"px-6 py-3 font-medium text-right"},rt=["onClick"],it=["onClick"],at={key:1,class:"w-full block mt-4"},dt={class:"text-xs text-gray-600"},ct={key:2},pt={class:"mb-4 md:col-span-1"},mt={key:0,class:"text-red-500"},ut={class:"mb-4 md:col-span-1"},ft={key:0,class:"text-red-500"},gt={class:"mb-4 md:col-span-1"},xt={key:0,class:"text-red-500"},yt={class:"overflow-hidden h-max"},_t={class:"min-w-full text-center"},bt={class:"text-sm text-gray-900 font-light w-10 py-4 whitespace-nowrap"},ht={class:"text-sm text-gray-900 font-light w-96 py-4 whitespace-nowrap"},vt=["onUpdate:modelValue"],wt={class:"text-sm text-gray-900 font-light w-20 py-4 whitespace-nowrap"},kt=["onUpdate:modelValue"],Ct={class:"text-sm text-gray-900 font-light w-28 py-4 whitespace-nowrap"},Pt=["onUpdate:modelValue"],St={class:"text-sm text-gray-900 font-light w-28 py-4 whitespace-nowrap"},Nt=["onClick"];function jt(m,t,a,o,g,l){const C=x("pagination"),h=x("app-layout"),w=x("jet-secondary-button"),P=x("jet-danger-button"),S=x("jet-confirmation-modal"),N=x("jet-button"),j=x("jet-dialog-modal");return c(),d(D,null,[u(h,null,{header:i(()=>t[11]||(t[11]=[e("h2",{class:"font-semibold text-xl text-white leading-tight"},"POP Setup",-1)])),default:i(()=>[e("div",G,[e("div",H,[e("div",Q,[e("div",W,[t[12]||(t[12]=e("span",{class:"z-10 h-full leading-snug font-normal text-center text-gray-300 absolute bg-transparent rounded text-base items-center justify-center w-8 pl-3 py-3"},[e("i",{class:"fas fa-search"})],-1)),y(e("input",{type:"text",placeholder:"Search here...",class:"border-0 px-3 py-3 placeholder-gray-300 text-gray-600 relative bg-white rounded text-sm shadow outline-none focus:outline-none focus:ring w-full pl-10",id:"search","onUpdate:modelValue":t[0]||(t[0]=s=>o.search=s),onKeyup:t[1]||(t[1]=F((...s)=>o.searchPort&&o.searchPort(...s),["enter"]))},null,544),[[_,o.search]])]),e("button",{onClick:t[2]||(t[2]=()=>{o.show=!0,o.editMode=!1}),class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},"Create")]),e("div",X,[a.pops.data?(c(),d("div",Y,[e("table",Z,[t[15]||(t[15]=e("thead",{class:"bg-gray-50"},[e("tr",{class:"text-left"},[e("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"No."),e("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"Site Name"),e("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"Site Description"),e("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"Created At"),e("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},"Updated At"),e("th",{scope:"col",class:"px-4 py-3 text-xs font-medium text-gray-500 uppercase"},[e("span",{class:"sr-only"},"Action")])])],-1)),e("tbody",$,[(c(!0),d(D,null,E(a.pops.data,(s,n)=>(c(),d("tr",{key:s.id},[e("td",tt,p(a.pops.from+n),1),e("td",et,p(s.site_name),1),e("td",ot,p(s.site_description),1),e("td",st,p(s.created_at),1),e("td",nt,p(s.updated_at),1),e("td",lt,[e("a",{href:"#",onClick:r=>o.edit(s),class:"text-yellow-600 ml-2"},t[13]||(t[13]=[e("i",{class:"fa fa-pen"},null,-1)]),8,rt),e("a",{href:"#",onClick:r=>o.confirmDelete(s),class:"text-red-600 ml-2"},t[14]||(t[14]=[e("i",{class:"fa fa-trash"},null,-1)]),8,it)])]))),128))])])])):b("",!0),a.pops.total?(c(),d("span",at,[e("label",dt,p(a.pops.data.length)+" POP List in Current Page. Total Number of POP : "+p(a.pops.total),1)])):b("",!0),a.pops.links?(c(),d("span",ct,[u(C,{class:"mt-6",links:a.pops.links},null,8,["links"])])):b("",!0)])])])]),_:1}),u(S,{show:o.form.id,onClose:t[4]||(t[4]=s=>o.form.id=null)},{title:i(()=>t[16]||(t[16]=[f(" Delete Node")])),content:i(()=>t[17]||(t[17]=[f(" Are you sure you would like to delete this DN ? It might effect to Customer Data ! ")])),footer:i(()=>[u(w,{onClick:t[3]||(t[3]=s=>o.form.id=null)},{default:i(()=>t[18]||(t[18]=[f(" Cancel ")])),_:1}),u(P,{class:"ml-2",onClick:o.deleteNode},{default:i(()=>t[19]||(t[19]=[f(" Delete ")])),_:1},8,["onClick"])]),_:1},8,["show"]),u(j,{show:o.show,onClose:t[10]||(t[10]=s=>o.show=!1)},{title:i(()=>t[20]||(t[20]=[f(" Add New Port ")])),content:i(()=>[e("div",pt,[t[21]||(t[21]=e("label",{for:"site_name",class:"block text-gray-700 text-sm font-bold mb-2"},"POP Site Name :",-1)),y(e("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"site_name",placeholder:"Enter POP Site Name","onUpdate:modelValue":t[5]||(t[5]=s=>o.form.site_name=s)},null,512),[[_,o.form.site_name]]),m.$page.props.errors.site_name?(c(),d("div",mt,p(m.$page.props.errors.site_name),1)):b("",!0)]),e("div",ut,[t[22]||(t[22]=e("label",{for:"description",class:"block text-gray-700 text-sm font-bold mb-2"},"POP Site Description :",-1)),y(e("textarea",{class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"description",placeholder:"Enter Description","onUpdate:modelValue":t[6]||(t[6]=s=>o.form.site_description=s)},null,512),[[_,o.form.site_description]]),m.$page.props.errors.site_description?(c(),d("div",ft,p(m.$page.props.errors.site_description),1)):b("",!0)]),e("div",gt,[t[23]||(t[23]=e("label",{for:"site_location",class:"block text-gray-700 text-sm font-bold mb-2"},"POP Site Location :",-1)),y(e("input",{type:"text",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",id:"site_location",placeholder:"Enter Location (Lat,Long)","onUpdate:modelValue":t[7]||(t[7]=s=>o.form.site_location=s),onInput:t[8]||(t[8]=(...s)=>o.onInputLocation&&o.onInputLocation(...s))},null,544),[[_,o.form.site_location]]),m.$page.props.errors.site_location?(c(),d("div",xt,p(m.$page.props.errors.site_location),1)):b("",!0)]),e("div",yt,[e("button",{onClick:t[9]||(t[9]=s=>o.devices.push({})),type:"button",class:"btn bg-indigo-600 hover:bg-indigo-700 text-sm shadow-sm rounded-md px-4 py-2 text-white font-semibold"},t[24]||(t[24]=[f("Add "),e("i",{class:"fa fas fa-plus"},null,-1)])),e("table",_t,[t[25]||(t[25]=e("thead",{class:"border-b bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"text-left text-sm font-bold text-gray-900 py-4"},"#"),e("th",{scope:"col",class:"text-left text-sm font-bold text-gray-900 py-4"},"OLT Name"),e("th",{scope:"col",class:"text-left text-sm font-bold text-gray-900 py-4"},"No. of Frame "),e("th",{scope:"col",class:"text-left text-sm font-bold text-gray-900 py-4"},"Remark"),e("th",{scope:"col",class:"text-left text-sm font-bold text-gray-900 py-4"},"#")])],-1)),e("tbody",null,[(c(!0),d(D,null,E(o.devices,(s,n)=>(c(),d("tr",{class:"bg-white border-b",key:n},[e("td",bt,p(n+1),1),e("td",ht,[y(e("input",{type:"text",name:"description",id:"description","onUpdate:modelValue":r=>s.device_name=r,class:"form-control w-full text-sm text-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"},null,8,vt),[[_,s.device_name]])]),e("td",wt,[y(e("input",{type:"number",name:"price",id:"price","onUpdate:modelValue":r=>s.qty=r,class:"form-control w-full text-sm text-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",min:"1"},null,8,kt),[[_,s.qty]])]),e("td",Ct,[y(e("input",{type:"text",name:"remark",id:"remark","onUpdate:modelValue":r=>s.remark=r,class:"form-control w-full text-sm text-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"},null,8,Pt),[[_,s.remark]])]),e("td",St,[e("button",{onClick:r=>o.devices.splice(n,1),type:"button",class:"btn bg-yellow-600 hover:bg-yellow-700 text-lg shadow-sm rounded-md px-2 py-0 text-white font-semibold"},"Ã—",8,Nt)])]))),128))])])])]),footer:i(()=>[u(w,{onClick:o.cancel},{default:i(()=>t[26]||(t[26]=[f(" Close ")])),_:1},8,["onClick"]),u(N,{class:"ml-2",onClick:o.save},{default:i(()=>t[27]||(t[27]=[f(" Save ")])),_:1},8,["onClick"])]),_:1},8,["show"])],64)}const qt=z(R,[["render",jt]]);export{qt as default};
